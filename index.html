<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Talently - Encuentra tu Match Profesional</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&family=Sora:wght@400;600;700&family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
    <!-- Tailwind CSS for Stitch Views (Preflight disabled) -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            corePlugins: {
                preflight: false,
            },
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#1392ec",
                        "background-light": "#f6f7f8",
                        "background-dark": "#101a22",
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#6C5CE7">
    <link rel="apple-touch-icon"
        href="https://ui-avatars.com/api/?name=Talently&background=6c5ce7&color=fff&size=192&rounded=true">

    <style>
        /* CRITICAL FIXES */
        /* 1. App Container Layout */
        * {
            box-sizing: border-box;
        }

        html {
            overflow-x: hidden;
        }

        body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        .app-container {
            min-height: 100vh;
            display: block;
            /* Changed from flex to block to match reference */
            margin: 0 auto;
            margin-top: 0 !important;
            padding: 0 !important;
            width: 100%;
            max-width: 480px;
            position: relative;
            /* Force mobile width center */
        }

        /* 2. Hide Slider Thumb (The "Dot") and fix Appearance */
        #yearsExperience {
            -webkit-appearance: none;
            appearance: none;
        }

        #yearsExperience::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 0;
            height: 0;
            opacity: 0;
        }

        #yearsExperience::-moz-range-thumb {
            width: 0;
            height: 0;
            opacity: 0;
            border: none;
        }

        /* 3. Profile Avatar Sizes & Icons */
        .profile-avatar-large {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 12px;
            border: 3px solid var(--primary);
        }

        .profile-name-large {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
            text-align: center;
        }

        .profile-title-large {
            font-size: 14px;
            color: var(--text-secondary);
            text-align: center;
        }

        .profile-hero {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 24px 0;
        }

        /* 4. Settings Icons */
        .settings-icon {
            width: 40px;
            height: 40px;
            min-width: 40px;
            /* Prevent shrinking */
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            background: var(--bg);
            margin-right: 12px;
            color: var(--text-primary);
        }

        .settings-icon svg {
            width: 24px;
            height: 24px;
        }

        /* 5. Fix Nested Wrapper Whitespace */
        .main-app {
            min-height: auto !important;
            padding-bottom: 0 !important;
        }

        #mainApp,
        #companyApp {
            padding-bottom: 80px;
            /* Space for bottom nav */
            min-height: 100vh;
            /* Ensure full height when active */
        }

        .chat-input-container {
            position: fixed;
            bottom: 60px;
            /* Above nav bar */
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 480px;
            /* Match app container */
            z-index: 101;
            background: var(--bg);
            border-top: 1px solid var(--border);
            box-sizing: border-box;
            /* Ensure padding doesn't overflow */
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.05);
        }

        .chat-messages {
            padding-bottom: 100px !important;
            /* Make space for limit */
        }

        /* 6. MODAL STYLES */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(2px);
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeIn 0.2s ease-out;
        }

        .modal-content {
            background: var(--surface);
            width: 90%;
            max-width: 400px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            max-height: 90vh;
            /* Ensure it fits on mobile */
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background: var(--surface);
            z-index: 10;
        }

        .modal-header h3 {
            font-size: 18px;
            font-weight: 700;
            margin: 0;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0 4px;
        }

        .modal-body {
            padding: 20px;
        }

        .modal-footer {
            padding: 16px 20px;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            position: sticky;
            bottom: 0;
            background: var(--surface);
            z-index: 10;
        }

        .salary-input-group {
            display: flex;
            align-items: center;
            border: 2px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            transition: border-color 0.2s;
        }

        .salary-input-group:focus-within {
            border-color: var(--primary);
        }

        .salary-input-group .currency-symbol {
            padding-left: 12px;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .salary-input-group input {
            border: none;
            padding-left: 8px;
            box-shadow: none !important;
            width: 100%;
            /* Ensure it takes available space */
            /* Override default input focus */
        }

        .currency-select {
            border: 1px solid #000 !important;
            /* User request: black borders */
            border-radius: 8px;
            /* Slight radius to look nice but distinct */
            color: var(--text-primary);
            font-weight: 600;
            outline: none;
            min-width: 80px;
            /* Ensure visible width */
            z-index: 2;
            /* Ensure on top */
            position: relative;
            background-color: var(--bg);
            /* Ensure no transparency issues */
            -webkit-appearance: none;
            /* Fix for some browsers */
            appearance: none;
            text-align: center;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        /* FIX: Consistent select styling */
        select.form-select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-color: var(--bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 12px 16px;
            font-size: 14px;
            color: var(--text-primary);
            width: 100%;
            transition: all 0.2s;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236B7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3F%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 16px;
        }

        select.form-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.1);
        }
    </style>
</head>

<body>

    <div class="app-container">
        <!-- ===== WELCOME VIEW ===== -->
        <div id="welcomeView" class="view active">
            <div
                style="min-height: 100vh; display: flex; flex-direction: column; position: relative; overflow: hidden; font-family: 'Inter', sans-serif; background: #F3F4F6;">
                <!-- Background Image -->
                <div style="position: absolute; inset: 0; z-index: 0;">
                    <img src="https://lh3.googleusercontent.com/aida-public/AB6AXuCSDYyU9bm8SE0KxZ4nNccwGLFKn3FdpBT2XwjpTxjj6MO9lZZ0na4ce7j-eTapXFEswkTqRtgtxcNmkFfzRxJztTgZ6-xFwhztz145LST5dd9dgVHgGa2sDL9hs7qCQVm00Gj0LVwrFFES7qGhVgumXEPJ_jWKaeOpdAxryANR6j4KOQAIYUKzgf1lDz0g68u3q_oO2pFtJaMPE1ZTJCFVDHBjJ_ik4CG87YbNCeQCZvDhdnbI1R_ujDzq3hhSIR1qJcrkTricmkLr"
                        alt="Professional team collaborating in a modern office"
                        style="width: 100%; height: 100%; object-fit: cover; object-position: center;">
                    <!-- Overlay -->
                    <div style="position: absolute; inset: 0; background: rgba(255,255,255,0.4);"></div>
                    <div
                        style="position: absolute; inset: 0; background: linear-gradient(to top, rgba(243, 244, 246, 0.95) 10%, rgba(243, 244, 246, 0.6) 40%, rgba(243, 244, 246, 0) 100%);">
                    </div>
                </div>
                <!-- Content -->
                <div
                    style="position: relative; z-index: 10; display: flex; flex-direction: column; flex-grow: 1; justify-content: space-between; padding: 40px 24px; height: 100%; max-width: 448px; margin: 0 auto; width: 100%;">
                    <!-- Logo -->
                    <div style="display: flex; flex-direction: column; align-items: center; padding-top: 48px;">
                        <div
                            style="width: 64px; height: 64px; background: #3B82F6; border-radius: 16px; display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); margin-bottom: 16px;">
                            <span class="material-icons" style="color: white; font-size: 36px;">work_outline</span>
                        </div>
                        <h1
                            style="font-size: 30px; font-weight: 700; letter-spacing: -0.025em; color: #111827; text-shadow: 0 1px 2px rgba(0,0,0,0.05); margin: 0; font-family: 'Inter', sans-serif;">
                            Talently</h1>
                    </div>
                    <!-- Hero Text -->
                    <div style="margin-bottom: 32px; text-align: center;">
                        <h2
                            style="font-size: 36px; font-weight: 800; color: #111827; line-height: 1.1; margin: 0 0 16px 0; font-family: 'Inter', sans-serif;">
                            Encuentra tu <br>
                            <span style="color: #3B82F6;">match profesional</span>
                        </h2>
                        <p
                            style="color: #4B5563; font-size: 18px; font-weight: 500; line-height: 1.6; max-width: 320px; margin: 0 auto;">
                            Conectamos el mejor talento con empresas increibles. Desliza hacia tu futuro.
                        </p>
                    </div>
                    <!-- Buttons -->
                    <div style="width: 100%; margin-bottom: 32px;">
                        <button onclick="app.showRegister()"
                            style="width: 100%; background: #3B82F6; color: white; font-weight: 700; padding: 16px 24px; border-radius: 16px; border: none; box-shadow: 0 10px 15px -3px rgba(59,130,246,0.3); cursor: pointer; font-size: 16px; font-family: 'Inter', sans-serif; display: flex; align-items: center; justify-content: center; transition: all 0.2s; margin-bottom: 16px;">
                            <span style="margin-right: 8px;">Registrate</span>
                            <span class="material-icons" style="font-size: 14px;">arrow_forward</span>
                        </button>
                        <button onclick="app.showLogin()"
                            style="width: 100%; background: rgba(255,255,255,0.8); backdrop-filter: blur(12px); color: #1F2937; font-weight: 600; padding: 16px 24px; border-radius: 16px; border: 1px solid #E5E7EB; box-shadow: 0 1px 3px rgba(0,0,0,0.1); cursor: pointer; font-size: 16px; font-family: 'Inter', sans-serif; transition: all 0.2s; margin-bottom: 24px;">
                            Inicia sesion
                        </button>
                        <p
                            style="font-size: 12px; text-align: center; color: #6B7280; padding: 0 16px; margin: 0; font-family: 'Inter', sans-serif;">
                            Al continuar, aceptas nuestros
                            <a href="#"
                                style="text-decoration: underline; text-underline-offset: 2px; color: #6B7280;">Terminos
                                de Servicio</a>
                            y
                            <a href="#"
                                style="text-decoration: underline; text-underline-offset: 2px; color: #6B7280;">Politica
                                de Privacidad</a>.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== LOGIN VIEW ===== -->
        <div id="loginView" class="view">
            <div
                style="min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 24px; font-family: 'Inter', sans-serif; background: #F3F4F6;">
                <main
                    style="width: 100%; max-width: 384px; display: flex; flex-direction: column; align-items: center; gap: 32px;">
                    <!-- Logo -->
                    <div
                        style="display: flex; flex-direction: column; align-items: center; gap: 16px; text-align: center;">
                        <div
                            style="width: 64px; height: 64px; background: #3B82F6; border-radius: 16px; display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 15px -3px rgba(59,130,246,0.3); margin-bottom: 8px;">
                            <span class="material-icons" style="color: white; font-size: 36px;">work_outline</span>
                        </div>
                        <h1
                            style="font-size: 30px; font-weight: 700; color: #111827; letter-spacing: -0.025em; margin: 0;">
                            Talently</h1>
                        <p style="color: #6B7280; font-size: 14px; margin: 0;">Conectando talento con oportunidades</p>
                    </div>

                    <!-- Card -->
                    <div
                        style="width: 100%; background: white; padding: 32px; border-radius: 16px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.1); border: 1px solid #F3F4F6;">
                        <form onsubmit="app.handleLogin(event)"
                            style="display: flex; flex-direction: column; gap: 20px;">
                            <!-- Email -->
                            <div style="display: flex; flex-direction: column; gap: 4px;">
                                <label for="emailInput"
                                    style="font-size: 14px; font-weight: 500; color: #111827;">Correo
                                    electronico</label>
                                <div style="position: relative;">
                                    <div
                                        style="position: absolute; top: 0; bottom: 0; left: 0; padding-left: 12px; display: flex; align-items: center; pointer-events: none;">
                                        <span class="material-icons"
                                            style="color: #6B7280; font-size: 20px;">mail_outline</span>
                                    </div>
                                    <input type="email" id="emailInput" placeholder="nombre@ejemplo.com" required
                                        style="width: 100%; padding: 12px 12px 12px 40px; border: 1px solid #D1D5DB; border-radius: 12px; font-size: 14px; background: #F9FAFB; color: #111827; outline: none; transition: border-color 0.15s, box-shadow 0.15s; font-family: 'Inter', sans-serif; box-sizing: border-box;"
                                        onfocus="this.style.borderColor='#3B82F6'; this.style.boxShadow='0 0 0 2px rgba(59,130,246,0.3)'"
                                        onblur="this.style.borderColor='#D1D5DB'; this.style.boxShadow='none'">
                                </div>
                            </div>

                            <!-- Password -->
                            <div style="display: flex; flex-direction: column; gap: 4px;">
                                <label for="loginPassword"
                                    style="font-size: 14px; font-weight: 500; color: #111827;">Contrasena</label>
                                <div style="position: relative;">
                                    <div
                                        style="position: absolute; top: 0; bottom: 0; left: 0; padding-left: 12px; display: flex; align-items: center; pointer-events: none;">
                                        <span class="material-icons"
                                            style="color: #6B7280; font-size: 20px;">lock_outline</span>
                                    </div>
                                    <input type="password" id="loginPassword" placeholder="••••••••" required
                                        style="width: 100%; padding: 12px 44px 12px 40px; border: 1px solid #D1D5DB; border-radius: 12px; font-size: 14px; background: #F9FAFB; color: #111827; outline: none; transition: border-color 0.15s, box-shadow 0.15s; font-family: 'Inter', sans-serif; box-sizing: border-box;"
                                        onfocus="this.style.borderColor='#3B82F6'; this.style.boxShadow='0 0 0 2px rgba(59,130,246,0.3)'"
                                        onblur="this.style.borderColor='#D1D5DB'; this.style.boxShadow='none'">
                                    <div style="position: absolute; top: 0; bottom: 0; right: 0; padding-right: 12px; display: flex; align-items: center; cursor: pointer;"
                                        onclick="app.togglePassword('loginPassword')">
                                        <span class="material-icons"
                                            style="color: #6B7280; font-size: 20px;">visibility_off</span>
                                    </div>
                                </div>
                                <div style="display: flex; justify-content: flex-end; padding-top: 4px;">
                                    <a onclick="app.handleForgotPassword()"
                                        style="font-size: 12px; font-weight: 500; color: #3B82F6; cursor: pointer; text-decoration: none;">
                                        Olvidaste tu contrasena?
                                    </a>
                                </div>
                            </div>

                            <!-- Submit -->
                            <button type="submit"
                                style="width: 100%; padding: 12px 16px; background: #3B82F6; color: white; font-size: 14px; font-weight: 600; border: none; border-radius: 12px; cursor: pointer; box-shadow: 0 10px 15px -3px rgba(59,130,246,0.3); transition: all 0.15s; font-family: 'Inter', sans-serif;"
                                onmouseover="this.style.background='#2563EB'"
                                onmouseout="this.style.background='#3B82F6'">
                                Iniciar sesion
                            </button>

                            <!-- Divider -->
                            <div style="position: relative; padding: 8px 0;">
                                <div style="position: absolute; inset: 0; display: flex; align-items: center;">
                                    <div style="width: 100%; border-top: 1px solid #E5E7EB;"></div>
                                </div>
                                <div style="position: relative; display: flex; justify-content: center;">
                                    <span style="padding: 0 8px; background: white; color: #6B7280; font-size: 14px;">O
                                        continua con</span>
                                </div>
                            </div>

                            <!-- Google -->
                            <button type="button" onclick="app.loginWithGoogle()"
                                style="width: 100%; display: flex; justify-content: center; align-items: center; padding: 12px 16px; border: 1px solid #D1D5DB; border-radius: 12px; background: white; color: #111827; font-size: 14px; font-weight: 500; cursor: pointer; transition: background 0.15s; font-family: 'Inter', sans-serif;"
                                onmouseover="this.style.background='#F9FAFB'"
                                onmouseout="this.style.background='white'">
                                <svg style="height: 20px; width: 20px; margin-right: 8px;" viewBox="0 0 24 24">
                                    <path
                                        d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"
                                        fill="#4285F4" />
                                    <path
                                        d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"
                                        fill="#34A853" />
                                    <path
                                        d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"
                                        fill="#FBBC05" />
                                    <path
                                        d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"
                                        fill="#EA4335" />
                                </svg>
                                Google
                            </button>
                        </form>
                    </div>

                    <!-- Footer -->
                    <p style="text-align: center; font-size: 14px; color: #6B7280; margin: 0;">
                        No tienes cuenta?
                        <a onclick="app.showRegister()"
                            style="font-weight: 600; color: #3B82F6; cursor: pointer; text-decoration: none;">Registrate</a>
                    </p>
                </main>
            </div>
        </div>

        <!-- ===== REGISTER VIEW ===== -->
        <div id="registerView" class="view">
            <div
                style="min-height: 100vh; display: flex; flex-direction: column; font-family: 'Inter', sans-serif; background: white;">
                <!-- Header -->
                <div style="padding: 24px 24px 8px 24px;">
                    <button onclick="app.showWelcome()"
                        style="width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; border: none; background: transparent; cursor: pointer; margin-left: -8px; margin-bottom: 16px;"
                        onmouseover="this.style.background='#F3F4F6'" onmouseout="this.style.background='transparent'">
                        <span class="material-icons" style="color: #111827; font-size: 24px;">arrow_back</span>
                    </button>
                    <h1
                        style="font-size: 30px; font-weight: 700; color: #111827; letter-spacing: -0.025em; margin: 0 0 8px 0;">
                        Crear cuenta</h1>
                    <p style="font-size: 16px; color: #6B7280; font-weight: 500; margin: 0;">Encuentra tu proximo reto
                        profesional</p>
                </div>

                <!-- Form -->
                <div style="flex: 1; display: flex; flex-direction: column; padding: 24px; overflow-y: auto;">
                    <form id="registerForm" onsubmit="event.preventDefault(); app.handleRegisterClick()"
                        style="display: flex; flex-direction: column; gap: 20px;">
                        <!-- Name -->
                        <div style="display: flex; flex-direction: column; gap: 8px;">
                            <label for="registerName" style="font-size: 14px; font-weight: 600; color: #111827;">Nombre
                                completo</label>
                            <div style="position: relative;">
                                <div
                                    style="position: absolute; top: 0; bottom: 0; left: 0; padding-left: 12px; display: flex; align-items: center; pointer-events: none;">
                                    <span class="material-icons" style="color: #9CA3AF; font-size: 22px;">person</span>
                                </div>
                                <input type="text" id="registerName" placeholder="Ej. Maria Garcia" required
                                    style="width: 100%; height: 48px; padding-left: 40px; padding-right: 12px; border: 1px solid #E5E7EB; border-radius: 12px; background: white; color: #111827; font-size: 16px; font-weight: 500; outline: none; transition: all 0.15s; font-family: 'Inter', sans-serif; box-sizing: border-box;"
                                    onfocus="this.style.borderColor='#3B82F6'; this.style.boxShadow='0 0 0 2px rgba(59,130,246,0.2)'"
                                    onblur="this.style.borderColor='#E5E7EB'; this.style.boxShadow='none'">
                            </div>
                        </div>

                        <!-- Email -->
                        <div style="display: flex; flex-direction: column; gap: 8px;">
                            <label for="registerEmail" style="font-size: 14px; font-weight: 600; color: #111827;">Correo
                                electronico</label>
                            <div style="position: relative;">
                                <div
                                    style="position: absolute; top: 0; bottom: 0; left: 0; padding-left: 12px; display: flex; align-items: center; pointer-events: none;">
                                    <span class="material-icons" style="color: #9CA3AF; font-size: 22px;">mail</span>
                                </div>
                                <input type="email" id="registerEmail" placeholder="nombre@ejemplo.com" required
                                    style="width: 100%; height: 48px; padding-left: 40px; padding-right: 12px; border: 1px solid #E5E7EB; border-radius: 12px; background: white; color: #111827; font-size: 16px; font-weight: 500; outline: none; transition: all 0.15s; font-family: 'Inter', sans-serif; box-sizing: border-box;"
                                    onfocus="this.style.borderColor='#3B82F6'; this.style.boxShadow='0 0 0 2px rgba(59,130,246,0.2)'"
                                    onblur="this.style.borderColor='#E5E7EB'; this.style.boxShadow='none'">
                            </div>
                        </div>

                        <!-- Password -->
                        <div style="display: flex; flex-direction: column; gap: 8px;">
                            <label for="registerPassword"
                                style="font-size: 14px; font-weight: 600; color: #111827;">Contrasena</label>
                            <div style="position: relative;">
                                <div
                                    style="position: absolute; top: 0; bottom: 0; left: 0; padding-left: 12px; display: flex; align-items: center; pointer-events: none;">
                                    <span class="material-icons" style="color: #9CA3AF; font-size: 22px;">lock</span>
                                </div>
                                <input type="password" id="registerPassword" placeholder="Minimo 8 caracteres" required
                                    minlength="8" oninput="app.validatePassword()"
                                    style="width: 100%; height: 48px; padding-left: 40px; padding-right: 44px; border: 1px solid #E5E7EB; border-radius: 12px; background: white; color: #111827; font-size: 16px; font-weight: 500; outline: none; transition: all 0.15s; font-family: 'Inter', sans-serif; box-sizing: border-box;"
                                    onfocus="this.style.borderColor='#3B82F6'; this.style.boxShadow='0 0 0 2px rgba(59,130,246,0.2)'"
                                    onblur="this.style.borderColor='#E5E7EB'; this.style.boxShadow='none'">
                                <div style="position: absolute; top: 0; bottom: 0; right: 0; padding-right: 12px; display: flex; align-items: center; cursor: pointer;"
                                    onclick="app.togglePassword('registerPassword')">
                                    <span class="material-icons"
                                        style="color: #9CA3AF; font-size: 22px;">visibility</span>
                                </div>
                            </div>
                            <!-- Password Requirements -->
                            <div id="passwordRequirements" style="margin-top: 4px; font-size: 13px;">
                                <div id="reqLength"
                                    style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px; color: #9CA3AF; transition: all 0.3s ease;">
                                    <span style="font-size: 14px;">&#9675;</span>
                                    <span>Minimo 8 caracteres</span>
                                </div>
                                <div id="reqUppercase"
                                    style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px; color: #9CA3AF; transition: all 0.3s ease;">
                                    <span style="font-size: 14px;">&#9675;</span>
                                    <span>Al menos 1 mayuscula (A-Z)</span>
                                </div>
                                <div id="reqSpecial"
                                    style="display: flex; align-items: center; gap: 8px; color: #9CA3AF; transition: all 0.3s ease;">
                                    <span style="font-size: 14px;">&#9675;</span>
                                    <span>Al menos 1 caracter especial (!@#$%&*)</span>
                                </div>
                            </div>
                            <div id="passwordSuccess"
                                style="color: #22C55E; font-size: 14px; margin-top: 4px; display: none; font-weight: 600;">
                                Contrasena segura
                            </div>
                        </div>

                        <!-- Submit -->
                        <div style="padding-top: 16px;">
                            <button type="submit"
                                style="width: 100%; height: 48px; background: #3B82F6; color: white; font-weight: 700; border: none; border-radius: 12px; box-shadow: 0 10px 15px -3px rgba(59,130,246,0.3); cursor: pointer; font-size: 16px; font-family: 'Inter', sans-serif; transition: all 0.15s; display: flex; align-items: center; justify-content: center; gap: 8px;"
                                onmouseover="this.style.background='#2563EB'"
                                onmouseout="this.style.background='#3B82F6'">
                                Continuar
                            </button>
                        </div>
                    </form>

                    <!-- Divider -->
                    <div style="position: relative; padding: 32px 0;">
                        <div style="position: absolute; inset: 0; display: flex; align-items: center;">
                            <div style="width: 100%; border-top: 1px solid #E5E7EB;"></div>
                        </div>
                        <div style="position: relative; display: flex; justify-content: center;">
                            <span
                                style="background: white; padding: 0 12px; font-size: 14px; color: #6B7280; font-weight: 500;">o</span>
                        </div>
                    </div>

                    <!-- Google -->
                    <button type="button" onclick="app.loginWithGoogle()"
                        style="width: 100%; height: 48px; background: white; border: 1px solid #E5E7EB; color: #111827; font-weight: 600; border-radius: 12px; cursor: pointer; font-size: 16px; font-family: 'Inter', sans-serif; transition: all 0.15s; display: flex; align-items: center; justify-content: center; gap: 12px;"
                        onmouseover="this.style.background='#F9FAFB'" onmouseout="this.style.background='white'">
                        <svg style="width: 20px; height: 20px;" viewBox="0 0 24 24">
                            <path
                                d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"
                                fill="#4285F4" />
                            <path
                                d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"
                                fill="#34A853" />
                            <path
                                d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"
                                fill="#FBBC05" />
                            <path
                                d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"
                                fill="#EA4335" />
                        </svg>
                        Continuar con Google
                    </button>
                </div>

                <!-- Footer -->
                <div style="padding: 24px; text-align: center;">
                    <p style="color: #4B5563; font-size: 14px; font-weight: 500; margin: 0;">
                        Ya tienes cuenta?
                        <a onclick="app.showLogin()"
                            style="color: #3B82F6; font-weight: 700; cursor: pointer; text-decoration: none; margin-left: 4px;">Inicia
                            sesion</a>
                    </p>
                </div>
            </div>
        </div>

        <!-- ===== RECOVERY CODE VIEW ===== -->
        <div id="recoveryView" class="view">
            <div
                style="min-height: 100vh; display: flex; flex-direction: column; font-family: 'Inter', sans-serif; background: white;">
                <!-- Header -->
                <div
                    style="display: flex; align-items: center; justify-content: space-between; padding: 16px 16px 8px 16px;">
                    <button onclick="app.showLogin()"
                        style="width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; border: none; background: transparent; cursor: pointer;"
                        onmouseover="this.style.background='#F3F4F6'" onmouseout="this.style.background='transparent'">
                        <span class="material-icons" style="color: #111827; font-size: 24px;">arrow_back</span>
                    </button>
                    <div style="width: 40px;"></div>
                </div>

                <!-- Content -->
                <div style="flex: 1; display: flex; flex-direction: column; padding: 24px;">
                    <!-- Hero -->
                    <div style="margin-bottom: 32px;">
                        <h1
                            style="color: #111827; font-size: 32px; font-weight: 700; line-height: 1.1; letter-spacing: -0.025em; margin: 0 0 12px 0;">
                            Verifica tu identidad</h1>
                        <p style="color: #6B7280; font-size: 16px; font-weight: 500; line-height: 1.6; margin: 0;">
                            Enviamos un codigo a <span id="recoveryEmailDisplay"
                                style="color: #111827; font-weight: 600;">tu correo</span>.<br>Ingresalo abajo para
                            confirmar tu cuenta.
                        </p>
                    </div>

                    <!-- Code Inputs (6 digits for Supabase) -->
                    <div style="display: flex; gap: 12px; margin-bottom: 32px; max-width: 380px;">
                        <input type="text" maxlength="1" inputmode="numeric" class="recovery-code-input" data-index="0"
                            style="width: 52px; height: 60px; text-align: center; border: 2px solid #E5E7EB; border-radius: 12px; font-size: 28px; font-weight: 700; color: #111827; background: #F9FAFB; outline: none; transition: all 0.15s; font-family: 'Inter', sans-serif;"
                            onfocus="this.style.borderColor='#3B82F6'; this.style.background='white'"
                            onblur="if(!this.value) { this.style.borderColor='#E5E7EB'; this.style.background='#F9FAFB'; }"
                            oninput="app.handleRecoveryCodeInput(this, 0)"
                            onkeydown="app.handleRecoveryCodeKeydown(event, 0)">
                        <input type="text" maxlength="1" inputmode="numeric" class="recovery-code-input" data-index="1"
                            style="width: 52px; height: 60px; text-align: center; border: 2px solid #E5E7EB; border-radius: 12px; font-size: 28px; font-weight: 700; color: #111827; background: #F9FAFB; outline: none; transition: all 0.15s; font-family: 'Inter', sans-serif;"
                            onfocus="this.style.borderColor='#3B82F6'; this.style.background='white'"
                            onblur="if(!this.value) { this.style.borderColor='#E5E7EB'; this.style.background='#F9FAFB'; }"
                            oninput="app.handleRecoveryCodeInput(this, 1)"
                            onkeydown="app.handleRecoveryCodeKeydown(event, 1)">
                        <input type="text" maxlength="1" inputmode="numeric" class="recovery-code-input" data-index="2"
                            style="width: 52px; height: 60px; text-align: center; border: 2px solid #E5E7EB; border-radius: 12px; font-size: 28px; font-weight: 700; color: #111827; background: #F9FAFB; outline: none; transition: all 0.15s; font-family: 'Inter', sans-serif;"
                            onfocus="this.style.borderColor='#3B82F6'; this.style.background='white'"
                            onblur="if(!this.value) { this.style.borderColor='#E5E7EB'; this.style.background='#F9FAFB'; }"
                            oninput="app.handleRecoveryCodeInput(this, 2)"
                            onkeydown="app.handleRecoveryCodeKeydown(event, 2)">
                        <input type="text" maxlength="1" inputmode="numeric" class="recovery-code-input" data-index="3"
                            style="width: 52px; height: 60px; text-align: center; border: 2px solid #E5E7EB; border-radius: 12px; font-size: 28px; font-weight: 700; color: #111827; background: #F9FAFB; outline: none; transition: all 0.15s; font-family: 'Inter', sans-serif;"
                            onfocus="this.style.borderColor='#3B82F6'; this.style.background='white'"
                            onblur="if(!this.value) { this.style.borderColor='#E5E7EB'; this.style.background='#F9FAFB'; }"
                            oninput="app.handleRecoveryCodeInput(this, 3)"
                            onkeydown="app.handleRecoveryCodeKeydown(event, 3)">
                        <input type="text" maxlength="1" inputmode="numeric" class="recovery-code-input" data-index="4"
                            style="width: 52px; height: 60px; text-align: center; border: 2px solid #E5E7EB; border-radius: 12px; font-size: 28px; font-weight: 700; color: #111827; background: #F9FAFB; outline: none; transition: all 0.15s; font-family: 'Inter', sans-serif;"
                            onfocus="this.style.borderColor='#3B82F6'; this.style.background='white'"
                            onblur="if(!this.value) { this.style.borderColor='#E5E7EB'; this.style.background='#F9FAFB'; }"
                            oninput="app.handleRecoveryCodeInput(this, 4)"
                            onkeydown="app.handleRecoveryCodeKeydown(event, 4)">
                        <input type="text" maxlength="1" inputmode="numeric" class="recovery-code-input" data-index="5"
                            style="width: 52px; height: 60px; text-align: center; border: 2px solid #E5E7EB; border-radius: 12px; font-size: 28px; font-weight: 700; color: #111827; background: #F9FAFB; outline: none; transition: all 0.15s; font-family: 'Inter', sans-serif;"
                            onfocus="this.style.borderColor='#3B82F6'; this.style.background='white'"
                            onblur="if(!this.value) { this.style.borderColor='#E5E7EB'; this.style.background='#F9FAFB'; }"
                            oninput="app.handleRecoveryCodeInput(this, 5)"
                            onkeydown="app.handleRecoveryCodeKeydown(event, 5)">
                    </div>

                    <!-- Resend -->
                    <div style="margin-bottom: 32px;">
                        <p style="font-size: 14px; font-weight: 500; color: #6B7280; margin: 0;">
                            No recibiste el codigo?
                            <a onclick="app.resendRecoveryCode()"
                                style="color: #3B82F6; font-weight: 700; cursor: pointer; text-decoration: none; margin-left: 4px;">Reenviar
                                codigo</a>
                        </p>
                    </div>

                    <!-- Verify Button -->
                    <div style="margin-top: auto; margin-bottom: 24px;">
                        <button onclick="app.verifyRecoveryCode()"
                            style="width: 100%; height: 56px; background: #3B82F6; color: white; font-size: 18px; font-weight: 700; border: none; border-radius: 12px; box-shadow: 0 10px 15px -3px rgba(59,130,246,0.2); cursor: pointer; transition: all 0.15s; font-family: 'Inter', sans-serif; display: flex; align-items: center; justify-content: center; gap: 8px;"
                            onmouseover="this.style.background='#2563EB'" onmouseout="this.style.background='#3B82F6'">
                            <span>Verificar</span>
                            <span class="material-icons" style="font-size: 20px;">check_circle</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== NEW PASSWORD VIEW ===== -->
        <div id="newPasswordView" class="view">
            <div
                style="min-height: 100vh; display: flex; flex-direction: column; font-family: 'Inter', sans-serif; background: white; position: relative; overflow: hidden;">
                <!-- Decorative blurs -->
                <div
                    style="position: absolute; top: -96px; right: -96px; width: 256px; height: 256px; border-radius: 50%; background: rgba(59,130,246,0.05); filter: blur(48px); pointer-events: none;">
                </div>
                <div
                    style="position: absolute; bottom: -96px; left: -96px; width: 256px; height: 256px; border-radius: 50%; background: rgba(59,130,246,0.05); filter: blur(48px); pointer-events: none;">
                </div>

                <!-- Header -->
                <div
                    style="display: flex; align-items: center; justify-content: space-between; padding: 16px 16px 8px 16px; position: sticky; top: 0; z-index: 10; background: rgba(255,255,255,0.8); backdrop-filter: blur(12px);">
                    <button onclick="app.showView('recoveryView')"
                        style="width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; border: none; background: transparent; cursor: pointer; color: #111827;"
                        onmouseover="this.style.background='rgba(0,0,0,0.05)'"
                        onmouseout="this.style.background='transparent'">
                        <span class="material-icons" style="font-size: 24px;">arrow_back</span>
                    </button>
                    <div style="flex: 1;"></div>
                    <div style="width: 40px;"></div>
                </div>

                <!-- Content -->
                <div style="flex: 1; padding: 16px 24px 32px 24px; display: flex; flex-direction: column;">
                    <!-- Title -->
                    <div style="margin-bottom: 32px;">
                        <h1
                            style="font-size: 30px; font-weight: 800; letter-spacing: -0.025em; color: #111827; margin: 0 0 12px 0;">
                            Crea tu nueva contrasena</h1>
                        <p style="color: #617589; font-size: 16px; font-weight: 500; line-height: 1.6; margin: 0;">
                            Asegurate de que sea segura y facil de recordar.</p>
                    </div>

                    <!-- Form -->
                    <form onsubmit="event.preventDefault(); app.handleSetNewPassword()"
                        style="display: flex; flex-direction: column; gap: 24px; flex: 1;">
                        <!-- New Password -->
                        <div>
                            <label for="newPassword"
                                style="display: block; font-size: 14px; font-weight: 700; color: #111827; margin-bottom: 8px;">Nueva
                                contrasena</label>
                            <div style="position: relative; display: flex; align-items: center;">
                                <input type="password" id="newPassword" placeholder="Introduce tu contrasena" required
                                    minlength="8" oninput="app.validateNewPassword()"
                                    style="width: 100%; height: 56px; padding: 0 48px 0 16px; border: 1px solid #DBE0E6; border-radius: 12px; background: #F9FAFB; color: #111827; font-size: 16px; outline: none; transition: all 0.15s; font-family: 'Inter', sans-serif; box-sizing: border-box; box-shadow: 0 1px 2px rgba(0,0,0,0.05);"
                                    onfocus="this.style.borderColor='#3B82F6'; this.style.boxShadow='0 0 0 1px #3B82F6'"
                                    onblur="this.style.borderColor='#DBE0E6'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'">
                                <div style="position: absolute; right: 0; top: 0; width: 48px; height: 100%; display: flex; align-items: center; justify-content: center; cursor: pointer; color: #617589;"
                                    onclick="app.togglePassword('newPassword')">
                                    <span class="material-icons">visibility_off</span>
                                </div>
                            </div>
                        </div>

                        <!-- Confirm Password -->
                        <div>
                            <label for="confirmNewPassword"
                                style="display: block; font-size: 14px; font-weight: 700; color: #111827; margin-bottom: 8px;">Confirmar
                                contrasena</label>
                            <div style="position: relative; display: flex; align-items: center;">
                                <input type="password" id="confirmNewPassword" placeholder="Repite tu contrasena"
                                    required minlength="8"
                                    style="width: 100%; height: 56px; padding: 0 48px 0 16px; border: 1px solid #DBE0E6; border-radius: 12px; background: #F9FAFB; color: #111827; font-size: 16px; outline: none; transition: all 0.15s; font-family: 'Inter', sans-serif; box-sizing: border-box; box-shadow: 0 1px 2px rgba(0,0,0,0.05);"
                                    onfocus="this.style.borderColor='#3B82F6'; this.style.boxShadow='0 0 0 1px #3B82F6'"
                                    onblur="this.style.borderColor='#DBE0E6'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'">
                                <div style="position: absolute; right: 0; top: 0; width: 48px; height: 100%; display: flex; align-items: center; justify-content: center; cursor: pointer; color: #617589;"
                                    onclick="app.togglePassword('confirmNewPassword')">
                                    <span class="material-icons">visibility_off</span>
                                </div>
                            </div>
                        </div>

                        <!-- Password Requirements -->
                        <div
                            style="border-radius: 12px; background: rgba(239,246,255,0.5); padding: 20px; border: 1px solid rgba(59,130,246,0.1);">
                            <div
                                style="font-size: 14px; font-weight: 700; color: #111827; margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
                                <span class="material-icons" style="color: #3B82F6; font-size: 18px;">shield</span>
                                Requisitos de seguridad
                            </div>
                            <div style="display: flex; flex-direction: column; gap: 10px;">
                                <div id="npReqLength"
                                    style="display: flex; align-items: center; gap: 12px; font-size: 14px; color: #617589; transition: all 0.3s;">
                                    <div
                                        style="width: 20px; height: 20px; border-radius: 50%; background: #E5E7EB; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                        <span class="material-icons"
                                            style="font-size: 14px; color: #9CA3AF;">circle</span>
                                    </div>
                                    <span>Minimo 8 caracteres</span>
                                </div>
                                <div id="npReqNumber"
                                    style="display: flex; align-items: center; gap: 12px; font-size: 14px; color: #617589; transition: all 0.3s;">
                                    <div
                                        style="width: 20px; height: 20px; border-radius: 50%; background: #E5E7EB; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                        <span class="material-icons"
                                            style="font-size: 14px; color: #9CA3AF;">circle</span>
                                    </div>
                                    <span>Incluir un numero</span>
                                </div>
                                <div id="npReqUpper"
                                    style="display: flex; align-items: center; gap: 12px; font-size: 14px; color: #617589; transition: all 0.3s;">
                                    <div
                                        style="width: 20px; height: 20px; border-radius: 50%; background: #E5E7EB; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                        <span class="material-icons"
                                            style="font-size: 14px; color: #9CA3AF;">circle</span>
                                    </div>
                                    <span>Incluir una mayuscula</span>
                                </div>
                                <div id="npReqSpecial"
                                    style="display: flex; align-items: center; gap: 12px; font-size: 14px; color: #617589; transition: all 0.3s;">
                                    <div
                                        style="width: 20px; height: 20px; border-radius: 50%; background: #E5E7EB; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                        <span class="material-icons"
                                            style="font-size: 14px; color: #9CA3AF;">circle</span>
                                    </div>
                                    <span>Incluir un caracter especial</span>
                                </div>
                            </div>
                        </div>

                        <div style="flex: 1;"></div>

                        <!-- Submit -->
                        <div style="padding-top: 16px; padding-bottom: 16px; margin-top: auto;">
                            <button type="submit"
                                style="width: 100%; height: 56px; background: #3B82F6; color: white; font-weight: 700; border: none; border-radius: 12px; box-shadow: 0 10px 15px -3px rgba(59,130,246,0.25); cursor: pointer; font-size: 16px; font-family: 'Inter', sans-serif; transition: all 0.2s; display: flex; align-items: center; justify-content: center;"
                                onmouseover="this.style.background='#2563EB'"
                                onmouseout="this.style.background='#3B82F6'">
                                Restablecer contrasena
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- ===== ONBOARDING STEP 1: PROFILE TYPE ===== -->
        <div id="onboardingStep1" class="view">
            <div
                style="min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; font-family: 'Inter', sans-serif; background: #F8FAFC; position: relative; overflow: hidden;">
                <!-- Decorative gradients -->
                <div
                    style="position: absolute; top: 0; left: 0; width: 100%; height: 256px; background: linear-gradient(to bottom, rgba(99,102,241,0.1), transparent); pointer-events: none;">
                </div>

                <div
                    style="width: 100%; max-width: 448px; padding: 32px 24px; display: flex; flex-direction: column; position: relative; z-index: 10;">
                    <!-- Header with back + progress -->
                    <div
                        style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 32px;">
                        <button onclick="app.logout()"
                            style="padding: 8px; border-radius: 50%; border: none; background: transparent; cursor: pointer; color: #64748B;"
                            onmouseover="this.style.background='#F1F5F9'"
                            onmouseout="this.style.background='transparent'">
                            <span class="material-icons">arrow_back</span>
                        </button>
                        <!-- Progress bar -->
                        <div style="display: flex; align-items: center; gap: 4px; max-width: 120px; width: 100%;">
                            <div style="height: 6px; width: 100%; background: #6366F1; border-radius: 9999px;"></div>
                            <div style="height: 6px; width: 100%; background: #E2E8F0; border-radius: 9999px;"></div>
                            <div style="height: 6px; width: 100%; background: #E2E8F0; border-radius: 9999px;"></div>
                        </div>
                        <div style="width: 40px;"></div>
                    </div>

                    <!-- Title -->
                    <div style="text-align: center; margin-bottom: 40px;">
                        <h1
                            style="font-size: 30px; font-weight: 700; color: #1E293B; margin: 0 0 12px 0; line-height: 1.2;">
                            Hola! <br>Quien eres?</h1>
                        <p style="color: #64748B; font-size: 18px; line-height: 1.6; margin: 0;">
                            Selecciona tu rol para personalizar tu experiencia en <span
                                style="color: #6366F1; font-weight: 600;">Talently</span>.
                        </p>
                    </div>

                    <!-- Role Cards -->
                    <div style="display: flex; flex-direction: column; gap: 20px; flex: 1;">
                        <!-- Candidate Card -->
                        <div class="profile-type-option" onclick="app.selectProfileType('candidate', this)"
                            style="background: white; padding: 24px; border-radius: 16px; border: 2px solid transparent; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); cursor: pointer; transition: all 0.3s; display: flex; align-items: flex-start; gap: 16px; position: relative;"
                            onmouseover="if(!this.classList.contains('selected')) this.style.boxShadow='0 10px 15px -3px rgba(0,0,0,0.1)'"
                            onmouseout="if(!this.classList.contains('selected')) this.style.boxShadow='0 4px 6px -1px rgba(0,0,0,0.05)'">
                            <input type="radio" name="profileType" value="candidate" style="display: none;">
                            <div
                                style="flex-shrink: 0; background: #EFF6FF; padding: 12px; border-radius: 12px; color: #2563EB;">
                                <span class="material-icons" style="font-size: 30px;">person_search</span>
                            </div>
                            <div style="flex: 1;">
                                <h3 style="font-size: 20px; font-weight: 700; color: #1E293B; margin: 0 0 4px 0;">Soy
                                    Candidato</h3>
                                <p style="font-size: 14px; color: #64748B; margin: 0 0 12px 0;">Busco nuevas
                                    oportunidades laborales y quiero conectar con empresas top.</p>
                                <div style="display: flex; flex-direction: column; gap: 6px;">
                                    <div
                                        style="display: flex; align-items: center; gap: 6px; font-size: 12px; color: #64748B;">
                                        <span class="material-icons"
                                            style="font-size: 14px; color: #22C55E;">check_circle</span>
                                        Encuentra ofertas relevantes
                                    </div>
                                    <div
                                        style="display: flex; align-items: center; gap: 6px; font-size: 12px; color: #64748B;">
                                        <span class="material-icons"
                                            style="font-size: 14px; color: #22C55E;">check_circle</span>
                                        Swipe para hacer match
                                    </div>
                                </div>
                            </div>
                            <span class="material-icons role-radio-icon"
                                style="position: absolute; top: 24px; right: 24px; color: #CBD5E1; font-size: 24px;">radio_button_unchecked</span>
                        </div>

                        <!-- Company Card -->
                        <div class="profile-type-option" onclick="app.selectProfileType('company', this)"
                            style="background: white; padding: 24px; border-radius: 16px; border: 2px solid transparent; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); cursor: pointer; transition: all 0.3s; display: flex; align-items: flex-start; gap: 16px; position: relative;"
                            onmouseover="if(!this.classList.contains('selected')) this.style.boxShadow='0 10px 15px -3px rgba(0,0,0,0.1)'"
                            onmouseout="if(!this.classList.contains('selected')) this.style.boxShadow='0 4px 6px -1px rgba(0,0,0,0.05)'">
                            <input type="radio" name="profileType" value="company" style="display: none;">
                            <div
                                style="flex-shrink: 0; background: #F5F3FF; padding: 12px; border-radius: 12px; color: #7C3AED;">
                                <span class="material-icons" style="font-size: 30px;">business</span>
                            </div>
                            <div style="flex: 1;">
                                <h3 style="font-size: 20px; font-weight: 700; color: #1E293B; margin: 0 0 4px 0;">Soy
                                    Empresa</h3>
                                <p style="font-size: 14px; color: #64748B; margin: 0 0 12px 0;">Busco el mejor talento
                                    tecnologico para unirse a mi equipo.</p>
                                <div style="display: flex; flex-direction: column; gap: 6px;">
                                    <div
                                        style="display: flex; align-items: center; gap: 6px; font-size: 12px; color: #64748B;">
                                        <span class="material-icons"
                                            style="font-size: 14px; color: #22C55E;">check_circle</span>
                                        Publica ofertas de empleo
                                    </div>
                                    <div
                                        style="display: flex; align-items: center; gap: 6px; font-size: 12px; color: #64748B;">
                                        <span class="material-icons"
                                            style="font-size: 14px; color: #22C55E;">check_circle</span>
                                        Explora perfiles verificados
                                    </div>
                                </div>
                            </div>
                            <span class="material-icons role-radio-icon"
                                style="position: absolute; top: 24px; right: 24px; color: #CBD5E1; font-size: 24px;">radio_button_unchecked</span>
                        </div>
                    </div>

                    <!-- Continue Button -->
                    <div style="margin-top: 32px; padding-top: 16px;">
                        <button id="continueStep1" onclick="app.continueFromStep1()" disabled
                            style="width: 100%; background: #6366F1; color: white; font-weight: 600; padding: 16px 24px; border-radius: 12px; border: none; box-shadow: 0 10px 15px -3px rgba(99,102,241,0.3); cursor: pointer; font-size: 16px; font-family: 'Inter', sans-serif; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px; opacity: 0.5;"
                            onmouseover="if(!this.disabled) this.style.background='#4F46E5'"
                            onmouseout="this.style.background='#6366F1'">
                            Continuar
                            <span class="material-icons" style="font-size: 14px;">arrow_forward</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== COMPANY ONBOARDING STEP 2: BASIC INFO (Stitch) ===== -->
        <div id="companyStep2" class="view">
            <div
                style="font-family: 'Inter', sans-serif; min-height: 100vh; display: flex; flex-direction: column; background: #fff; color: #111827;">
                <!-- Header -->
                <header
                    style="display: flex; flex-direction: column; padding: 24px 20px 8px; background: #fff; position: sticky; top: 0; z-index: 30;">
                    <div
                        style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px;">
                        <button onclick="app.showView('onboardingStep1')"
                            style="display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; margin-left: -8px; border-radius: 50%; border: none; background: transparent; cursor: pointer; color: #111827;">
                            <span class="material-icons">arrow_back</span>
                        </button>
                        <span style="font-size: 14px; font-weight: 600; color: #6b7280; letter-spacing: 0.5px;">Paso 2
                            de 14</span>
                        <div style="width: 40px;"></div>
                    </div>
                    <div style="width: 100%; height: 6px; background: #f3f4f6; border-radius: 999px; overflow: hidden;">
                        <div
                            style="height: 100%; background: #1392ec; width: 14%; border-radius: 999px; box-shadow: 0 0 8px rgba(19,146,236,0.5);">
                        </div>
                    </div>
                </header>

                <!-- Main -->
                <main style="flex: 1; display: flex; flex-direction: column; padding: 0 20px 128px; overflow-y: auto;">
                    <div style="padding: 24px 0;">
                        <h1
                            style="font-size: 28px; font-weight: 800; line-height: 1.2; letter-spacing: -0.5px; color: #111827; margin: 0 0 12px;">
                            Información básica de la empresa
                        </h1>
                        <p style="font-size: 15px; font-weight: 500; color: #4b5563; line-height: 1.6; margin: 0;">
                            Comencemos con lo esencial para que los candidatos sepan quién eres.
                        </p>
                    </div>

                    <div style="display: flex; flex-direction: column; gap: 24px;">
                        <!-- Company Name -->
                        <label style="display: flex; flex-direction: column; gap: 6px;">
                            <span style="font-size: 14px; font-weight: 700; color: #111827; margin-left: 4px;">Nombre de
                                la empresa</span>
                            <div style="position: relative;">
                                <span class="material-icons"
                                    style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: #9ca3af; font-size: 20px;">business</span>
                                <input type="text" id="companyName" placeholder="Ej: TechCorp" required
                                    style="width: 100%; height: 52px; padding-left: 44px; padding-right: 16px; border-radius: 12px; border: 1px solid #e5e7eb; background: #fff; font-size: 15px; font-family: 'Inter', sans-serif; color: #111827; outline: none; box-sizing: border-box; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05);"
                                    onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 4px rgba(19,146,236,0.1)'; this.previousElementSibling.style.color='#1392ec';"
                                    onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'; this.previousElementSibling.style.color='#9ca3af';">
                            </div>
                        </label>

                        <!-- Sector -->
                        <label style="display: flex; flex-direction: column; gap: 6px;">
                            <span style="font-size: 14px; font-weight: 700; color: #111827; margin-left: 4px;">Sector /
                                Industria</span>
                            <div style="position: relative;">
                                <span class="material-icons"
                                    style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: #9ca3af; font-size: 20px; z-index: 1;">category</span>
                                <select id="companySector" required
                                    style="width: 100%; height: 52px; padding-left: 44px; padding-right: 40px; border-radius: 12px; border: 1px solid #e5e7eb; background: #fff; font-size: 15px; font-family: 'Inter', sans-serif; color: #111827; outline: none; box-sizing: border-box; appearance: none; cursor: pointer; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05);"
                                    onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 4px rgba(19,146,236,0.1)';"
                                    onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)';">
                                    <option value="" disabled selected>Cargando...</option>
                                </select>
                                <span class="material-icons"
                                    style="position: absolute; right: 16px; top: 50%; transform: translateY(-50%); pointer-events: none; color: #9ca3af; font-size: 20px;">expand_more</span>
                            </div>
                        </label>

                        <!-- Website -->
                        <label style="display: flex; flex-direction: column; gap: 6px;">
                            <span style="font-size: 14px; font-weight: 700; color: #111827; margin-left: 4px;">Sitio web
                                (opcional)</span>
                            <div style="position: relative;">
                                <span class="material-icons"
                                    style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: #9ca3af; font-size: 20px;">language</span>
                                <input type="url" id="companyWebsite" placeholder="https://..."
                                    style="width: 100%; height: 52px; padding-left: 44px; padding-right: 16px; border-radius: 12px; border: 1px solid #e5e7eb; background: #fff; font-size: 15px; font-family: 'Inter', sans-serif; color: #111827; outline: none; box-sizing: border-box; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05);"
                                    onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 4px rgba(19,146,236,0.1)'; this.previousElementSibling.style.color='#1392ec';"
                                    onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'; this.previousElementSibling.style.color='#9ca3af';">
                            </div>
                        </label>

                        <!-- Country -->
                        <label style="display: flex; flex-direction: column; gap: 6px;">
                            <span
                                style="font-size: 14px; font-weight: 700; color: #111827; margin-left: 4px;">País</span>
                            <div style="position: relative;">
                                <span class="material-icons"
                                    style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: #9ca3af; font-size: 20px; z-index: 1;">location_on</span>
                                <select id="companyCountry" onchange="app.updateCompanyCities()"
                                    style="width: 100%; height: 52px; padding-left: 44px; padding-right: 40px; border-radius: 12px; border: 1px solid #e5e7eb; background: #fff; font-size: 15px; font-family: 'Inter', sans-serif; color: #111827; outline: none; box-sizing: border-box; appearance: none; cursor: pointer; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05);"
                                    onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 4px rgba(19,146,236,0.1)';"
                                    onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)';">
                                    <option value="">Selecciona un país</option>
                                </select>
                                <span class="material-icons"
                                    style="position: absolute; right: 16px; top: 50%; transform: translateY(-50%); pointer-events: none; color: #9ca3af; font-size: 20px;">expand_more</span>
                            </div>
                        </label>

                        <!-- City -->
                        <label style="display: flex; flex-direction: column; gap: 6px;">
                            <span
                                style="font-size: 14px; font-weight: 700; color: #111827; margin-left: 4px;">Ciudad</span>
                            <div style="position: relative;">
                                <span class="material-icons"
                                    style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: #9ca3af; font-size: 20px; z-index: 1;">apartment</span>
                                <select id="companyCity" disabled
                                    style="width: 100%; height: 52px; padding-left: 44px; padding-right: 40px; border-radius: 12px; border: 1px solid #e5e7eb; background: #fff; font-size: 15px; font-family: 'Inter', sans-serif; color: #111827; outline: none; box-sizing: border-box; appearance: none; cursor: pointer; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05);"
                                    onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 4px rgba(19,146,236,0.1)';"
                                    onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)';">
                                    <option value="">Selecciona un país primero</option>
                                </select>
                                <span class="material-icons"
                                    style="position: absolute; right: 16px; top: 50%; transform: translateY(-50%); pointer-events: none; color: #9ca3af; font-size: 20px;">expand_more</span>
                            </div>
                        </label>
                    </div>
                </main>

                <!-- Footer -->
                <footer
                    style="position: fixed; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); backdrop-filter: blur(12px); border-top: 1px solid #f3f4f6; padding: 16px 20px 32px; z-index: 20;">
                    <button onclick="app.nextCompanyStep(4)"
                        style="width: 100%; background: #1392ec; color: white; font-weight: 700; height: 52px; border-radius: 12px; border: none; cursor: pointer; font-size: 16px; font-family: 'Inter', sans-serif; display: flex; align-items: center; justify-content: center; gap: 8px; box-shadow: 0 4px 15px rgba(19,146,236,0.25); transition: all 0.2s;">
                        Continuar
                        <span class="material-icons" style="font-size: 20px;">arrow_forward</span>
                    </button>
                </footer>
            </div>
        </div>

        <!-- ===== COMPANY ONBOARDING STEP 3: (SKIPPED - Size moved to Step 6) ===== -->
        <div id="companyStep3" class="view">
            <div
                style="min-height: 100vh; background: #fff; font-family: 'Inter', sans-serif; display: flex; flex-direction: column;">
                <!-- Header -->
                <header style="display: flex; align-items: center; padding: 16px 20px; gap: 16px;">
                    <button onclick="app.showView('companyStep2')"
                        style="width: 40px; height: 40px; border-radius: 12px; border: 1px solid #e5e7eb; background: #fff; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05);">
                        <span class="material-icons" style="font-size: 20px; color: #374151;">arrow_back</span>
                    </button>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 4px;">
                        <span style="font-size: 15px; font-weight: 700; color: #111827;">Paso 3 de 14</span>
                        <div
                            style="width: 100%; height: 4px; background: #e5e7eb; border-radius: 99px; overflow: hidden;">
                            <div
                                style="width: 21%; height: 100%; background: linear-gradient(90deg, #1392ec, #0ea5e9); border-radius: 99px; transition: width 0.4s ease;">
                            </div>
                        </div>
                    </div>
                </header>

                <!-- Content -->
                <main style="flex: 1; padding: 24px 20px 160px; overflow-y: auto;">
                    <div style="text-align: center; margin-bottom: 32px;">
                        <div
                            style="width: 56px; height: 56px; border-radius: 16px; background: linear-gradient(135deg, #1392ec, #0ea5e9); display: flex; align-items: center; justify-content: center; margin: 0 auto 16px;">
                            <span class="material-icons" style="font-size: 28px; color: #fff;">groups</span>
                        </div>
                        <h1 style="font-size: 22px; font-weight: 800; color: #111827; margin: 0 0 8px;">Tamaño de la
                            empresa</h1>
                        <p style="font-size: 14px; color: #6b7280; margin: 0;">¿Cuántas personas trabajan en tu equipo?
                        </p>
                    </div>

                    <div style="display: flex; flex-direction: column; gap: 16px;">
                        <label style="display: flex; flex-direction: column; gap: 6px;">
                            <span style="font-size: 14px; font-weight: 700; color: #111827; margin-left: 4px;">Tamaño
                                del equipo</span>
                            <div style="position: relative;">
                                <span class="material-icons"
                                    style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: #9ca3af; font-size: 20px; z-index: 1;">people</span>
                                <select id="companySize" required
                                    style="width: 100%; height: 52px; padding-left: 44px; padding-right: 40px; border-radius: 12px; border: 1px solid #e5e7eb; background: #fff; font-size: 15px; font-family: 'Inter', sans-serif; color: #111827; outline: none; box-sizing: border-box; appearance: none; cursor: pointer; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05);"
                                    onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 4px rgba(19,146,236,0.1)';"
                                    onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)';">
                                    <option value="" disabled selected>Cargando...</option>
                                </select>
                                <span class="material-icons"
                                    style="position: absolute; right: 16px; top: 50%; transform: translateY(-50%); pointer-events: none; color: #9ca3af; font-size: 20px;">expand_more</span>
                            </div>
                        </label>
                    </div>
                </main>

                <!-- Footer -->
                <footer
                    style="position: fixed; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); backdrop-filter: blur(12px); border-top: 1px solid #f3f4f6; padding: 16px 20px 32px; z-index: 20;">
                    <button onclick="app.nextCompanyStep(4)"
                        style="width: 100%; background: #1392ec; color: white; font-weight: 700; height: 52px; border-radius: 12px; border: none; cursor: pointer; font-size: 16px; font-family: 'Inter', sans-serif; display: flex; align-items: center; justify-content: center; gap: 8px; box-shadow: 0 4px 15px rgba(19,146,236,0.25); transition: all 0.2s;">
                        Continuar
                        <span class="material-icons" style="font-size: 20px;">arrow_forward</span>
                    </button>
                </footer>
            </div>
        </div>

        <!-- ===== COMPANY ONBOARDING STEP 4: REMOTE & LOCATIONS ===== -->
        <div id="companyStep4" class="view">
            <div
                style="min-height: 100vh; background: #fff; font-family: 'Inter', sans-serif; display: flex; flex-direction: column;">
                <!-- Header -->
                <header style="display: flex; align-items: center; padding: 16px 20px; gap: 16px;">
                    <button onclick="app.showView('companyStep2')"
                        style="width: 40px; height: 40px; border-radius: 12px; border: 1px solid #e5e7eb; background: #fff; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05);">
                        <span class="material-icons" style="font-size: 20px; color: #374151;">arrow_back</span>
                    </button>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 4px;">
                        <span style="font-size: 15px; font-weight: 700; color: #111827;">Paso 4 de 14</span>
                        <div
                            style="width: 100%; height: 4px; background: #e5e7eb; border-radius: 99px; overflow: hidden;">
                            <div
                                style="width: 28%; height: 100%; background: linear-gradient(90deg, #1392ec, #0ea5e9); border-radius: 99px; transition: width 0.4s ease;">
                            </div>
                        </div>
                    </div>
                </header>

                <!-- Content -->
                <main style="flex: 1; padding: 24px 20px 160px; overflow-y: auto;">
                    <div style="text-align: center; margin-bottom: 32px;">
                        <div
                            style="width: 56px; height: 56px; border-radius: 16px; background: linear-gradient(135deg, #1392ec, #0ea5e9); display: flex; align-items: center; justify-content: center; margin: 0 auto 16px;">
                            <span class="material-icons" style="font-size: 28px; color: #fff;">home_work</span>
                        </div>
                        <h1 style="font-size: 22px; font-weight: 800; color: #111827; margin: 0 0 8px;">Modelo de
                            presencia</h1>
                        <p style="font-size: 14px; color: #6b7280; margin: 0;">¿Cómo opera tu empresa?</p>
                    </div>

                    <div style="display: flex; flex-direction: column; gap: 16px;">
                        <!-- Fully Remote -->
                        <label style="display: flex; flex-direction: column; gap: 6px;">
                            <span style="font-size: 14px; font-weight: 700; color: #111827; margin-left: 4px;">¿Es una
                                empresa 100% remota?</span>
                            <div style="position: relative;">
                                <span class="material-icons"
                                    style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: #9ca3af; font-size: 20px; z-index: 1;">wifi</span>
                                <select id="companyFullyRemote" onchange="app.toggleMultipleLocations()"
                                    style="width: 100%; height: 52px; padding-left: 44px; padding-right: 40px; border-radius: 12px; border: 1px solid #e5e7eb; background: #fff; font-size: 15px; font-family: 'Inter', sans-serif; color: #111827; outline: none; box-sizing: border-box; appearance: none; cursor: pointer; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05);"
                                    onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 4px rgba(19,146,236,0.1)';"
                                    onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)';">
                                    <option value="">Selecciona una opción</option>
                                    <option value="si">Sí, somos 100% remotos</option>
                                    <option value="no">No, tenemos oficinas físicas</option>
                                </select>
                                <span class="material-icons"
                                    style="position: absolute; right: 16px; top: 50%; transform: translateY(-50%); pointer-events: none; color: #9ca3af; font-size: 20px;">expand_more</span>
                            </div>
                        </label>

                        <!-- Multiple Locations (conditional) -->
                        <div id="multipleLocationsGroup" style="display: none;">
                            <label style="display: flex; flex-direction: column; gap: 6px;">
                                <span
                                    style="font-size: 14px; font-weight: 700; color: #111827; margin-left: 4px;">¿Tienen
                                    oficinas en múltiples ciudades?</span>
                                <div style="position: relative;">
                                    <span class="material-icons"
                                        style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: #9ca3af; font-size: 20px; z-index: 1;">location_city</span>
                                    <select id="companyMultipleLocations"
                                        style="width: 100%; height: 52px; padding-left: 44px; padding-right: 40px; border-radius: 12px; border: 1px solid #e5e7eb; background: #fff; font-size: 15px; font-family: 'Inter', sans-serif; color: #111827; outline: none; box-sizing: border-box; appearance: none; cursor: pointer; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05);"
                                        onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 4px rgba(19,146,236,0.1)';"
                                        onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)';">
                                        <option value="no">No, solo una ubicación</option>
                                        <option value="si">Sí, tenemos varias oficinas</option>
                                    </select>
                                    <span class="material-icons"
                                        style="position: absolute; right: 16px; top: 50%; transform: translateY(-50%); pointer-events: none; color: #9ca3af; font-size: 20px;">expand_more</span>
                                </div>
                            </label>
                        </div>
                    </div>
                </main>

                <!-- Footer -->
                <footer
                    style="position: fixed; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); backdrop-filter: blur(12px); border-top: 1px solid #f3f4f6; padding: 16px 20px 32px; z-index: 20;">
                    <div style="display: flex; gap: 12px;">
                        <button onclick="app.nextCompanyStep(5)"
                            style="flex: 1; background: #fff; color: #374151; font-weight: 600; height: 52px; border-radius: 12px; border: 1px solid #e5e7eb; cursor: pointer; font-size: 16px; font-family: 'Inter', sans-serif; transition: all 0.2s;">
                            Omitir
                        </button>
                        <button onclick="app.nextCompanyStep(5)"
                            style="flex: 2; background: #1392ec; color: white; font-weight: 700; height: 52px; border-radius: 12px; border: none; cursor: pointer; font-size: 16px; font-family: 'Inter', sans-serif; display: flex; align-items: center; justify-content: center; gap: 8px; box-shadow: 0 4px 15px rgba(19,146,236,0.25); transition: all 0.2s;">
                            Continuar
                            <span class="material-icons" style="font-size: 20px;">arrow_forward</span>
                        </button>
                    </div>
                </footer>
            </div>
        </div>

        <!-- ===== COMPANY ONBOARDING STEP 5: CULTURE & VALUES ===== -->
        <div id="companyStep5" class="view">
            <div
                style="min-height: 100vh; background: #f8f9fa; font-family: 'Inter', sans-serif; display: flex; flex-direction: column;">
                <!-- Header -->
                <header
                    style="display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; background: #f8f9fa; position: sticky; top: 0; z-index: 10;">
                    <button onclick="app.showView('companyStep4')"
                        style="display: flex; align-items: center; justify-content: center; padding: 8px; margin-left: -8px; border-radius: 50%; border: none; background: transparent; cursor: pointer; color: #64748b;">
                        <span class="material-icons" style="font-size: 24px;">arrow_back</span>
                    </button>
                    <h2
                        style="font-size: 13px; font-weight: 600; letter-spacing: 0.05em; color: #475569; text-transform: uppercase; opacity: 0.8; margin: 0;">
                        Cultura & Valores</h2>
                    <div style="width: 40px;"></div>
                </header>

                <!-- Content -->
                <main style="flex: 1; padding: 0 20px 200px; overflow-y: auto;">
                    <!-- Progress -->
                    <div style="margin-top: 8px; margin-bottom: 24px;">
                        <div
                            style="display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 8px;">
                            <span style="font-size: 14px; font-weight: 500; color: #1392ec;">Paso 5 de 14</span>
                            <span style="font-size: 12px; color: #64748b; font-weight: 500;">35% completado</span>
                        </div>
                        <div
                            style="height: 6px; width: 100%; background: #e2e8f0; border-radius: 99px; overflow: hidden;">
                            <div
                                style="height: 100%; width: 35%; background: #1392ec; border-radius: 99px; transition: width 0.5s ease;">
                            </div>
                        </div>
                    </div>

                    <!-- Title -->
                    <div style="margin-bottom: 32px;">
                        <h1
                            style="font-size: 28px; font-weight: 700; letter-spacing: -0.02em; margin: 0 0 12px; color: #0f172a;">
                            Define tu cultura</h1>
                        <p style="font-size: 15px; color: #64748b; line-height: 1.6; margin: 0;">Ayúdanos a conectar tu
                            empresa con el talento que comparte tus valores y visión.</p>
                    </div>

                    <!-- Mission Textarea -->
                    <div style="margin-bottom: 32px;">
                        <label for="companyMission"
                            style="display: block; font-size: 15px; font-weight: 600; color: #0f172a; margin-bottom: 12px;">Misión
                            de la empresa</label>
                        <div style="position: relative;">
                            <textarea id="companyMission" maxlength="300"
                                placeholder="Describe qué los motiva a crecer, cuál es el impacto que buscan generar en el mundo..."
                                oninput="document.getElementById('missionCharCount').textContent = this.value.length"
                                style="width: 100%; min-height: 140px; background: #fff; border: 1px solid #e2e8f0; border-radius: 12px; padding: 16px; font-size: 15px; font-family: 'Inter', sans-serif; color: #0f172a; outline: none; resize: none; box-sizing: border-box; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05); line-height: 1.6;"
                                onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 3px rgba(19,146,236,0.1)';"
                                onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)';"></textarea>
                            <div
                                style="position: absolute; bottom: 12px; right: 12px; font-size: 12px; color: #94a3b8; font-weight: 500; background: rgba(255,255,255,0.8); padding: 2px 8px; border-radius: 4px; backdrop-filter: blur(4px);">
                                <span id="missionCharCount">0</span>/300
                            </div>
                        </div>
                    </div>

                    <!-- Culture Values -->
                    <div style="margin-bottom: 24px;">
                        <div
                            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <label style="display: block; font-size: 15px; font-weight: 600; color: #0f172a;">Valores
                                principales</label>
                            <span
                                style="font-size: 12px; font-weight: 500; color: #1392ec; background: #eff6ff; padding: 4px 10px; border-radius: 6px;">Selecciona
                                hasta 5</span>
                        </div>
                        <div id="companyCultureContainer" style="display: flex; flex-wrap: wrap; gap: 12px;">
                            <!-- Chips loaded dynamically by loadCompanyCultureValues() -->
                        </div>
                    </div>
                </main>

                <!-- Footer -->
                <footer
                    style="position: fixed; bottom: 0; left: 0; right: 0; background: #f8f9fa; border-top: 1px solid #e2e8f0; padding: 16px 20px 32px; z-index: 20;">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <button onclick="app.showView('companyStep4')"
                            style="flex: 1; padding: 14px 24px; border-radius: 12px; font-weight: 700; color: #475569; background: transparent; border: none; cursor: pointer; font-size: 14px; font-family: 'Inter', sans-serif; transition: all 0.2s;">
                            Atrás
                        </button>
                        <button onclick="app.nextCompanyStep(6)"
                            style="flex: 2; padding: 14px 24px; border-radius: 12px; background: #1392ec; color: #fff; font-weight: 700; border: none; cursor: pointer; font-size: 14px; font-family: 'Inter', sans-serif; box-shadow: 0 4px 15px rgba(19,146,236,0.25); display: flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s;">
                            Continuar
                            <span class="material-icons" style="font-size: 18px;">arrow_forward</span>
                        </button>
                    </div>
                </footer>
            </div>
        </div>

        <!-- ===== COMPANY ONBOARDING STEP 6: COMPANY STAGE ===== -->
        <div id="companyStep6" class="view">
            <div
                style="min-height: 100vh; background: #fff; font-family: 'Inter', sans-serif; display: flex; flex-direction: column;">
                <!-- Header -->
                <header
                    style="position: sticky; top: 0; z-index: 50; display: flex; align-items: center; justify-content: space-between; padding: 16px; background: rgba(255,255,255,0.95); backdrop-filter: blur(12px); border-bottom: 1px solid #f1f5f9;">
                    <button onclick="app.showView('companyStep5')"
                        style="display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; border-radius: 50%; border: none; background: transparent; cursor: pointer; color: #0f172a; transition: background 0.2s;"
                        onmouseover="this.style.background='#f1f5f9'" onmouseout="this.style.background='transparent'">
                        <span class="material-icons" style="font-size: 24px;">arrow_back_ios_new</span>
                    </button>
                    <h2 style="font-size: 15px; font-weight: 700; letter-spacing: -0.01em; color: #0f172a; margin: 0;">
                        Company Profile</h2>
                    <button onclick="app.nextCompanyStep(7)"
                        style="padding: 6px 12px; border-radius: 99px; font-size: 13px; font-weight: 600; color: #64748b; background: transparent; border: none; cursor: pointer; transition: all 0.2s;"
                        onmouseover="this.style.color='#1392ec'; this.style.background='#eff6ff'"
                        onmouseout="this.style.color='#64748b'; this.style.background='transparent'">
                        Omitir
                    </button>
                </header>

                <!-- Content -->
                <main style="flex: 1; padding: 8px 24px 200px;">
                    <!-- Progress -->
                    <div style="margin-top: 16px; margin-bottom: 32px;">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <span
                                style="font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: #64748b;">Paso
                                6 de 14</span>
                            <span
                                style="font-size: 12px; font-weight: 700; color: #1392ec; background: #eff6ff; padding: 2px 8px; border-radius: 99px;">42%</span>
                        </div>
                        <div
                            style="height: 8px; width: 100%; background: #f1f5f9; border-radius: 99px; overflow: hidden;">
                            <div
                                style="height: 100%; width: 42%; background: #1392ec; border-radius: 99px; transition: width 0.5s ease; box-shadow: 0 0 10px rgba(19,146,236,0.5);">
                            </div>
                        </div>
                    </div>

                    <!-- Stage Section -->
                    <div style="margin-bottom: 40px;">
                        <h1
                            style="font-size: 28px; font-weight: 800; margin: 0 0 12px; letter-spacing: -0.02em; color: #0f172a;">
                            Etapa de la empresa</h1>
                        <p style="font-size: 15px; color: #64748b; margin: 0 0 24px; line-height: 1.6;">¿Cuál describe
                            mejor el nivel de madurez de tu organización?</p>
                        <div id="companyStageContainer"
                            style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
                            <!-- Cards loaded dynamically by loadCompanyStages() -->
                        </div>
                    </div>

                    <!-- Size Section -->
                    <div style="margin-bottom: 24px;">
                        <h2
                            style="font-size: 20px; font-weight: 700; margin: 0 0 8px; letter-spacing: -0.01em; color: #0f172a;">
                            Tamaño del equipo</h2>
                        <p style="font-size: 14px; color: #64748b; margin: 0 0 32px;">¿Cuántos empleados tienen
                            actualmente?</p>
                        <div
                            style="background: #fff; padding: 24px; border-radius: 24px; box-shadow: 0 4px 20px rgba(0,0,0,0.05); border: 1px solid #f8fafc;">
                            <div
                                style="display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 32px;">
                                <span
                                    style="font-size: 13px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em;">Total
                                    empleados</span>
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span id="companySizeLabel"
                                        style="font-size: 28px; font-weight: 800; color: #1392ec; letter-spacing: -0.02em;">1
                                        - 10</span>
                                    <span class="material-icons" style="color: #cbd5e1; font-size: 20px;">groups</span>
                                </div>
                            </div>
                            <div
                                style="position: relative; width: 100%; height: 48px; display: flex; align-items: center; padding: 0 4px; box-sizing: border-box;">
                                <!-- Range input (transparent, on top) -->
                                <input type="range" id="companySizeRange" min="1" max="5" step="1" value="1"
                                    oninput="app.updateCompanySizeSlider(this.value)"
                                    style="width: 100%; position: absolute; z-index: 20; opacity: 0; cursor: pointer; height: 100%; margin: 0;">
                                <!-- Track background -->
                                <div
                                    style="width: 100%; height: 4px; background: #f1f5f9; border-radius: 99px; position: absolute; top: 50%; transform: translateY(-50%); z-index: 0;">
                                </div>
                                <!-- Track fill -->
                                <div id="companySizeTrackFill"
                                    style="position: absolute; top: 50%; transform: translateY(-50%); left: 0; height: 4px; background: linear-gradient(90deg, #93c5fd, #1392ec); border-radius: 99px; z-index: 0; pointer-events: none; transition: width 0.1s; width: 0%;">
                                </div>
                                <!-- Thumb indicator -->
                                <div id="companySizeThumb"
                                    style="position: absolute; width: 28px; height: 28px; background: #fff; border: 3px solid #1392ec; border-radius: 50%; box-shadow: 0 4px 10px rgba(19,146,236,0.3); z-index: 10; pointer-events: none; transition: left 0.1s; top: 50%; transform: translateY(-50%); left: 0%;">
                                    <div
                                        style="position: absolute; inset: 0; background: #1392ec; border-radius: 50%; margin: 6px;">
                                    </div>
                                </div>
                                <!-- Tick labels -->
                                <div style="position: absolute; top: 32px; left: 0; width: 100%;">
                                    <div style="position: relative; width: 100%; height: 24px;">
                                        <div id="companySizeTick1"
                                            style="position: absolute; left: 0%; transform: translateX(-50%); display: flex; flex-direction: column; align-items: center;">
                                            <div
                                                style="width: 6px; height: 6px; border-radius: 50%; background: #1392ec; margin-bottom: 8px; box-shadow: 0 0 8px rgba(19,146,236,0.6);">
                                            </div>
                                            <span
                                                style="font-size: 11px; font-weight: 700; color: #1392ec; white-space: nowrap;">1-10</span>
                                        </div>
                                        <div id="companySizeTick2"
                                            style="position: absolute; left: 25%; transform: translateX(-50%); display: flex; flex-direction: column; align-items: center;">
                                            <div
                                                style="width: 4px; height: 4px; border-radius: 50%; background: #cbd5e1; margin-bottom: 8px;">
                                            </div>
                                            <span
                                                style="font-size: 10px; font-weight: 500; color: #94a3b8; white-space: nowrap;">11-50</span>
                                        </div>
                                        <div id="companySizeTick3"
                                            style="position: absolute; left: 50%; transform: translateX(-50%); display: flex; flex-direction: column; align-items: center;">
                                            <div
                                                style="width: 4px; height: 4px; border-radius: 50%; background: #cbd5e1; margin-bottom: 8px;">
                                            </div>
                                            <span
                                                style="font-size: 10px; font-weight: 500; color: #94a3b8; white-space: nowrap;">51-200</span>
                                        </div>
                                        <div id="companySizeTick4"
                                            style="position: absolute; left: 75%; transform: translateX(-50%); display: flex; flex-direction: column; align-items: center;">
                                            <div
                                                style="width: 4px; height: 4px; border-radius: 50%; background: #cbd5e1; margin-bottom: 8px;">
                                            </div>
                                            <span
                                                style="font-size: 10px; font-weight: 500; color: #94a3b8; white-space: nowrap;">201-500</span>
                                        </div>
                                        <div id="companySizeTick5"
                                            style="position: absolute; left: 100%; transform: translateX(-50%); display: flex; flex-direction: column; align-items: center;">
                                            <div
                                                style="width: 4px; height: 4px; border-radius: 50%; background: #cbd5e1; margin-bottom: 8px;">
                                            </div>
                                            <span
                                                style="font-size: 10px; font-weight: 500; color: #94a3b8; white-space: nowrap;">500+</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div style="height: 24px;"></div>
                        </div>
                    </div>
                </main>

                <!-- Footer -->
                <footer
                    style="position: fixed; bottom: 0; left: 0; right: 0; padding: 24px; background: rgba(255,255,255,0.9); backdrop-filter: blur(12px); border-top: 1px solid #f1f5f9; z-index: 40;">
                    <button onclick="app.nextCompanyStep(7)"
                        style="width: 100%; background: #1392ec; color: #fff; font-weight: 700; padding: 16px 24px; border-radius: 12px; border: none; cursor: pointer; font-size: 15px; font-family: 'Inter', sans-serif; box-shadow: 0 10px 30px rgba(19,146,236,0.15); display: flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s;">
                        Continuar
                        <span class="material-icons" style="font-size: 20px;">arrow_forward</span>
                    </button>
                </footer>
            </div>
        </div>

        <!-- ===== COMPANY ONBOARDING STEP 7: WORK MODEL & BENEFITS ===== -->
        <div id="companyStep7" class="view">
            <div
                style="min-height: 100vh; background: #fff; font-family: 'Inter', sans-serif; display: flex; flex-direction: column; max-width: 448px; margin: 0 auto; box-shadow: 0 0 40px rgba(0,0,0,0.08); position: relative;">
                <!-- Header -->
                <div
                    style="position: sticky; top: 0; z-index: 10; background: rgba(255,255,255,0.95); backdrop-filter: blur(12px); border-bottom: 1px solid #f3f4f6;">
                    <div
                        style="display: flex; align-items: center; justify-content: space-between; padding: 16px 16px 8px;">
                        <button onclick="app.showView('companyStep6')"
                            style="display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; border-radius: 50%; border: none; background: transparent; cursor: pointer; color: #111827; transition: background 0.2s;"
                            onmouseover="this.style.background='#f3f4f6'"
                            onmouseout="this.style.background='transparent'">
                            <span class="material-icons" style="font-size: 24px;">arrow_back</span>
                        </button>
                        <div style="display: flex; align-items: center;">
                            <button onclick="app.nextCompanyStep(8)"
                                style="color: #9ca3af; font-size: 13px; font-weight: 700; background: transparent; border: none; cursor: pointer; font-family: 'Inter', sans-serif; transition: color 0.2s;"
                                onmouseover="this.style.color='#1392ec'"
                                onmouseout="this.style.color='#9ca3af'">Omitir</button>
                        </div>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 8px; padding: 0 24px 16px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <p
                                style="color: #6b7280; font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; margin: 0;">
                                Paso 7 de 14</p>
                            <span style="color: #1392ec; font-size: 12px; font-weight: 700;">50%</span>
                        </div>
                        <div
                            style="height: 6px; width: 100%; border-radius: 99px; background: #f3f4f6; overflow: hidden;">
                            <div
                                style="height: 100%; width: 50%; border-radius: 99px; background: #1392ec; transition: width 0.5s ease;">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Content -->
                <main style="flex: 1; padding: 24px 24px 200px; overflow-y: auto; background: #f6f7f9;">
                    <!-- Title -->
                    <div style="margin-bottom: 32px;">
                        <h1
                            style="font-size: 28px; font-weight: 800; color: #111827; margin: 0 0 8px; letter-spacing: -0.02em;">
                            ¿Cómo trabajan?</h1>
                        <p style="font-size: 15px; color: #6b7280; margin: 0; line-height: 1.6;">Selecciona tu modelo de
                            trabajo y destaca los beneficios que hacen especial a tu empresa.</p>
                    </div>

                    <!-- Work Model Section -->
                    <section style="margin-bottom: 32px;">
                        <h2 style="font-size: 17px; font-weight: 700; color: #111827; margin: 0 0 16px;">Modelo de
                            trabajo</h2>
                        <div id="workModelContainer" style="display: flex; flex-direction: column; gap: 12px;">
                            <!-- Cards loaded dynamically by loadWorkModels() -->
                        </div>
                    </section>

                    <!-- Divider -->
                    <div style="height: 1px; background: #e5e7eb; width: 100%; margin-bottom: 32px;"></div>

                    <!-- Benefits Section -->
                    <section style="margin-bottom: 24px;">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                            <h2 style="font-size: 17px; font-weight: 700; color: #111827; margin: 0;">Beneficios
                                destacados</h2>
                        </div>
                        <div id="companyBenefitsContainer" style="display: flex; flex-wrap: wrap; gap: 10px;">
                            <!-- Chips loaded dynamically by loadCompanyBenefitsChips() -->
                        </div>
                    </section>
                </main>

                <!-- Footer -->
                <div
                    style="position: fixed; bottom: 0; left: 0; right: 0; padding: 16px; background: linear-gradient(to top, #fff, rgba(255,255,255,0.95), transparent); max-width: 448px; margin: 0 auto; z-index: 20;">
                    <button onclick="app.nextCompanyStep(8)"
                        style="width: 100%; height: 48px; background: #1392ec; color: #fff; font-weight: 700; border-radius: 8px; border: none; cursor: pointer; font-size: 15px; font-family: 'Inter', sans-serif; box-shadow: 0 4px 15px rgba(19,146,236,0.2); display: flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s;">
                        Continuar
                        <span class="material-icons" style="font-size: 18px;">arrow_forward</span>
                    </button>
                </div>
            </div>
        </div>


        <!-- Settings Modal Dummy (No conflict) -->
        <div class="company-modal-overlay" id="companySettingsModalDummy"
            style="display: none; z-index: 10005; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); align-items: flex-end; justify-content: center;">
            <div class="company-modal"
                style="background: var(--surface); width: 100%; border-radius: 20px 20px 0 0; padding: 24px; box-shadow: 0 -10px 40px rgba(0,0,0,0.2); animation: slideUp 0.3s ease;">
                <div
                    style="width: 40px; height: 4px; background: var(--border); border-radius: 2px; margin: 0 auto 24px auto;">
                </div>
                <h3 style="margin: 0 0 24px 0; font-size: 20px; font-weight: 700; color: var(--text-primary);">
                    Configuración
                </h3>

                <div class="settings-list">
                    <!-- Dark Mode -->
                    <div class="settings-item" onclick="app.toggleDarkMode()">
                        <div class="settings-icon">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                            </svg>
                        </div>
                        <div class="settings-item-content">
                            <div class="settings-item-title">Modo Oscuro</div>
                        </div>
                        <label class="switch" onclick="event.stopPropagation()">
                            <input type="checkbox" id="darkModeToggle" onchange="app.toggleDarkMode()">
                            <span class="slider round"></span>
                        </label>
                    </div>


                    <!-- Logout -->
                    <button type="button" class="settings-item" onclick="app.logout()"
                        style="width: 100%; border: none; background: none; cursor: pointer; text-align: left; padding: 12px; border-radius: 12px; transition: background 0.2s;">
                        <div class="settings-icon" style="background: rgba(255, 107, 157, 0.1);">
                            <svg fill="none" stroke="var(--danger)" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                            </svg>
                        </div>
                        <div class="settings-item-content">
                            <div class="settings-item-title" style="color: var(--danger);">Cerrar Sesión</div>
                        </div>
                    </button>
                </div>

                <button onclick="app.closeSettingsModal()"
                    style="width: 100%; padding: 16px; background: var(--bg); border: none; border-radius: 12px; margin-top: 24px; font-weight: 600; color: var(--text-primary); cursor: pointer;">
                    Cerrar
                </button>
            </div>
        </div>

        <!-- Steps 8-10 continue in next file -->
        <!-- ===== COMPANY ONBOARDING STEP 8: POSITIONS LOOKING FOR (CRITICAL) ===== -->
        <!-- ===== COMPANY ONBOARDING STEP 8: HIRING NEEDS (Positions + Seniority) ===== -->
        <div id="companyStep8" class="view">
            <div
                style="min-height: 100vh; background: #fff; font-family: 'Inter', sans-serif; display: flex; flex-direction: column; max-width: 448px; margin: 0 auto; box-shadow: 0 0 40px rgba(0,0,0,0.08); position: relative;">
                <!-- Header -->
                <header
                    style="position: sticky; top: 0; z-index: 10; display: flex; align-items: center; background: rgba(255,255,255,0.95); backdrop-filter: blur(8px); padding: 16px 16px 8px; justify-content: space-between; border-bottom: 1px solid #f8fafc;">
                    <button onclick="app.showView('companyStep7')"
                        style="display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; border-radius: 50%; border: none; background: transparent; cursor: pointer; color: #0f172a; transition: background 0.2s;"
                        onmouseover="this.style.background='#f1f5f9'" onmouseout="this.style.background='transparent'">
                        <span class="material-icons" style="font-size: 24px;">arrow_back_ios_new</span>
                    </button>
                    <h2
                        style="font-size: 17px; font-weight: 700; color: #0f172a; flex: 1; text-align: center; padding-right: 40px; margin: 0;">
                        Company Onboarding</h2>
                </header>

                <!-- Progress -->
                <div style="display: flex; flex-direction: column; gap: 12px; padding: 16px 24px; background: #fff;">
                    <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                        <p
                            style="color: #64748b; font-size: 12px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; margin: 0;">
                            Paso 8 de 14</p>
                        <span style="color: #1392ec; font-size: 12px; font-weight: 700;">57%</span>
                    </div>
                    <div style="height: 6px; width: 100%; border-radius: 99px; background: #f1f5f9; overflow: hidden;">
                        <div
                            style="height: 100%; width: 57%; border-radius: 99px; background: #1392ec; transition: width 0.5s ease; box-shadow: 0 0 10px rgba(19,146,236,0.3);">
                        </div>
                    </div>
                </div>

                <!-- Content -->
                <main
                    style="flex: 1; padding: 16px 24px 200px; display: flex; flex-direction: column; gap: 32px; background: #fff;">
                    <!-- Title -->
                    <div>
                        <h1
                            style="font-size: 28px; font-weight: 800; color: #0f172a; margin: 0 0 12px; letter-spacing: -0.02em;">
                            Necesidades de contratación</h1>
                        <p style="color: #64748b; font-size: 15px; font-weight: 500; line-height: 1.6; margin: 0;">¿Qué
                            roles estás priorizando? Personalizaremos tus matches de candidatos según estas selecciones.
                        </p>
                    </div>

                    <!-- Departments / Positions -->
                    <section>
                        <div
                            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <h2 style="font-size: 17px; font-weight: 700; color: #0f172a; margin: 0;">Departamentos</h2>
                        </div>
                        <div id="companyPositionsContainer" style="display: flex; flex-wrap: wrap; gap: 12px;">
                            <!-- Chips loaded dynamically by loadCompanyPositionsChips() -->
                        </div>
                    </section>

                    <!-- Divider -->
                    <div style="height: 1px; background: #f1f5f9; width: 100%;"></div>

                    <!-- Target Seniority -->
                    <section>
                        <div
                            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <h2 style="font-size: 17px; font-weight: 700; color: #0f172a; margin: 0;">Seniority objetivo
                            </h2>
                            <span
                                style="font-size: 12px; font-weight: 500; color: #64748b; background: #f1f5f9; padding: 4px 8px; border-radius: 6px;">Múltiple</span>
                        </div>
                        <div id="companySeniorityContainer"
                            style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                            <!-- Cards loaded dynamically by loadSeniorityLevelsCards() -->
                        </div>
                    </section>
                </main>

                <!-- Footer -->
                <footer
                    style="position: fixed; bottom: 0; left: 0; right: 0; padding: 20px; background: linear-gradient(to top, #fff, rgba(255,255,255,0.95), transparent); z-index: 20; max-width: 448px; margin: 0 auto;">
                    <button onclick="app.nextCompanyStep(10)"
                        style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 8px; background: #0f172a; color: #fff; height: 56px; border-radius: 16px; font-size: 16px; font-weight: 700; letter-spacing: 0.02em; border: none; cursor: pointer; font-family: 'Inter', sans-serif; box-shadow: 0 10px 30px rgba(15,23,42,0.1); transition: all 0.2s;">
                        Siguiente
                        <span class="material-icons" style="font-size: 20px;">arrow_forward</span>
                    </button>
                </footer>
            </div>
        </div>

        <!-- ===== COMPANY ONBOARDING STEP 9: (SKIPPED - Seniority moved to Step 8) ===== -->
        <div id="companyStep9" class="view">
            <div style="display: none;"></div>
        </div>

        <!-- ===== COMPANY ONBOARDING STEP 10: TECH STACK (CRITICAL) ===== -->
        <div id="companyStep10" class="view">
            <div class="auth-screen">
                <div class="auth-header">
                    <button class="back-btn" onclick="app.showView('companyStep8')">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <div class="auth-logo">Talently</div>
                </div>

                <div class="auth-content">
                    <div
                        style="width: 56px; height: 56px; border-radius: 50%; background: var(--gradient-primary); color: white; font-size: 24px; font-weight: 700; display: flex; align-items: center; justify-content: center; margin-bottom: 24px;">
                        10</div>
                    <h1 class="auth-title">Stack tecnológico</h1>
                    <p class="auth-subtitle">Selecciona las tecnologías principales (max 20)</p>

                    <div style="margin-top: 24px;">
                        <div id="companyTechStackBubbleContainer"
                            style="display: flex; flex-wrap: wrap; gap: 8px; min-height: 50px; padding: 12px; border: 2px solid var(--border); border-radius: 12px; margin-bottom: 16px;">
                        </div>

                        <div
                            style="font-size: 13px; font-weight: 600; color: var(--text-secondary); margin-bottom: 12px;">
                            Sugerencias:</div>
                        <div id="companyTechStackSuggestionsContainer"
                            style="display: flex; flex-wrap: wrap; gap: 8px;">
                            <!-- Dynamic suggestions rendered by JS -->
                        </div>
                    </div>

                    <div style="display: flex; gap: 12px; margin-top: 32px;">
                        <button class="btn-secondary" onclick="app.nextCompanyStep(12)">Omitir</button>
                        <button class="btn-primary" onclick="app.nextCompanyStep(12)"
                            style="flex: 1;">Continuar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== COMPANY ONBOARDING STEP 11: (SKIPPED - Benefits moved to Step 7) ===== -->
        <div id="companyStep11" class="view">
            <div class="auth-screen">
                <div class="auth-header">
                    <button class="back-btn" onclick="app.showView('companyStep10')">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <div class="auth-logo">Talently</div>
                </div>

                <div class="auth-content" style="max-height: 80vh; overflow-y: auto;">
                    <div
                        style="width: 56px; min-width: 56px; height: 56px; border-radius: 50%; background: var(--gradient-primary); color: white; font-size: 24px; font-weight: 700; display: flex; align-items: center; justify-content: center; margin-bottom: 24px; flex-shrink: 0;">
                        11</div>
                    <h1 class="auth-title">Beneficios que ofrecen</h1>
                    <p class="auth-subtitle">Selecciona todos los que apliquen (sin límite)</p>

                    <div style="margin-top: 32px;">
                        <!-- COMPENSATION CATEGORY -->
                        <div style="margin-bottom: 28px;">
                            <div
                                style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 14px; display: flex; align-items: center; gap: 8px;">
                                <span>💰</span> Compensación
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="bonos-desempeno"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Bonos por desempeño</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="stock-options"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Stock options / Equity</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="bono-bienvenida"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Bono de bienvenida</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="bono-anual"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Bono anual/aguinaldo</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="incrementos"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Incrementos frecuentes</span>
                                </label>
                            </div>
                        </div>

                        <!-- HEALTH CATEGORY -->
                        <div style="margin-bottom: 28px;">
                            <div
                                style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 14px; display: flex; align-items: center; gap: 8px;">
                                <span>🏥</span> Salud y Bienestar
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="seguro-medico"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Seguro médico privado</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="seguro-dental"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Seguro dental</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="seguro-vida"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Seguro de vida</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="salud-mental"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Apoyo salud mental</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="gimnasio"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Gimnasio / Wellness</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="dias-salud"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Días de salud mental</span>
                                </label>
                            </div>
                        </div>

                        <!-- TIME & FLEXIBILITY CATEGORY -->
                        <div style="margin-bottom: 28px;">
                            <div
                                style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 14px; display: flex; align-items: center; gap: 8px;">
                                <span>⏰</span> Tiempo y Flexibilidad
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="vacaciones-extra"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Vacaciones sobre lo legal</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="dia-cumpleanos"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Día libre en cumpleaños</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="flexibilidad"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Flexibilidad horaria</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="viernes-cortos"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Viernes cortos</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="semana-4-dias"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Semana de 4 días</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="unlimited-pto"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Unlimited PTO</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="licencias-parentales"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Licencias parentales extendidas</span>
                                </label>
                            </div>
                        </div>

                        <!-- DEVELOPMENT CATEGORY -->
                        <div style="margin-bottom: 28px;">
                            <div
                                style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 14px; display: flex; align-items: center; gap: 8px;">
                                <span>📚</span> Desarrollo
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="presupuesto-cursos"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Presupuesto para cursos</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="conferencias"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Conferencias pagadas</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="certificaciones"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Certificaciones pagadas</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="mentoring"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Programas de mentoring</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="career-path"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Career path claro</span>
                                </label>
                            </div>
                        </div>

                        <!-- EQUIPMENT CATEGORY -->
                        <div style="margin-bottom: 28px;">
                            <div
                                style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 14px; display: flex; align-items: center; gap: 8px;">
                                <span>🖥️</span> Equipamiento
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="laptop-ultima"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Laptop de última generación</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="setup-home"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Setup para home office</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="upgrade-equipo"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Upgrade de equipo regular</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="software-pagado"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Software y herramientas pagadas</span>
                                </label>
                            </div>
                        </div>

                        <!-- DAY TO DAY CATEGORY -->
                        <div style="margin-bottom: 28px;">
                            <div
                                style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 14px; display: flex; align-items: center; gap: 8px;">
                                <span>🍕</span> Día a día
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="snacks-gratis"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Snacks y bebidas gratis</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="almuerzos"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Almuerzos subsidiados</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="coffee-breakfast"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Coffee & breakfast</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="team-buildings"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Team buildings / Eventos</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="espacios-recreacion"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Espacios de recreación</span>
                                </label>
                            </div>
                        </div>

                        <!-- OTHER CATEGORY -->
                        <div style="margin-bottom: 28px;">
                            <div
                                style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 14px; display: flex; align-items: center; gap: 8px;">
                                <span>🌍</span> Otros
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="remoto-internacional"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Trabajo remoto internacional</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="visa-sponsorship"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Visa sponsorship</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="apoyo-relocacion"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Apoyo para relocación</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="mascotas"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Mascotas en la oficina</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="transporte"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Transporte subsidiado</span>
                                </label>

                                <label
                                    style="padding: 12px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500;"
                                    class="benefit-option" onclick="app.toggleBenefit(this)">
                                    <input type="checkbox" value="estacionamiento"
                                        style="width: 16px; height: 16px; accent-color: var(--primary);">
                                    <span>Estacionamiento gratuito</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div id="benefitsCounter"
                        style="text-align: center; margin-top: 16px; font-size: 14px; color: var(--text-secondary); padding-top: 16px; border-top: 1px solid var(--border);">
                        <span id="benefitsCount" style="color: var(--primary); font-weight: 700;">0</span>
                        beneficios
                        seleccionados
                    </div>

                    <div style="display: flex; gap: 12px; margin-top: 24px; padding-bottom: 24px;">
                        <button class="btn-secondary" onclick="app.nextCompanyStep(12)">Omitir</button>
                        <button class="btn-primary" onclick="app.nextCompanyStep(12)"
                            style="flex: 1;">Continuar</button>
                    </div>
                </div>
            </div>
        </div>


        <!-- ===== COMPANY ONBOARDING STEP 13: SELECTION PROCESS ===== -->
        <!-- ===== COMPANY ONBOARDING STEP 12: SELECTION PROCESS ===== -->
        <div id="companyStep12" class="view">
            <div class="auth-screen">
                <div class="auth-header">
                    <button class="back-btn" onclick="app.showView('companyStep10')">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <div class="auth-logo">Talently</div>
                </div>

                <div class="auth-content">
                    <div
                        style="width: 56px; min-width: 56px; height: 56px; border-radius: 50%; background: var(--gradient-primary); color: white; font-size: 24px; font-weight: 700; display: flex; align-items: center; justify-content: center; margin-bottom: 24px; flex-shrink: 0;">
                        12</div>
                    <h1 class="auth-title">Proceso de selección</h1>
                    <p class="auth-subtitle">Ayuda a los candidatos a saber qué esperar</p>

                    <form style="margin-top: 32px;">
                        <div class="form-group">
                            <label class="form-label">Número de etapas del proceso</label>
                            <select class="form-input" id="selectionStages">
                                <option value="">Selecciona una opción</option>
                                <option value="1">1 etapa (entrevista directa)</option>
                                <option value="2">2 etapas</option>
                                <option value="3">3 etapas</option>
                                <option value="4">4 etapas</option>
                                <option value="5">5 etapas</option>
                                <option value="6">6+ etapas</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Tiempo estimado del proceso completo</label>
                            <select class="form-input" id="selectionTime">
                                <option value="">Selecciona una opción</option>
                                <option value="menos-1-semana">Menos de 1 semana</option>
                                <option value="1-2-semanas">1-2 semanas</option>
                                <option value="2-4-semanas">2-4 semanas</option>
                                <option value="1-2-meses">1-2 meses</option>
                                <option value="mas-2-meses">Más de 2 meses</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">¿Hacen prueba técnica?</label>
                            <select class="form-input" id="technicalTest">
                                <option value="">Selecciona una opción</option>
                                <option value="si">Sí, siempre</option>
                                <option value="no">No</option>
                                <option value="depende">Depende del rol</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">¿La prueba técnica es pagada?</label>
                            <select class="form-input" id="paidTest">
                                <option value="">Selecciona una opción</option>
                                <option value="si">Sí, siempre pagamos</option>
                                <option value="no">No</option>
                                <option value="a-veces">A veces (depende de la duración)</option>
                            </select>
                        </div>
                    </form>

                    <div style="display: flex; gap: 12px; margin-top: 32px;">
                        <button class="btn-secondary" onclick="app.nextCompanyStep(13)">Omitir</button>
                        <button class="btn-primary" onclick="app.nextCompanyStep(13)"
                            style="flex: 1;">Continuar</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- ===== COMPANY ONBOARDING STEP 14: UNIQUE VALUE PROPOSITION (CRITICAL) ===== -->
        <!-- ===== COMPANY ONBOARDING STEP 13: UNIQUE VALUE PROPOSITION ===== -->
        <div id="companyStep13" class="view">
            <div class="auth-screen">
                <div class="auth-header">
                    <button class="back-btn" onclick="app.showView('companyStep12')">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <div class="auth-logo">Talently</div>
                </div>

                <div class="auth-content">
                    <div
                        style="width: 56px; min-width: 56px; height: 56px; border-radius: 50%; background: var(--gradient-primary); color: white; font-size: 24px; font-weight: 700; display: flex; align-items: center; justify-content: center; margin-bottom: 24px; flex-shrink: 0;">
                        13</div>
                    <h1 class="auth-title">¿Qué hace única a tu empresa?</h1>
                    <p class="auth-subtitle">Cuenta qué pueden esperar los candidatos trabajando contigo</p>

                    <form style="margin-top: 32px;">
                        <div class="form-group">
                            <label class="form-label">Propuesta de valor única</label>
                            <textarea class="form-input" id="companyValueProp"
                                placeholder="Ejemplo: Somos una startup en rápido crecimiento con cultura de ownership. Ofrecemos equity a todos, trabajo 100% remoto, y un ambiente donde cada idea cuenta. Nuestro equipo es diverso, colaborativo y siempre está aprendiendo."
                                style="min-height: 150px; resize: vertical; font-family: inherit; line-height: 1.6;"
                                oninput="app.updateCharCount('companyValueProp', 'valueCharCount', 500)"
                                maxlength="500"></textarea>
                            <div
                                style="display: flex; justify-content: space-between; font-size: 13px; margin-top: 6px;">
                                <span style="color: var(--text-secondary);">Recomendado: 100+ caracteres</span>
                                <span id="valueCharCount" style="color: var(--text-secondary);">0 / 500</span>
                            </div>
                        </div>

                        <div
                            style="padding: 16px; background: rgba(108, 92, 231, 0.1); border-left: 4px solid var(--primary); border-radius: 12px; margin-top: 16px;">
                            <div style="font-size: 14px; font-weight: 600; color: var(--primary); margin-bottom: 8px;">
                                💡 Consejos para una buena descripción:
                            </div>
                            <ul
                                style="font-size: 13px; color: var(--text-secondary); line-height: 1.7; margin: 0; padding-left: 20px;">
                                <li>Sé auténtico y específico</li>
                                <li>Menciona lo que te diferencia de otras empresas</li>
                                <li>Habla de la cultura, valores y ambiente</li>
                                <li>Destaca oportunidades de crecimiento</li>
                            </ul>
                        </div>
                    </form>

                    <div style="display: flex; gap: 12px; margin-top: 32px;">
                        <button class="btn-secondary" onclick="app.nextCompanyStep(14)">Omitir</button>
                        <button class="btn-primary" onclick="app.nextCompanyStep(14)" style="flex: 1;"
                            id="continueStep14">Continuar</button>
                    </div>
                    <div style="text-align: center; margin-top: 12px; font-size: 13px; color: var(--text-secondary);">
                        💡 Los perfiles con descripción completa reciben 3x más candidatos
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== COMPANY ONBOARDING STEP 15: COMPANY TAGS (CRITICAL FOR MATCHING) ===== -->
        <!-- ===== COMPANY ONBOARDING STEP 14: COMPANY TAGS ===== -->
        <div id="companyStep14" class="view">
            <div class="auth-screen">
                <div class="auth-header">
                    <button class="back-btn" onclick="app.showView('companyStep13')">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <div class="auth-logo">Talently</div>
                </div>

                <div class="auth-content">
                    <div
                        style="width: 56px; min-width: 56px; height: 56px; border-radius: 50%; background: var(--gradient-primary); color: white; font-size: 24px; font-weight: 700; display: flex; align-items: center; justify-content: center; margin-bottom: 24px; flex-shrink: 0;">
                        14</div>
                    <h1 class="auth-title">Tags de la empresa</h1>
                    <p class="auth-subtitle">Estos tags ayudarán a conectar con candidatos ideales (presiona Enter)
                    </p>

                    <form style="margin-top: 32px;">
                        <div class="form-group">
                            <label class="form-label">Tags (Selecciona los que apliquen)</label>
                            <div class="tag-input-container" id="companyTagsContainer"
                                style="display: flex; flex-wrap: wrap; gap: 8px; padding: 12px; border: 2px solid var(--border); border-radius: 12px; min-height: 100px;">
                                <!-- Tags will be rendered here as removable chips -->
                                <input type="text" id="companyTagInput" placeholder="Añade un tag..."
                                    onkeydown="if(event.key === 'Enter') { event.preventDefault(); app.handleCompanyTagInput(this); }"
                                    style="border: none; outline: none; background: transparent; flex: 1; min-width: 120px; font-size: 14px; padding: 8px;">
                            </div>
                            <div id="companyTagsCounter"
                                style="font-size: 13px; color: var(--text-secondary); margin-top: 6px;">
                                <span id="companyTagsCount" style="color: var(--primary); font-weight: 700;">0</span>/20
                                tags agregados
                            </div>
                        </div>

                        <div style="margin-top: 24px;">
                            <div
                                style="font-size: 14px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px;">
                                💡 Sugerencias para ti:
                            </div>
                            <div id="interestsBubbleSection"></div>
                        </div>

                        <div style="margin-top: 24px;">
                            <div
                                style="font-size: 14px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px;">
                                💡 Sugerencias por categoría:</div>

                            <!-- COMPANY TYPE -->
                            <div style="margin-bottom: 16px;">
                                <div
                                    style="font-size: 13px; font-weight: 600; color: var(--text-secondary); margin-bottom: 8px;">
                                    🏢 Tipo de Empresa</div>
                                <div style="display: flex; flex-wrap: wrap; gap: 6px;" id="companyTypeTags">
                                    <!-- HTML PROBE BUTTON -->
                                    <button class="tag-bubble"
                                        style="padding: 8px 16px; background: var(--surface); color: var(--text-secondary); border: 1px solid var(--border); border-radius: 24px; font-size: 13px; font-weight: 500; cursor: pointer; display: inline-flex; align-items: center;">
                                        🔍 HTML PROBE (CSS CHECK)
                                    </button>
                                </div>
                            </div>



                            <!-- CULTURE -->
                            <div style="margin-bottom: 16px;">
                                <div
                                    style="font-size: 13px; font-weight: 600; color: var(--text-secondary); margin-bottom: 8px;">
                                    💼 Cultura</div>
                                <div style="display: flex; flex-wrap: wrap; gap: 6px;" id="cultureTags"></div>
                            </div>

                            <!-- BUSINESS FOCUS -->
                            <div style="margin-bottom: 16px;">
                                <div
                                    style="font-size: 13px; font-weight: 600; color: var(--text-secondary); margin-bottom: 8px;">
                                    🎯 Foco</div>
                                <div style="display: flex; flex-wrap: wrap; gap: 6px;" id="focusTags"></div>
                            </div>

                            <!-- GROWTH -->
                            <div style="margin-bottom: 16px;">
                                <div
                                    style="font-size: 13px; font-weight: 600; color: var(--text-secondary); margin-bottom: 8px;">
                                    🌱 Crecimiento</div>
                                <div style="display: flex; flex-wrap: wrap; gap: 6px;" id="growthTags"></div>
                            </div>

                            <!-- VALUES -->
                            <div style="margin-bottom: 16px;">
                                <div
                                    style="font-size: 13px; font-weight: 600; color: var(--text-secondary); margin-bottom: 8px;">
                                    🌟 Valores</div>
                                <div style="display: flex; flex-wrap: wrap; gap: 6px;" id="valuesTags"></div>
                            </div>

                            <!-- TECH -->
                            <div style="margin-bottom: 16px;">
                                <div
                                    style="font-size: 13px; font-weight: 600; color: var(--text-secondary); margin-bottom: 8px;">
                                    🛠️ Tech & Metodología</div>
                                <div style="display: flex; flex-wrap: wrap; gap: 6px;" id="techTags"></div>
                            </div>
                        </div>
                    </form>

                    <button class="btn-primary" onclick="app.nextCompanyStep(15)"
                        style="margin-top: 32px;">Continuar</button>
                </div>
            </div>
        </div>

        <!-- ===== COMPANY ONBOARDING STEP 15: COMPANY BRANDING (Logo + Photos) ===== -->
        <div id="companyStep15" class="view">
            <div
                style="min-height: 100vh; background: #fff; font-family: 'Inter', sans-serif; display: flex; flex-direction: column; max-width: 448px; margin: 0 auto; box-shadow: 0 0 40px rgba(0,0,0,0.08); position: relative;">
                <!-- Header -->
                <header
                    style="position: sticky; top: 0; z-index: 10; display: flex; align-items: center; background: rgba(255,255,255,0.95); backdrop-filter: blur(8px); padding: 16px 16px 8px; justify-content: space-between; border-bottom: 1px solid #f8fafc;">
                    <button onclick="app.showView('companyStep14')"
                        style="display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; border-radius: 50%; border: none; background: transparent; cursor: pointer; color: #0f172a; transition: background 0.2s;"
                        onmouseover="this.style.background='#f1f5f9'" onmouseout="this.style.background='transparent'">
                        <span class="material-icons" style="font-size: 24px;">arrow_back_ios_new</span>
                    </button>
                    <h2
                        style="font-size: 17px; font-weight: 700; color: #0f172a; flex: 1; text-align: center; margin: 0;">
                        Company Onboarding</h2>
                    <button onclick="app.completeCompanyOnboarding()"
                        style="display: flex; align-items: center; justify-content: center; padding: 4px 8px; border: none; background: transparent; color: #94a3b8; font-size: 14px; font-weight: 700; cursor: pointer; letter-spacing: 0.02em; transition: color 0.2s; font-family: inherit;"
                        onmouseover="this.style.color='#1392ec'" onmouseout="this.style.color='#94a3b8'">
                        Omitir
                    </button>
                </header>

                <!-- Progress -->
                <div style="display: flex; flex-direction: column; gap: 12px; padding: 16px 24px; background: #fff;">
                    <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                        <p
                            style="color: #64748b; font-size: 12px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; margin: 0;">
                            Paso 15 de 15</p>
                        <span style="color: #1392ec; font-size: 12px; font-weight: 700;">100%</span>
                    </div>
                    <div style="height: 6px; width: 100%; border-radius: 99px; background: #f1f5f9; overflow: hidden;">
                        <div
                            style="height: 100%; width: 100%; border-radius: 99px; background: #1392ec; transition: width 0.5s ease; box-shadow: 0 0 10px rgba(19,146,236,0.3);">
                        </div>
                    </div>
                </div>

                <!-- Content -->
                <main
                    style="flex: 1; padding: 16px 24px 200px; display: flex; flex-direction: column; gap: 24px; background: #fff; overflow-y: auto;">
                    <!-- Title -->
                    <div>
                        <h1
                            style="font-size: 28px; font-weight: 800; color: #0f172a; margin: 0 0 12px; letter-spacing: -0.02em;">
                            Muestra tu <span style="color: #1392ec;">cultura</span></h1>
                        <p style="color: #64748b; font-size: 15px; font-weight: 500; line-height: 1.6; margin: 0;">Sube
                            tu logo y fotos del equipo u oficina. Las empresas con al menos 3 fotos reciben 4x más
                            matches.</p>
                    </div>

                    <!-- Company Logo -->
                    <div
                        style="background: #fff; padding: 20px; border-radius: 20px; border: 1px solid #f1f5f9; box-shadow: 0 4px 20px -2px rgba(0,0,0,0.05);">
                        <h3
                            style="font-size: 17px; font-weight: 700; color: #0f172a; margin: 0 0 16px; display: flex; align-items: center; gap: 8px;">
                            Logo de la empresa
                            <span
                                style="font-size: 11px; font-weight: 500; color: #64748b; background: #f1f5f9; padding: 3px 8px; border-radius: 99px; border: 1px solid #e2e8f0;">Obligatorio</span>
                        </h3>
                        <div style="display: flex; align-items: center; gap: 20px;">
                            <!-- Logo avatar -->
                            <div style="position: relative; cursor: pointer; flex-shrink: 0;"
                                onclick="document.getElementById('companyLogoInput').click()">
                                <div id="logoAvatarPreview"
                                    style="width: 80px; height: 80px; border-radius: 50%; background: #f8fafc; border: 2px dashed #cbd5e1; display: flex; align-items: center; justify-content: center; transition: all 0.2s; overflow: hidden;"
                                    onmouseover="this.style.borderColor='#1392ec'; this.style.background='rgba(19,146,236,0.05)'"
                                    onmouseout="if(!this.querySelector('img')){this.style.borderColor='#cbd5e1'; this.style.background='#f8fafc'}">
                                    <span class="material-icons"
                                        style="font-size: 28px; color: #94a3b8;">add_a_photo</span>
                                </div>
                                <div
                                    style="position: absolute; bottom: -2px; right: -2px; background: #1392ec; color: #fff; width: 24px; height: 24px; border-radius: 50%; border: 2px solid #fff; box-shadow: 0 2px 6px rgba(0,0,0,0.15); display: flex; align-items: center; justify-content: center;">
                                    <span class="material-icons" style="font-size: 12px;">edit</span>
                                </div>
                                <input type="file" id="companyLogoInput" accept="image/png,image/jpeg,image/webp"
                                    style="display: none;" onchange="app.handleCompanyLogoUpload(event)">
                            </div>
                            <!-- Logo text -->
                            <div>
                                <p style="font-size: 14px; font-weight: 700; color: #0f172a; margin: 0 0 4px;">Subir
                                    logo</p>
                                <p
                                    style="font-size: 12px; color: #94a3b8; font-weight: 500; margin: 0; line-height: 1.4;">
                                    PNG, JPG hasta 5MB.<br>Rec: 500x500px</p>
                            </div>
                        </div>
                        <div id="logoPreview"
                            style="display: none; margin-top: 12px; padding: 10px 14px; background: #dcfce7; color: #166534; border-radius: 12px; font-size: 13px; font-weight: 600; display: none;">
                        </div>
                    </div>

                    <!-- Divider -->
                    <div style="height: 1px; background: #f1f5f9; width: 100%;"></div>

                    <!-- Life at Company - Photo Gallery -->
                    <div>
                        <div
                            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <h3 style="font-size: 17px; font-weight: 700; color: #0f172a; margin: 0;">Vida en la empresa
                            </h3>
                        </div>
                        <div id="companyPhotosGallery"
                            style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                            <!-- Photo slots rendered by JS -->
                            <button type="button" onclick="document.getElementById('companyPhotosInput').click()"
                                style="aspect-ratio: 4/3; border-radius: 16px; background: #f8fafc; border: 2px dashed #e2e8f0; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 8px; cursor: pointer; transition: all 0.2s; font-family: inherit;"
                                onmouseover="this.style.borderColor='#1392ec'; this.style.background='rgba(19,146,236,0.03)'"
                                onmouseout="this.style.borderColor='#e2e8f0'; this.style.background='#f8fafc'">
                                <div
                                    style="width: 40px; height: 40px; border-radius: 50%; background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.06); display: flex; align-items: center; justify-content: center; border: 1px solid #f1f5f9;">
                                    <span class="material-icons" style="font-size: 22px; color: #94a3b8;">add</span>
                                </div>
                                <span style="font-size: 12px; font-weight: 700; color: #64748b;">Agregar foto</span>
                            </button>
                            <button type="button" onclick="document.getElementById('companyPhotosInput').click()"
                                style="aspect-ratio: 4/3; border-radius: 16px; background: #f8fafc; border: 2px dashed #e2e8f0; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 8px; cursor: pointer; transition: all 0.2s; font-family: inherit;"
                                onmouseover="this.style.borderColor='#1392ec'; this.style.background='rgba(19,146,236,0.03)'"
                                onmouseout="this.style.borderColor='#e2e8f0'; this.style.background='#f8fafc'">
                                <div
                                    style="width: 40px; height: 40px; border-radius: 50%; background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.06); display: flex; align-items: center; justify-content: center; border: 1px solid #f1f5f9;">
                                    <span class="material-icons" style="font-size: 22px; color: #94a3b8;">add</span>
                                </div>
                                <span style="font-size: 12px; font-weight: 700; color: #64748b;">Agregar foto</span>
                            </button>
                        </div>
                        <input type="file" id="companyPhotosInput" accept="image/png,image/jpeg" multiple
                            style="display: none;" onchange="app.handleCompanyPhotosUpload(event)">
                        <p
                            style="margin: 16px 0 0; font-size: 12px; text-align: center; color: #94a3b8; background: #f8fafc; padding: 8px; border-radius: 8px; border: 1px solid rgba(241,245,249,0.5);">
                            <span style="font-weight: 700; color: #475569;">Tip:</span> Muestra tu espacio, eventos de
                            equipo o beneficios.
                        </p>
                    </div>

                    <!-- Video Pitch Section (9:16 Aspect Ratio) -->
                    <div>
                        <div
                            class="relative aspect-[9/16] w-full overflow-hidden rounded-xl bg-slate-900 shadow-xl group">
                            <!-- Placeholder Thumbnail (later replaced by user video) -->
                            <img id="candidateVideoThumbnail" alt="Candidate Video Pitch"
                                class="h-full w-full object-cover opacity-90"
                                src="https://lh3.googleusercontent.com/aida-public/AB6AXuArUtUEqfr24Wuj8Cbn3zLhyWZQsCkDGCvU7ridW2dyOlFWvwjk1U61L0bUXtZBVQu0_J5c4Q7vuXMiW8F4Vv4h1scJ9i8lTiPoqo5PcY5Fghkk6sYB5TmO9Pxb6zgx8jLPqwfIcY7RVWBO3m7G6LmMqAAvNYDDpf4Wz1BP-RyOkNNfOiuCnz58I9H59o8yh673XKHvuq8imllb6U7Nn5Wx2Axg59ELURb8yR5AB2UV9Lej-cL9Ti9QjcBTARl03jG2qk8LkwDZ04Th" />
                            <video id="candidateVideoPlayer" class="absolute inset-0 w-full h-full object-cover hidden"
                                loop playsinline></video>
                            <!-- Video Controls Overlays -->
                            <div class="absolute inset-0 flex flex-col justify-between p-6 pointer-events-none">
                                <!-- Top Controls -->
                                <div class="flex justify-end pointer-events-auto">
                                    <button onclick="app.toggleVideoMute()"
                                        class="flex h-12 w-12 items-center justify-center rounded-full bg-black/30 text-white backdrop-blur-md">
                                        <span id="videoMuteIcon" class="material-icons">volume_off</span>
                                    </button>
                                </div>
                                <!-- Center Play Button -->
                                <div class="flex items-center justify-center pointer-events-auto">
                                    <button id="videoPlayBtn" onclick="app.toggleVideoPlay()"
                                        class="flex h-20 w-20 items-center justify-center rounded-full bg-white/20 text-white backdrop-blur-xl transition-transform active:scale-90 border border-white/30">
                                        <span class="material-icons text-5xl">play_arrow</span>
                                    </button>
                                </div>
                                <!-- Bottom Info & Progress -->
                                <div class="space-y-4">
                                    <div style="background: linear-gradient(to bottom, rgba(0,0,0,0) 60%, rgba(0,0,0,0.6) 100%);"
                                        class="absolute inset-x-0 bottom-0 h-32 pointer-events-none"></div>
                                    <div class="relative z-10">
                                        <div class="flex items-center gap-2 mb-2">
                                            <span
                                                class="rounded-full bg-[#1392ec] px-3 py-1 text-xs font-bold text-white uppercase tracking-wider">Live
                                                Pitch</span>
                                            <span id="videoTimeDisplay" class="text-white/80 text-xs font-medium">0:00 /
                                                0:30</span>
                                        </div>
                                        <!-- Progress Bar -->
                                        <div class="h-1.5 w-full overflow-hidden rounded-full bg-white/30 pointer-events-auto"
                                            onclick="app.seekVideo(event)" style="cursor: pointer;">
                                            <div id="videoProgressBar"
                                                class="h-full w-0 bg-[#1392ec] rounded-full shadow-[0_0_10px_rgba(19,146,236,0.8)]">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Call to Action Section -->
                    <div class="py-4">
                        <button onclick="document.getElementById('profileVideoInput').click()"
                            class="flex w-full items-center justify-center gap-3 rounded-full bg-gradient-to-r from-[#1392ec] to-[#0e7cd1] px-8 py-4 text-lg font-bold text-white shadow-xl shadow-[#1392ec]/30 transition-all active:scale-[0.98]">
                            <span class="material-icons text-2xl">videocam</span>
                            <span>Subir Video de Presentación</span>
                        </button>
                        <input type="file" id="profileVideoInput" accept="video/mp4,video/webm" style="display: none;"
                            onchange="app.handleVideoUpload(event)">
                    </div>
                </main>

                <!-- Footer -->
                <footer
                    style="position: fixed; bottom: 0; left: 0; right: 0; padding: 20px; background: linear-gradient(to top, #fff, rgba(255,255,255,0.95), transparent); z-index: 20; max-width: 448px; margin: 0 auto;">
                    <button onclick="app.completeCompanyOnboarding()"
                        style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 8px; background: #0f172a; color: #fff; height: 56px; border-radius: 16px; font-size: 16px; font-weight: 700; letter-spacing: 0.02em; border: none; cursor: pointer; font-family: 'Inter', sans-serif; box-shadow: 0 10px 30px rgba(15,23,42,0.1); transition: all 0.2s;">
                        Finalizar
                        <span class="material-icons" style="font-size: 20px;">check_circle</span>
                    </button>
                </footer>
            </div>
        </div>
        <!-- ===== COMPANY ONBOARDING SUCCESS ===== -->
        <div id="companySuccessView" class="view">
            <div
                style="min-height: 100vh; background: #fff; font-family: 'Inter', sans-serif; display: flex; flex-direction: column; max-width: 448px; margin: 0 auto; position: relative; overflow: hidden;">
                <!-- Header -->
                <header
                    style="display: flex; align-items: center; justify-content: center; padding: 16px; z-index: 10;">
                    <div style="display: flex; align-items: center; gap: 8px; opacity: 0.8;">
                        <span class="material-icons" style="font-size: 24px; color: #1392ec;">bolt</span>
                        <span
                            style="font-size: 14px; font-weight: 800; letter-spacing: 0.1em; text-transform: uppercase; color: #0f172a;">Talently</span>
                    </div>
                </header>

                <!-- Main -->
                <main
                    style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 24px; position: relative; z-index: 10;">
                    <!-- Radial gradient background -->
                    <div
                        style="position: absolute; inset: 0; background: radial-gradient(circle at center, rgba(19,146,236,0.08) 0%, rgba(255,255,255,0) 70%); pointer-events: none;">
                    </div>

                    <!-- Floating animated icon -->
                    <div
                        style="position: relative; margin-bottom: 40px; animation: stitch-float 4s ease-in-out infinite;">
                        <div
                            style="width: 192px; height: 192px; border-radius: 50%; background: #eff6ff; display: flex; align-items: center; justify-content: center; position: relative; box-shadow: 0 4px 20px rgba(0,0,0,0.04);">
                            <!-- Decorative rings -->
                            <div
                                style="position: absolute; inset: 0; border-radius: 50%; border: 1px solid #dbeafe; transform: scale(1.1);">
                            </div>
                            <div
                                style="position: absolute; inset: 0; border-radius: 50%; border: 1px dashed #eff6ff; transform: scale(1.25);">
                            </div>
                            <!-- Verified icon card -->
                            <div
                                style="position: relative; background: linear-gradient(135deg, #1392ec, #2563eb); border-radius: 24px; padding: 32px; box-shadow: 0 20px 40px rgba(19,146,236,0.2); transform: rotate(-2deg); transition: transform 0.5s;">
                                <span class="material-icons" style="font-size: 72px; color: #fff;">verified</span>
                            </div>
                            <!-- Decorative dots -->
                            <div
                                style="position: absolute; top: 0; right: 8px; width: 20px; height: 20px; border-radius: 50%; background: #facc15; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
                            </div>
                            <div
                                style="position: absolute; bottom: 24px; left: -8px; width: 16px; height: 16px; border-radius: 50%; background: #4ade80; box-shadow: 0 4px 8px rgba(0,0,0,0.1); opacity: 0.9;">
                            </div>
                            <div style="position: absolute; top: 50%; right: -32px;">
                                <span class="material-icons"
                                    style="font-size: 20px; color: #1392ec; opacity: 0.6;">star</span>
                            </div>
                            <div style="position: absolute; bottom: 0; left: -8px;">
                                <span class="material-icons"
                                    style="font-size: 16px; color: #93c5fd; opacity: 0.6;">circle</span>
                            </div>
                        </div>
                    </div>

                    <!-- Text content -->
                    <div style="text-align: center; max-width: 320px; margin: 0 auto;">
                        <!-- Verified badge -->
                        <div
                            style="display: inline-flex; align-items: center; gap: 8px; padding: 6px 16px; border-radius: 99px; background: #f0fdf4; border: 1px solid #dcfce7; margin-bottom: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
                            <span style="width: 8px; height: 8px; border-radius: 50%; background: #22c55e;"></span>
                            <span
                                style="font-size: 11px; font-weight: 800; color: #15803d; text-transform: uppercase; letter-spacing: 0.05em;">Cuenta
                                verificada</span>
                        </div>

                        <h1
                            style="font-size: 30px; font-weight: 800; letter-spacing: -0.02em; line-height: 1.2; color: #0f172a; margin: 16px 0;">
                            ¡Bienvenido a Talently,
                            <span id="companySuccessName" style="color: #1392ec; display: block; margin-top: 4px;">Tu
                                Empresa!</span>
                        </h1>
                        <p style="color: #64748b; font-size: 16px; line-height: 1.6; font-weight: 500; margin: 0;">
                            Estamos listos para ayudarte a encontrar el talento perfecto para tu equipo.
                        </p>
                    </div>

                    <!-- Company card preview -->
                    <div
                        style="margin-top: 40px; padding: 16px; border-radius: 20px; background: #fff; border: 1px solid #f1f5f9; display: flex; align-items: center; gap: 16px; width: 100%; max-width: 300px; box-shadow: 0 8px 30px rgba(0,0,0,0.04);">
                        <div id="companySuccessLogo"
                            style="width: 48px; height: 48px; border-radius: 12px; background: #f1f5f9; overflow: hidden; flex-shrink: 0; border: 1px solid #f1f5f9; display: flex; align-items: center; justify-content: center;">
                            <span class="material-icons" style="font-size: 24px; color: #94a3b8;">business</span>
                        </div>
                        <div style="display: flex; flex-direction: column; text-align: left;">
                            <span id="companySuccessCardName"
                                style="font-size: 16px; font-weight: 700; color: #0f172a;">Tu Empresa</span>
                            <span id="companySuccessCardLocation"
                                style="font-size: 12px; font-weight: 500; color: #94a3b8;">Ubicación</span>
                        </div>
                        <div style="margin-left: auto; background: #f0fdf4; padding: 6px; border-radius: 50%;">
                            <span class="material-icons"
                                style="font-size: 20px; color: #16a34a; display: block;">check</span>
                        </div>
                    </div>
                </main>

                <!-- Footer -->
                <footer style="padding: 24px 24px 40px; width: 100%; z-index: 20; background: #fff;">
                    <div style="display: flex; flex-direction: column; gap: 16px;">
                        <button onclick="app.goToCompanyDashboard(); app.showCompanySection('companyOffersSection');"
                            style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 8px; background: #1392ec; color: #fff; font-weight: 700; height: 56px; border-radius: 16px; box-shadow: 0 10px 30px rgba(19,146,236,0.25); transition: all 0.2s; border: none; cursor: pointer; font-size: 17px; font-family: 'Inter', sans-serif;"
                            onmouseover="this.style.background='#0e6eb0'" onmouseout="this.style.background='#1392ec'">
                            <span class="material-icons" style="font-size: 22px;">add_circle</span>
                            Crear mi primera oferta
                        </button>
                        <button onclick="app.goToCompanyDashboard()"
                            style="width: 100%; background: transparent; color: #64748b; font-size: 14px; font-weight: 600; height: 40px; border: none; cursor: pointer; transition: color 0.2s; font-family: 'Inter', sans-serif;"
                            onmouseover="this.style.color='#0f172a'" onmouseout="this.style.color='#64748b'">
                            Ir a mi panel de control
                        </button>
                    </div>
                </footer>
            </div>
        </div>

        <!-- ===== ONBOARDING STEP 2: PERSONAL DATA ===== -->
        <div id="onboardingStep2" class="view">
            <div
                style="position: relative; display: flex; height: 100%; min-height: 100vh; width: 100%; max-width: 448px; flex-direction: column; overflow: hidden; background: white; margin: 0 auto;">
                <!-- Header -->
                <div
                    style="display: flex; align-items: center; justify-content: space-between; padding: 16px 16px 8px; background: white; position: sticky; top: 0; z-index: 10;">
                    <button onclick="app.showView('onboardingStep1')"
                        style="display: flex; width: 40px; height: 40px; align-items: center; justify-content: center; border-radius: 50%; border: none; background: transparent; cursor: pointer; color: #1f2937; transition: background 0.2s;"
                        onmouseover="this.style.background='#f5f5f5'" onmouseout="this.style.background='transparent'">
                        <span class="material-icons" style="font-size: 24px;">arrow_back</span>
                    </button>
                    <div style="display: flex; align-items: center; gap: 4px;">
                        <span style="font-size: 14px; font-weight: 600; color: #6b7280;">Paso 2 de 16</span>
                    </div>
                    <button onclick="app.logout()"
                        style="display: flex; width: 40px; height: 40px; align-items: center; justify-content: center; border-radius: 50%; border: none; background: transparent; cursor: pointer; color: #1f2937; transition: background 0.2s;"
                        onmouseover="this.style.background='#f5f5f5'" onmouseout="this.style.background='transparent'">
                        <span class="material-icons" style="font-size: 24px;">close</span>
                    </button>
                </div>

                <!-- Progress bar -->
                <div style="padding: 0 24px 8px;">
                    <div
                        style="height: 6px; width: 100%; border-radius: 9999px; background: #f5f5f5; overflow: hidden;">
                        <div
                            style="height: 100%; background: #1392ec; border-radius: 9999px; transition: all 0.3s; width: 12.5%;">
                        </div>
                    </div>
                </div>

                <!-- Content -->
                <div style="flex: 1; overflow-y: auto; padding: 16px 24px 96px;">
                    <div style="margin-bottom: 32px;">
                        <h1
                            style="color: #111827; font-size: 28px; font-weight: 700; line-height: 1.2; margin: 0 0 8px;">
                            Información Personal</h1>
                        <p style="color: #6b7280; font-size: 16px; font-weight: 500; margin: 0;">Permite que los
                            reclutadores te conozcan.</p>
                    </div>

                    <form style="display: flex; flex-direction: column; gap: 24px;">
                        <!-- Nombre completo -->
                        <div style="display: flex; flex-direction: column; gap: 8px;">
                            <label style="color: #1f2937; font-size: 14px; font-weight: 600; margin-left: 4px;">Nombre
                                completo</label>
                            <div style="position: relative;">
                                <input type="text" id="onboardFullName" placeholder="Ej. María González"
                                    style="width: 100%; border-radius: 12px; border: 1px solid #e5e7eb; background: white; height: 56px; padding: 0 16px; font-size: 16px; color: #111827; outline: none; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05); box-sizing: border-box; font-family: 'Inter', sans-serif;"
                                    onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 1px #1392ec'; this.nextElementSibling.style.opacity='1'"
                                    onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'; this.nextElementSibling.style.opacity='0'">
                                <div
                                    style="position: absolute; right: 16px; top: 50%; transform: translateY(-50%); color: #1392ec; opacity: 0; transition: opacity 0.2s; pointer-events: none;">
                                    <span class="material-icons" style="font-size: 20px;">person</span>
                                </div>
                            </div>
                        </div>

                        <!-- Cargo actual -->
                        <div style="display: flex; flex-direction: column; gap: 8px;">
                            <label style="color: #1f2937; font-size: 14px; font-weight: 600; margin-left: 4px;">Cargo
                                actual o más reciente</label>
                            <div style="position: relative;">
                                <input type="text" id="currentPosition" placeholder="Ej. Diseñador UX/UI"
                                    style="width: 100%; border-radius: 12px; border: 1px solid #e5e7eb; background: white; height: 56px; padding: 0 16px; font-size: 16px; color: #111827; outline: none; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05); box-sizing: border-box; font-family: 'Inter', sans-serif;"
                                    onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 1px #1392ec'; this.nextElementSibling.style.opacity='1'"
                                    onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'; this.nextElementSibling.style.opacity='0'">
                                <div
                                    style="position: absolute; right: 16px; top: 50%; transform: translateY(-50%); color: #1392ec; opacity: 0; transition: opacity 0.2s; pointer-events: none;">
                                    <span class="material-icons" style="font-size: 20px;">work</span>
                                </div>
                            </div>
                        </div>

                        <!-- País y Ciudad -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                            <div style="display: flex; flex-direction: column; gap: 8px;">
                                <label
                                    style="color: #1f2937; font-size: 14px; font-weight: 600; margin-left: 4px;">País</label>
                                <div style="position: relative;">
                                    <select id="country"
                                        style="width: 100%; appearance: none; border-radius: 12px; border: 1px solid #e5e7eb; background: white; height: 56px; padding: 0 40px 0 16px; font-size: 16px; color: #111827; outline: none; transition: all 0.2s; cursor: pointer; box-shadow: 0 1px 2px rgba(0,0,0,0.05); box-sizing: border-box; font-family: 'Inter', sans-serif;"
                                        onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 1px #1392ec'"
                                        onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'"
                                        onchange="app.updateCities()">
                                        <option value="" disabled selected>Seleccionar</option>
                                        <option value="chile">Chile</option>
                                        <option value="argentina">Argentina</option>
                                        <option value="colombia">Colombia</option>
                                        <option value="mexico">México</option>
                                        <option value="peru">Perú</option>
                                        <option value="españa">España</option>
                                    </select>
                                    <div
                                        style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); pointer-events: none; color: #9ca3af;">
                                        <span class="material-icons" style="font-size: 24px;">arrow_drop_down</span>
                                    </div>
                                </div>
                            </div>
                            <div style="display: flex; flex-direction: column; gap: 8px;">
                                <label
                                    style="color: #1f2937; font-size: 14px; font-weight: 600; margin-left: 4px;">Ciudad</label>
                                <div style="position: relative;">
                                    <select id="city"
                                        style="width: 100%; appearance: none; border-radius: 12px; border: 1px solid #e5e7eb; background: white; height: 56px; padding: 0 40px 0 16px; font-size: 16px; color: #111827; outline: none; transition: all 0.2s; cursor: pointer; box-shadow: 0 1px 2px rgba(0,0,0,0.05); box-sizing: border-box; font-family: 'Inter', sans-serif;"
                                        onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 1px #1392ec'"
                                        onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'">
                                        <option value="">Selecciona un país primero</option>
                                    </select>
                                    <div
                                        style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); pointer-events: none; color: #9ca3af;">
                                        <span class="material-icons" style="font-size: 24px;">arrow_drop_down</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Salario esperado -->
                        <div style="display: flex; flex-direction: column; gap: 8px;">
                            <label
                                style="color: #1f2937; font-size: 14px; font-weight: 600; margin-left: 4px;">Pretensión
                                salarial (mensual)</label>
                            <div style="position: relative;">
                                <div
                                    style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: #9ca3af;">
                                    <span class="material-icons" style="font-size: 20px;">attach_money</span>
                                </div>
                                <input type="text" id="expectedSalary" placeholder="2.800.000"
                                    oninput="app.formatCurrency(this)"
                                    style="width: 100%; border-radius: 12px; border: 1px solid #e5e7eb; background: white; height: 56px; padding: 0 60px 0 44px; font-size: 16px; color: #111827; outline: none; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05); box-sizing: border-box; font-family: 'Inter', sans-serif;"
                                    onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 1px #1392ec'"
                                    onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'">
                                <div
                                    style="position: absolute; right: 16px; top: 50%; transform: translateY(-50%); color: #9ca3af; font-size: 14px; font-weight: 500;">
                                    <select id="currency"
                                        style="border: none; background: transparent; color: #6b7280; font-size: 14px; font-weight: 500; cursor: pointer; outline: none; font-family: 'Inter', sans-serif; padding: 0;">
                                        <option value="clp">CLP</option>
                                        <option value="usd">USD</option>
                                        <option value="eur">EUR</option>
                                        <option value="ars">ARS</option>
                                        <option value="cop">COP</option>
                                        <option value="mxn">MXN</option>
                                    </select>
                                </div>
                            </div>
                            <p style="font-size: 12px; color: #6b7280; margin: 0 0 0 4px;">Esto nos ayuda a mostrarte
                                oportunidades relevantes.</p>
                        </div>
                    </form>
                </div>

                <!-- Bottom button -->
                <div
                    style="position: absolute; bottom: 0; left: 0; width: 100%; padding: 16px; background: rgba(255,255,255,0.9); backdrop-filter: blur(12px); border-top: 1px solid #f5f5f5; box-sizing: border-box;">
                    <button onclick="app.nextOnboardingStep(3)"
                        style="width: 100%; height: 56px; background: #1392ec; color: white; border: none; border-radius: 12px; font-size: 18px; font-weight: 700; letter-spacing: 0.025em; cursor: pointer; box-shadow: 0 10px 15px -3px rgba(19,146,236,0.2); transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px; font-family: 'Inter', sans-serif;"
                        onmouseover="this.style.background='#1178c9'" onmouseout="this.style.background='#1392ec'"
                        onmousedown="this.style.transform='scale(0.98)'" onmouseup="this.style.transform='scale(1)'">
                        Continuar
                        <span class="material-icons" style="font-size: 20px;">arrow_forward</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- ===== ONBOARDING STEP 3: WORK MODALITY (Stitch) ===== -->
        <div id="onboardingStep3" class="view">
            <div
                style="position: relative; display: flex; height: 100%; min-height: 100vh; width: 100%; max-width: 448px; flex-direction: column; overflow: hidden; background: #f3f4f6; margin: 0 auto;">
                <!-- Header -->
                <div style="display: flex; flex-direction: column; gap: 16px; padding: 24px 24px 0; padding-top: 40px;">
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <button onclick="app.showView('onboardingStep2')"
                            style="color: #6b7280; border: none; background: transparent; cursor: pointer; padding: 0; transition: color 0.2s;"
                            onmouseover="this.style.color='#1392ec'" onmouseout="this.style.color='#6b7280'">
                            <span class="material-icons" style="font-size: 28px;">arrow_back</span>
                        </button>
                        <div style="font-size: 14px; font-weight: 600; color: #6b7280;">Paso 3 de 16</div>
                        <div style="width: 28px;"></div>
                    </div>
                    <div
                        style="height: 6px; width: 100%; background: #e5e7eb; border-radius: 9999px; overflow: hidden;">
                        <div
                            style="height: 100%; background: #1392ec; border-radius: 9999px; transition: all 0.5s ease-out; width: 18.75%;">
                        </div>
                    </div>
                </div>

                <!-- Content -->
                <div
                    style="flex: 1; display: flex; flex-direction: column; padding: 0 24px; overflow-y: auto; padding-bottom: 96px;">
                    <div style="margin-bottom: 32px; margin-top: 24px;">
                        <h1
                            style="font-size: 30px; font-weight: 800; letter-spacing: -0.025em; line-height: 1.2; color: #111827; margin: 0 0 12px;">
                            ¿Cómo prefieres trabajar?</h1>
                        <p style="font-size: 16px; color: #6b7280; font-weight: 500; line-height: 1.6; margin: 0;">
                            Selecciona la modalidad de trabajo que mejor se adapta a tu estilo de vida.</p>
                    </div>

                    <div style="display: flex; flex-direction: column; gap: 16px;">
                        <!-- Remoto -->
                        <label class="modality-option" onclick="app.selectWorkModality('remoto', this)"
                            style="display: flex; align-items: center; justify-content: space-between; padding: 20px; border-radius: 12px; border: 2px solid #1392ec; background: white; cursor: pointer; transition: all 0.2s; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05), 0 2px 4px -1px rgba(0,0,0,0.03);">
                            <input type="radio" name="workModality" value="remoto" checked style="display: none;">
                            <div style="display: flex; align-items: center; gap: 16px;">
                                <div
                                    style="width: 48px; height: 48px; border-radius: 8px; background: #1392ec; color: white; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 6px -1px rgba(19,146,236,0.3);">
                                    <span class="material-icons" style="font-size: 28px;">public</span>
                                </div>
                                <div style="display: flex; flex-direction: column;">
                                    <span style="font-size: 18px; font-weight: 700; color: #111827;">Remoto</span>
                                    <span style="font-size: 14px; color: #6b7280;">100% desde casa</span>
                                </div>
                            </div>
                            <div class="modality-check"
                                style="width: 24px; height: 24px; border-radius: 50%; border: 2px solid #1392ec; display: flex; align-items: center; justify-content: center; background: #1392ec; color: white; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05);">
                                <span class="material-icons" style="font-size: 16px; font-weight: 700;">check</span>
                            </div>
                        </label>

                        <!-- Híbrido -->
                        <label class="modality-option" onclick="app.selectWorkModality('hibrido', this)"
                            style="display: flex; align-items: center; justify-content: space-between; padding: 20px; border-radius: 12px; border: 1px solid transparent; background: white; cursor: pointer; transition: all 0.2s; box-shadow: 0 2px 8px -2px rgba(0,0,0,0.05), 0 2px 4px -2px rgba(0,0,0,0.03);">
                            <input type="radio" name="workModality" value="hibrido" style="display: none;">
                            <div style="display: flex; align-items: center; gap: 16px;">
                                <div class="modality-icon"
                                    style="width: 48px; height: 48px; border-radius: 8px; background: #f3f4f6; color: #6b7280; display: flex; align-items: center; justify-content: center; transition: all 0.2s;">
                                    <span class="material-icons" style="font-size: 28px;">domain_add</span>
                                </div>
                                <div style="display: flex; flex-direction: column;">
                                    <span style="font-size: 18px; font-weight: 700; color: #111827;">Híbrido</span>
                                    <span style="font-size: 14px; color: #6b7280;">Oficina y casa</span>
                                </div>
                            </div>
                            <div class="modality-check"
                                style="width: 24px; height: 24px; border-radius: 50%; border: 2px solid #d1d5db; display: flex; align-items: center; justify-content: center; background: transparent; color: transparent; transition: all 0.2s;">
                                <span class="material-icons" style="font-size: 16px;">check</span>
                            </div>
                        </label>

                        <!-- Presencial -->
                        <label class="modality-option" onclick="app.selectWorkModality('presencial', this)"
                            style="display: flex; align-items: center; justify-content: space-between; padding: 20px; border-radius: 12px; border: 1px solid transparent; background: white; cursor: pointer; transition: all 0.2s; box-shadow: 0 2px 8px -2px rgba(0,0,0,0.05), 0 2px 4px -2px rgba(0,0,0,0.03);">
                            <input type="radio" name="workModality" value="presencial" style="display: none;">
                            <div style="display: flex; align-items: center; gap: 16px;">
                                <div class="modality-icon"
                                    style="width: 48px; height: 48px; border-radius: 8px; background: #f3f4f6; color: #6b7280; display: flex; align-items: center; justify-content: center; transition: all 0.2s;">
                                    <span class="material-icons" style="font-size: 28px;">apartment</span>
                                </div>
                                <div style="display: flex; flex-direction: column;">
                                    <span style="font-size: 18px; font-weight: 700; color: #111827;">Presencial</span>
                                    <span style="font-size: 14px; color: #6b7280;">Ir a la oficina</span>
                                </div>
                            </div>
                            <div class="modality-check"
                                style="width: 24px; height: 24px; border-radius: 50%; border: 2px solid #d1d5db; display: flex; align-items: center; justify-content: center; background: transparent; color: transparent; transition: all 0.2s;">
                                <span class="material-icons" style="font-size: 16px;">check</span>
                            </div>
                        </label>
                    </div>

                    <!-- Decorative illustration -->
                    <div
                        style="margin-top: 32px; border-radius: 12px; overflow: hidden; height: 120px; position: relative; opacity: 0.9;">
                        <div
                            style="position: absolute; inset: 0; background: linear-gradient(135deg, rgba(19,146,236,0.08) 0%, rgba(139,92,246,0.08) 50%, rgba(236,72,153,0.06) 100%); z-index: 1;">
                        </div>
                        <div
                            style="position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; gap: 24px; z-index: 2;">
                            <div
                                style="display: flex; flex-direction: column; align-items: center; gap: 4px; opacity: 0.5;">
                                <span class="material-icons" style="font-size: 36px; color: #1392ec;">laptop_mac</span>
                                <span style="font-size: 11px; color: #6b7280; font-weight: 500;">Remoto</span>
                            </div>
                            <div style="width: 1px; height: 40px; background: #e5e7eb;"></div>
                            <div
                                style="display: flex; flex-direction: column; align-items: center; gap: 4px; opacity: 0.5;">
                                <span class="material-icons" style="font-size: 36px; color: #8b5cf6;">sync_alt</span>
                                <span style="font-size: 11px; color: #6b7280; font-weight: 500;">Híbrido</span>
                            </div>
                            <div style="width: 1px; height: 40px; background: #e5e7eb;"></div>
                            <div
                                style="display: flex; flex-direction: column; align-items: center; gap: 4px; opacity: 0.5;">
                                <span class="material-icons" style="font-size: 36px; color: #ec4899;">business</span>
                                <span style="font-size: 11px; color: #6b7280; font-weight: 500;">Oficina</span>
                            </div>
                        </div>
                        <div
                            style="position: absolute; bottom: -20px; left: -20px; width: 80px; height: 80px; border-radius: 50%; background: rgba(19,146,236,0.06);">
                        </div>
                        <div
                            style="position: absolute; top: -10px; right: -10px; width: 60px; height: 60px; border-radius: 50%; background: rgba(139,92,246,0.06);">
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <div
                    style="position: absolute; bottom: 0; width: 100%; background: rgba(243,244,246,0.95); backdrop-filter: blur(12px); border-top: 1px solid #e5e7eb; padding: 24px; padding-bottom: 32px; z-index: 20; box-sizing: border-box;">
                    <div style="display: flex; gap: 16px;">
                        <button onclick="app.showView('onboardingStep2')"
                            style="flex: 1; padding: 16px 24px; border-radius: 12px; background: white; border: 1px solid #e5e7eb; color: #374151; font-weight: 700; font-size: 16px; cursor: pointer; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05); font-family: 'Inter', sans-serif;"
                            onmouseover="this.style.background='#f9fafb'; this.style.color='#111827'"
                            onmouseout="this.style.background='white'; this.style.color='#374151'">
                            Atrás
                        </button>
                        <button onclick="app.nextOnboardingStep(4)"
                            style="flex: 2; padding: 16px 24px; border-radius: 12px; background: #1392ec; color: white; font-weight: 700; font-size: 16px; border: none; cursor: pointer; box-shadow: 0 10px 15px -3px rgba(19,146,236,0.3); transition: all 0.2s; font-family: 'Inter', sans-serif;"
                            onmouseover="this.style.background='#0b6cb3'; this.style.transform='translateY(-2px)'"
                            onmouseout="this.style.background='#1392ec'; this.style.transform='translateY(0)'"
                            onmousedown="this.style.transform='translateY(0)'"
                            onmouseup="this.style.transform='translateY(-2px)'">
                            Continuar
                        </button>
                    </div>
                </div>
            </div>
        </div>



        <!-- ===== ONBOARDING STEP 4: FIND YOUR FIELD (Stitch) ===== -->
        <div id="onboardingStep4" class="view">
            <div
                style="position: relative; display: flex; height: 100%; min-height: 100vh; width: 100%; max-width: 448px; flex-direction: column; overflow: hidden; background: #f8f9fa; margin: 0 auto; font-family: 'Inter', sans-serif; color: #0f172a;">
                <!-- Header -->
                <div
                    style="display: flex; align-items: center; justify-content: space-between; padding: 24px 16px 8px;">
                    <button onclick="app.showView('onboardingStep3')"
                        style="display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; border-radius: 50%; border: none; background: transparent; color: #64748b; cursor: pointer; transition: all 0.2s;"
                        onmouseover="this.style.color='#0f172a'; this.style.background='white'"
                        onmouseout="this.style.color='#64748b'; this.style.background='transparent'">
                        <span class="material-icons" style="font-size: 24px;">arrow_back_ios_new</span>
                    </button>
                    <button onclick="app.nextOnboardingStep(5)"
                        style="font-size: 14px; font-weight: 500; color: #94a3b8; border: none; background: transparent; cursor: pointer; transition: color 0.2s;"
                        onmouseover="this.style.color='#1392ec'" onmouseout="this.style.color='#94a3b8'">Omitir</button>
                </div>

                <!-- Progress -->
                <div style="padding: 0 24px 8px;">
                    <div
                        style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                        <span
                            style="font-size: 12px; font-weight: 600; color: #1392ec; text-transform: uppercase; letter-spacing: 0.05em;">Paso
                            4 de 16</span>
                        <span style="font-size: 12px; color: #64748b; font-weight: 500;">25%</span>
                    </div>
                    <div
                        style="width: 100%; background: #e2e8f0; border-radius: 9999px; height: 6px; overflow: hidden;">
                        <div style="background: #1392ec; height: 6px; border-radius: 9999px; width: 25%;"></div>
                    </div>
                </div>

                <!-- Content -->
                <div
                    style="flex: 1; padding: 0 24px; padding-bottom: 128px; display: flex; flex-direction: column; overflow-y: auto;">
                    <div style="margin-top: 16px; margin-bottom: 24px;">
                        <h1
                            style="color: #0f172a; font-size: 32px; font-weight: 800; line-height: 1.2; margin: 0 0 12px;">
                            Encuentra tu campo.</h1>
                        <p style="color: #64748b; font-size: 16px; font-weight: 400; line-height: 1.6; margin: 0;">
                            Selecciona las industrias o roles con los que quieres hacer match. Elige todos los que
                            quieras.</p>
                    </div>

                    <!-- Search -->
                    <div
                        style="position: sticky; top: 0; z-index: 10; background: #f8f9fa; padding-bottom: 16px; padding-top: 8px;">
                        <div style="position: relative;">
                            <div
                                style="position: absolute; top: 50%; left: 16px; transform: translateY(-50%); pointer-events: none;">
                                <span class="material-icons" style="font-size: 24px; color: #94a3b8;"
                                    id="fieldSearchIcon">search</span>
                            </div>
                            <input type="text" id="fieldSearchInput" oninput="app.filterFieldTags(this.value)"
                                onfocus="document.getElementById('fieldSearchIcon').style.color='#1392ec'"
                                onblur="document.getElementById('fieldSearchIcon').style.color='#94a3b8'"
                                placeholder="Buscar roles (ej. Product Manager)"
                                style="display: block; width: 100%; padding: 16px 16px 16px 48px; background: white; border: 1px solid transparent; border-radius: 12px; font-size: 16px; color: #0f172a; outline: none; box-shadow: 0 1px 2px rgba(0,0,0,0.05); transition: all 0.2s; box-sizing: border-box; font-family: 'Inter', sans-serif;" />
                        </div>
                    </div>

                    <!-- Tags container -->
                    <div id="fieldTagsContainer" style="display: flex; flex-direction: column; gap: 24px;">
                        <!-- Roles Populares -->
                        <div>
                            <h3
                                style="font-size: 12px; font-weight: 700; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.1em; margin: 0 0 12px 4px;">
                                Roles Populares</h3>
                            <div style="display: flex; flex-wrap: wrap; gap: 12px;" id="fieldRolesContainer">
                                <!-- JS will populate this -->
                            </div>
                        </div>

                        <!-- Industrias -->
                        <div>
                            <h3
                                style="font-size: 12px; font-weight: 700; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.1em; margin: 0 0 12px 4px;">
                                Industrias</h3>
                            <div style="display: flex; flex-wrap: wrap; gap: 12px;" id="fieldIndustriesContainer">
                                <!-- JS will populate this -->
                            </div>
                        </div>
                    </div>

                    <!-- Selected count -->
                    <div id="fieldSelectedCount"
                        style="margin-top: 16px; padding: 4px; font-size: 13px; color: #64748b; display: none;">
                        <span id="fieldCountNum" style="color: #1392ec; font-weight: 700;">0</span> seleccionados
                    </div>
                </div>

                <!-- Bottom button -->
                <div
                    style="position: fixed; bottom: 0; left: 0; right: 0; padding: 24px; padding-bottom: 32px; background: linear-gradient(to top, #f8f9fa 70%, transparent); z-index: 20;">
                    <button onclick="app.nextOnboardingStep(5)"
                        style="width: 100%; background: #1392ec; color: white; font-weight: 700; height: 56px; border: none; border-radius: 8px; font-size: 18px; cursor: pointer; box-shadow: 0 10px 15px -3px rgba(19,146,236,0.3); transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px; font-family: 'Inter', sans-serif;"
                        onmouseover="this.style.background='#0b6cb3'" onmouseout="this.style.background='#1392ec'"
                        onmousedown="this.style.transform='scale(0.98)'" onmouseup="this.style.transform='scale(1)'">
                        Siguiente paso
                        <span class="material-icons">arrow_forward</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- ===== ONBOARDING STEP 5: CURRENT POSITION ===== -->
        <div id="onboardingStep5" class="view">
            <div class="auth-screen">
                <div class="auth-header">
                    <button class="back-btn" onclick="app.showView('onboardingStep4')">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <div class="auth-logo">Talently</div>
                </div>

                <div class="auth-content">
                    <div
                        style="width: 56px; height: 56px; border-radius: 50%; background: var(--gradient-primary); color: white; font-size: 24px; font-weight: 700; display: flex; align-items: center; justify-content: center; margin-bottom: 24px;">
                        5</div>
                    <h1 class="auth-title">Experiencia laboral</h1>
                    <!-- Campos movidos al Step 8 (nuevo diseño Stitch - Work Experience Timeline) -->
                    <p class="auth-subtitle" style="margin-top: 24px;">Este campo se completa en el paso 8.</p>

                    <div style="display: flex; gap: 12px; margin-top: 32px;">
                        <button class="btn-primary" onclick="app.nextOnboardingStep(6)"
                            style="flex: 1;">Continuar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== ONBOARDING STEP 6: EDUCATION HISTORY (Stitch) ===== -->
        <div id="onboardingStep6" class="view">
            <div
                style="position: relative; display: flex; height: 100%; min-height: 100vh; width: 100%; max-width: 448px; flex-direction: column; overflow: hidden; background: #f8fafc; margin: 0 auto; font-family: 'Inter', sans-serif; color: #0f172a;">
                <!-- Header -->
                <div
                    style="display: flex; align-items: center; justify-content: space-between; padding: 16px; background: #f8fafc; z-index: 10;">
                    <button onclick="app.showView('onboardingStep5')"
                        style="display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; border-radius: 50%; border: none; background: transparent; color: #0f172a; cursor: pointer; transition: background 0.2s;"
                        onmouseover="this.style.background='#e2e8f0'" onmouseout="this.style.background='transparent'">
                        <span class="material-icons">arrow_back</span>
                    </button>
                    <div style="display: flex; flex-direction: column; align-items: center;">
                        <span
                            style="font-size: 12px; font-weight: 700; color: #64748b; letter-spacing: 0.1em; text-transform: uppercase;">Paso
                            6 de 16</span>
                    </div>
                    <button onclick="app.nextOnboardingStep(7)"
                        style="font-size: 14px; font-weight: 700; color: #64748b; border: none; background: transparent; cursor: pointer; padding: 0 8px; transition: color 0.2s;"
                        onmouseover="this.style.color='#1392ec'" onmouseout="this.style.color='#64748b'">Omitir</button>
                </div>

                <!-- Progress -->
                <div style="padding: 0 24px 8px;">
                    <div
                        style="height: 6px; width: 100%; background: #e2e8f0; border-radius: 9999px; overflow: hidden;">
                        <div
                            style="height: 100%; background: #1392ec; width: 37.5%; border-radius: 9999px; box-shadow: 0 0 10px rgba(19,146,236,0.3);">
                        </div>
                    </div>
                </div>

                <!-- Content -->
                <div
                    style="flex: 1; display: flex; flex-direction: column; overflow-y: auto; padding: 24px; padding-bottom: 128px;">
                    <div style="margin-bottom: 32px;">
                        <h1
                            style="font-size: 30px; font-weight: 800; color: #0f172a; margin: 0 0 12px; line-height: 1.2;">
                            ¿Dónde <span style="color: #1392ec;">estudiaste?</span></h1>
                        <p style="color: #64748b; font-size: 16px; line-height: 1.6; margin: 0;">Agrega tus títulos
                            relevantes para que los reclutadores conozcan tu formación.</p>
                    </div>

                    <!-- Education entries list -->
                    <div id="educationEntriesList" style="display: flex; flex-direction: column; gap: 16px;">
                        <!-- JS renders entries here -->
                    </div>

                    <!-- Add button -->
                    <button onclick="app.showEducationForm()" id="addEducationBtn"
                        style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 8px; padding: 20px; border: 1px dashed #cbd5e1; border-radius: 16px; color: #64748b; background: white; cursor: pointer; transition: all 0.2s; margin-top: 16px; font-family: 'Inter', sans-serif;"
                        onmouseover="this.style.borderColor='#1392ec'; this.style.color='#1392ec'; this.style.background='rgba(19,146,236,0.03)'"
                        onmouseout="this.style.borderColor='#cbd5e1'; this.style.color='#64748b'; this.style.background='white'">
                        <span class="material-icons">add_circle</span>
                        <span style="font-weight: 700; font-size: 14px;">Agregar educación</span>
                    </button>

                    <!-- Add/Edit form (hidden by default) -->
                    <div id="educationFormSection"
                        style="display: none; margin-top: 32px; padding-top: 32px; border-top: 1px solid #e2e8f0;">
                        <div
                            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <p style="font-size: 12px; font-weight: 700; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin: 0;"
                                id="educationFormTitle">Agregar nuevo título</p>
                        </div>
                        <div
                            style="background: white; border-radius: 16px; padding: 24px; border: 1px solid #f1f5f9; box-shadow: 0 20px 25px -5px rgba(226,232,240,0.5);">
                            <div style="display: flex; flex-direction: column; gap: 20px;">
                                <!-- Degree -->
                                <div>
                                    <label
                                        style="display: block; font-size: 12px; font-weight: 700; color: #64748b; margin-bottom: 8px; margin-left: 4px;">Título
                                        / Certificación</label>
                                    <input type="text" id="eduDegree" placeholder="Ej. Ingeniería en Informática"
                                        style="width: 100%; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 14px 16px; font-size: 16px; color: #0f172a; outline: none; transition: all 0.2s; box-sizing: border-box; font-family: 'Inter', sans-serif;"
                                        onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 3px rgba(19,146,236,0.1)'"
                                        onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'">
                                </div>
                                <!-- Institution -->
                                <div>
                                    <label
                                        style="display: block; font-size: 12px; font-weight: 700; color: #64748b; margin-bottom: 8px; margin-left: 4px;">Institución</label>
                                    <div style="position: relative;">
                                        <span
                                            style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: #94a3b8;">
                                            <span class="material-icons" style="font-size: 20px;">account_balance</span>
                                        </span>
                                        <input type="text" id="eduInstitution" placeholder="Ej. Universidad de Chile"
                                            style="width: 100%; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 14px 16px 14px 44px; font-size: 16px; color: #0f172a; outline: none; transition: all 0.2s; box-sizing: border-box; font-family: 'Inter', sans-serif;"
                                            onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 3px rgba(19,146,236,0.1)'"
                                            onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'">
                                    </div>
                                </div>
                                <!-- Year -->
                                <div>
                                    <label
                                        style="display: block; font-size: 12px; font-weight: 700; color: #64748b; margin-bottom: 8px; margin-left: 4px;">Año
                                        de egreso</label>
                                    <div style="position: relative;">
                                        <span
                                            style="position: absolute; right: 16px; top: 50%; transform: translateY(-50%); color: #94a3b8; pointer-events: none;">
                                            <span class="material-icons" style="font-size: 20px;">calendar_today</span>
                                        </span>
                                        <select id="eduYear"
                                            style="width: 100%; appearance: none; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 14px 44px 14px 16px; font-size: 16px; color: #0f172a; outline: none; transition: all 0.2s; cursor: pointer; box-sizing: border-box; font-family: 'Inter', sans-serif;"
                                            onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 3px rgba(19,146,236,0.1)'"
                                            onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'">
                                            <option value="" disabled selected>Seleccionar año</option>
                                        </select>
                                    </div>
                                </div>
                                <!-- Buttons -->
                                <div style="display: flex; gap: 12px; padding-top: 16px;">
                                    <button onclick="app.cancelEducationForm()"
                                        style="flex: 1; padding: 14px; font-size: 14px; font-weight: 700; color: #64748b; background: transparent; border: 1px solid transparent; border-radius: 12px; cursor: pointer; transition: all 0.2s; font-family: 'Inter', sans-serif;"
                                        onmouseover="this.style.background='#f1f5f9'; this.style.borderColor='#e2e8f0'"
                                        onmouseout="this.style.background='transparent'; this.style.borderColor='transparent'">Cancelar</button>
                                    <button onclick="app.saveEducationEntry()"
                                        style="flex: 1; padding: 14px; font-size: 14px; font-weight: 700; color: white; background: #1392ec; border: none; border-radius: 12px; cursor: pointer; box-shadow: 0 10px 15px -3px rgba(19,146,236,0.3); transition: all 0.2s; font-family: 'Inter', sans-serif;"
                                        onmouseover="this.style.background='#0f7ac4'"
                                        onmouseout="this.style.background='#1392ec'"
                                        onmousedown="this.style.transform='scale(0.95)'"
                                        onmouseup="this.style.transform='scale(1)'">Guardar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bottom button -->
                <div
                    style="position: fixed; bottom: 0; left: 0; width: 100%; background: rgba(255,255,255,0.8); backdrop-filter: blur(12px); border-top: 1px solid #f1f5f9; padding: 16px; z-index: 20; box-sizing: border-box;">
                    <div style="max-width: 448px; margin: 0 auto;">
                        <button onclick="app.nextOnboardingStep(7)"
                            style="width: 100%; background: #1392ec; color: white; font-weight: 700; font-size: 18px; padding: 16px; border: none; border-radius: 12px; cursor: pointer; box-shadow: 0 20px 25px -5px rgba(19,146,236,0.3); transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px; font-family: 'Inter', sans-serif;"
                            onmouseover="this.style.background='#0f7ac4'" onmouseout="this.style.background='#1392ec'"
                            onmousedown="this.style.transform='scale(0.98)'"
                            onmouseup="this.style.transform='scale(1)'">
                            Continuar
                            <span class="material-icons" style="font-size: 20px; font-weight: 700;">arrow_forward</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== ONBOARDING STEP 7: SALARY ===== -->
        <div id="onboardingStep7" class="view">
            <div class="auth-screen">
                <div class="auth-header">
                    <button class="back-btn" onclick="app.showView('onboardingStep6')">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <div class="auth-logo">Talently</div>
                </div>

                <div class="auth-content">
                    <div
                        style="width: 56px; height: 56px; border-radius: 50%; background: var(--gradient-primary); color: white; font-size: 24px; font-weight: 700; display: flex; align-items: center; justify-content: center; margin-bottom: 24px;">
                        7</div>
                    <h1 class="auth-title">Pretensión salarial</h1>
                    <!-- Campos movidos al Step 2 (nuevo diseño Stitch) -->
                    <p class="auth-subtitle" style="margin-top: 24px;">Este campo ya se completó en el paso 2.</p>

                    <button class="btn-primary" onclick="app.nextOnboardingStep(8)"
                        style="margin-top: 32px;">Continuar</button>
                </div>
            </div>
        </div>

        <!-- ===== ONBOARDING STEP 8: WORK EXPERIENCE (Stitch) ===== -->
        <div id="onboardingStep8" class="view">
            <div
                style="position: relative; display: flex; height: 100%; min-height: 100vh; width: 100%; max-width: 448px; flex-direction: column; background: white; margin: 0 auto; font-family: 'Inter', sans-serif; color: #0f172a;">
                <!-- Header -->
                <div
                    style="position: sticky; top: 0; z-index: 20; display: flex; align-items: center; justify-content: space-between; background: rgba(255,255,255,0.9); backdrop-filter: blur(12px); padding: 16px; padding-bottom: 8px; border-bottom: 1px solid #f1f5f9;">
                    <button onclick="app.showView('onboardingStep7')"
                        style="display: flex; align-items: center; justify-content: center; width: 48px; height: 48px; border-radius: 50%; border: none; background: transparent; color: #0f172a; cursor: pointer; transition: background 0.2s;"
                        onmouseover="this.style.background='#f1f5f9'" onmouseout="this.style.background='transparent'">
                        <span class="material-icons" style="font-size: 24px;">arrow_back_ios_new</span>
                    </button>
                    <h2
                        style="font-size: 18px; font-weight: 700; color: #0f172a; flex: 1; text-align: center; padding-right: 48px;">
                        Experiencia Laboral</h2>
                </div>

                <!-- Progress -->
                <div
                    style="display: flex; flex-direction: column; gap: 12px; padding: 24px 24px 24px; background: white;">
                    <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                        <p
                            style="color: #64748b; font-size: 14px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; margin: 0;">
                            Paso 8 de 16</p>
                        <p style="color: #1392ec; font-size: 14px; font-weight: 700; margin: 0;">50%</p>
                    </div>
                    <div
                        style="height: 8px; width: 100%; background: #f1f5f9; border-radius: 9999px; overflow: hidden;">
                        <div
                            style="height: 100%; background: #1392ec; border-radius: 9999px; width: 50%; box-shadow: 0 0 10px rgba(19,146,236,0.4); transition: all 0.5s ease-out;">
                        </div>
                    </div>
                </div>

                <!-- Content -->
                <div style="flex: 1; overflow-y: auto; padding-bottom: 160px; background: white;">
                    <div style="padding: 0 24px 40px;">
                        <h1
                            style="font-size: 32px; font-weight: 800; color: #0f172a; letter-spacing: -0.025em; line-height: 1.2; margin: 0 0 12px;">
                            Agrega tu experiencia laboral</h1>
                        <p style="color: #64748b; font-size: 16px; font-weight: 500; line-height: 1.6; margin: 0;">
                            Cuéntanos dónde has trabajado. Esto ayuda a encontrarte mejores oportunidades.</p>
                    </div>

                    <!-- Timeline container -->
                    <div style="padding: 0 24px; position: relative;">
                        <!-- Timeline line (rendered by JS) -->
                        <div id="expTimelineLine"
                            style="position: absolute; left: 43px; top: 16px; bottom: 0; width: 2px; background: #f1f5f9; z-index: 0; display: none;">
                        </div>

                        <!-- Experience entries (JS renders here) -->
                        <div id="experienceEntriesList" style="position: relative; z-index: 1;">
                            <!-- JS renders timeline entries here -->
                        </div>

                        <!-- Add button -->
                        <div style="position: relative; display: grid; grid-template-columns: 40px 1fr; gap: 0 20px; z-index: 1; margin-top: 8px;"
                            id="addExpBtnRow">
                            <div style="display: flex; flex-direction: column; align-items: center; padding-top: 4px;">
                                <div
                                    style="display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; border-radius: 50%; background: white; border: 2px dashed #cbd5e1; color: #94a3b8; z-index: 10;">
                                    <span class="material-icons" style="font-size: 20px;">add</span>
                                </div>
                            </div>
                            <button onclick="app.showExperienceForm()"
                                style="display: flex; align-items: center; justify-content: center; gap: 8px; background: #f8fafc; border: 2px dashed #e2e8f0; padding: 20px; border-radius: 16px; width: 100%; color: #64748b; cursor: pointer; transition: all 0.2s; font-family: 'Inter', sans-serif;"
                                onmouseover="this.style.borderColor='rgba(19,146,236,0.4)'; this.style.color='#1392ec'; this.style.background='#f0f9ff'"
                                onmouseout="this.style.borderColor='#e2e8f0'; this.style.color='#64748b'; this.style.background='#f8fafc'">
                                <span class="material-icons">add_circle</span>
                                <span style="font-weight: 700; font-size: 14px; letter-spacing: 0.025em;">Agregar
                                    posición</span>
                            </button>
                        </div>
                    </div>

                    <!-- Add/Edit form (hidden by default) -->
                    <div id="experienceFormSection" style="display: none; padding: 32px 24px 0;">
                        <div
                            style="background: white; border-radius: 16px; padding: 24px; border: 1px solid #f1f5f9; box-shadow: 0 20px 25px -5px rgba(226,232,240,0.5);">
                            <p style="font-size: 12px; font-weight: 700; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin: 0 0 20px;"
                                id="experienceFormTitle">Agregar posición</p>
                            <div style="display: flex; flex-direction: column; gap: 20px;">
                                <!-- Title -->
                                <div>
                                    <label
                                        style="display: block; font-size: 12px; font-weight: 700; color: #64748b; margin-bottom: 8px; margin-left: 4px;">Cargo
                                        / Título</label>
                                    <input type="text" id="expTitle" placeholder="Ej. Diseñador de Producto Senior"
                                        style="width: 100%; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 14px 16px; font-size: 16px; color: #0f172a; outline: none; transition: all 0.2s; box-sizing: border-box; font-family: 'Inter', sans-serif;"
                                        onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 3px rgba(19,146,236,0.1)'"
                                        onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'">
                                </div>
                                <!-- Company -->
                                <div>
                                    <label
                                        style="display: block; font-size: 12px; font-weight: 700; color: #64748b; margin-bottom: 8px; margin-left: 4px;">Empresa</label>
                                    <div style="position: relative;">
                                        <span
                                            style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: #94a3b8;">
                                            <span class="material-icons" style="font-size: 20px;">business</span>
                                        </span>
                                        <input type="text" id="expCompany"
                                            placeholder="Ej. Google, Rappi, Mercado Libre"
                                            style="width: 100%; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 14px 16px 14px 44px; font-size: 16px; color: #0f172a; outline: none; transition: all 0.2s; box-sizing: border-box; font-family: 'Inter', sans-serif;"
                                            onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 3px rgba(19,146,236,0.1)'"
                                            onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'">
                                    </div>
                                </div>
                                <!-- Dates row -->
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                                    <div>
                                        <label
                                            style="display: block; font-size: 12px; font-weight: 700; color: #64748b; margin-bottom: 8px; margin-left: 4px;">Inicio</label>
                                        <input type="month" id="expStartDate"
                                            style="width: 100%; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 14px 16px; font-size: 14px; color: #0f172a; outline: none; transition: all 0.2s; box-sizing: border-box; font-family: 'Inter', sans-serif;"
                                            onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 3px rgba(19,146,236,0.1)'"
                                            onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'">
                                    </div>
                                    <div>
                                        <label
                                            style="display: block; font-size: 12px; font-weight: 700; color: #64748b; margin-bottom: 8px; margin-left: 4px;">Fin</label>
                                        <input type="month" id="expEndDate"
                                            style="width: 100%; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 14px 16px; font-size: 14px; color: #0f172a; outline: none; transition: all 0.2s; box-sizing: border-box; font-family: 'Inter', sans-serif;"
                                            onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 3px rgba(19,146,236,0.1)'"
                                            onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'">
                                    </div>
                                </div>
                                <!-- Currently working -->
                                <label style="display: flex; align-items: center; gap: 12px; cursor: pointer;">
                                    <input type="checkbox" id="expCurrentlyWorking"
                                        onchange="document.getElementById('expEndDate').disabled = this.checked; if(this.checked) document.getElementById('expEndDate').value=''"
                                        style="width: 20px; height: 20px; accent-color: #1392ec; cursor: pointer;">
                                    <span style="font-size: 14px; font-weight: 600; color: #64748b;">Actualmente trabajo
                                        aquí</span>
                                </label>
                                <!-- Description -->
                                <div>
                                    <label
                                        style="display: block; font-size: 12px; font-weight: 700; color: #64748b; margin-bottom: 8px; margin-left: 4px;">Descripción
                                        (opcional)</label>
                                    <textarea id="expDescription" rows="3"
                                        placeholder="Describe brevemente tus responsabilidades..."
                                        style="width: 100%; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 14px 16px; font-size: 15px; color: #0f172a; outline: none; transition: all 0.2s; box-sizing: border-box; font-family: 'Inter', sans-serif; resize: vertical;"
                                        onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 3px rgba(19,146,236,0.1)'"
                                        onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'"></textarea>
                                </div>
                                <!-- Buttons -->
                                <div style="display: flex; gap: 12px; padding-top: 8px;">
                                    <button onclick="app.cancelExperienceForm()"
                                        style="flex: 1; padding: 14px; font-size: 14px; font-weight: 700; color: #64748b; background: transparent; border: 1px solid transparent; border-radius: 12px; cursor: pointer; transition: all 0.2s; font-family: 'Inter', sans-serif;"
                                        onmouseover="this.style.background='#f1f5f9'; this.style.borderColor='#e2e8f0'"
                                        onmouseout="this.style.background='transparent'; this.style.borderColor='transparent'">Cancelar</button>
                                    <button onclick="app.saveExperienceEntry()"
                                        style="flex: 1; padding: 14px; font-size: 14px; font-weight: 700; color: white; background: #1392ec; border: none; border-radius: 12px; cursor: pointer; box-shadow: 0 10px 15px -3px rgba(19,146,236,0.3); transition: all 0.2s; font-family: 'Inter', sans-serif;"
                                        onmouseover="this.style.background='#0e7acb'"
                                        onmouseout="this.style.background='#1392ec'"
                                        onmousedown="this.style.transform='scale(0.95)'"
                                        onmouseup="this.style.transform='scale(1)'">Guardar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bottom buttons -->
                <div
                    style="position: fixed; bottom: 0; left: 0; right: 0; z-index: 20; padding: 20px; background: rgba(255,255,255,0.95); backdrop-filter: blur(8px); border-top: 1px solid #f1f5f9; max-width: 448px; margin: 0 auto; box-sizing: border-box;">
                    <button onclick="app.nextOnboardingStep(9)"
                        style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 8px; background: #1392ec; color: white; font-weight: 700; font-size: 17px; height: 56px; border: none; border-radius: 12px; cursor: pointer; box-shadow: 0 10px 15px -3px rgba(19,146,236,0.25); transition: all 0.2s; font-family: 'Inter', sans-serif;"
                        onmouseover="this.style.background='#0e7acb'" onmouseout="this.style.background='#1392ec'"
                        onmousedown="this.style.transform='scale(0.98)'" onmouseup="this.style.transform='scale(1)'">
                        <span>Guardar y continuar</span>
                        <span class="material-icons" style="font-size: 20px;">arrow_forward</span>
                    </button>
                    <button onclick="app.nextOnboardingStep(9)"
                        style="width: 100%; margin-top: 16px; color: #94a3b8; font-size: 14px; font-weight: 600; height: 32px; border: none; background: transparent; cursor: pointer; transition: color 0.2s; font-family: 'Inter', sans-serif;"
                        onmouseover="this.style.color='#64748b'" onmouseout="this.style.color='#94a3b8'">
                        No tengo experiencia laboral
                    </button>
                </div>
            </div>
        </div>

        <!-- ===== ONBOARDING STEP 9: AVAILABILITY ===== -->
        <div id="onboardingStep9" class="view">
            <div class="auth-screen">
                <div class="auth-header">
                    <button class="back-btn" onclick="app.showView('onboardingStep8')">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <div class="auth-logo">Talently</div>
                </div>

                <div class="auth-content">
                    <div
                        style="width: 56px; height: 56px; border-radius: 50%; background: var(--gradient-primary); color: white; font-size: 24px; font-weight: 700; display: flex; align-items: center; justify-content: center; margin-bottom: 24px;">
                        9</div>
                    <h1 class="auth-title">Disponibilidad</h1>
                    <p class="auth-subtitle">¿Cuándo puedes empezar?</p>

                    <div style="display: flex; flex-direction: column; gap: 12px; margin-top: 32px;">
                        <label
                            style="padding: 20px; border: 2px solid var(--border); border-radius: 16px; cursor: pointer; transition: all 0.3s ease;"
                            class="availability-option" onclick="app.selectOption('availability', 'inmediata', this)">
                            <input type="radio" name="availability" value="inmediata"
                                style="width: 20px; height: 20px; accent-color: var(--primary); margin-right: 12px;">
                            <span style="font-weight: 600;">Inmediata</span>
                        </label>

                        <label
                            style="padding: 20px; border: 2px solid var(--border); border-radius: 16px; cursor: pointer; transition: all 0.3s ease;"
                            class="availability-option" onclick="app.selectOption('availability', '15-dias', this)">
                            <input type="radio" name="availability" value="15-dias"
                                style="width: 20px; height: 20px; accent-color: var(--primary); margin-right: 12px;">
                            <span style="font-weight: 600;">En 15 días</span>
                        </label>

                        <label
                            style="padding: 20px; border: 2px solid var(--border); border-radius: 16px; cursor: pointer; transition: all 0.3s ease;"
                            class="availability-option" onclick="app.selectOption('availability', '1-mes', this)">
                            <input type="radio" name="availability" value="1-mes"
                                style="width: 20px; height: 20px; accent-color: var(--primary); margin-right: 12px;">
                            <span style="font-weight: 600;">En 1 mes</span>
                        </label>

                        <label
                            style="padding: 20px; border: 2px solid var(--border); border-radius: 16px; cursor: pointer; transition: all 0.3s ease;"
                            class="availability-option" onclick="app.selectOption('availability', '2-meses', this)">
                            <input type="radio" name="availability" value="2-meses"
                                style="width: 20px; height: 20px; accent-color: var(--primary); margin-right: 12px;">
                            <span style="font-weight: 600;">En 2+ meses</span>
                        </label>
                    </div>

                    <button class="btn-primary" onclick="app.nextOnboardingStep(10)"
                        style="margin-top: 32px;">Continuar</button>
                </div>
            </div>
        </div>

        <!-- ===== ONBOARDING STEP 10: PROFESSIONAL AREA ===== -->
        <div id="onboardingStep10" class="view">
            <div class="auth-screen">
                <div class="auth-header">
                    <button class="back-btn" onclick="app.showView('onboardingStep9')">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <div class="auth-logo">Talently</div>
                </div>

                <div class="auth-content">
                    <div
                        style="width: 56px; height: 56px; border-radius: 50%; background: var(--gradient-primary); color: white; font-size: 24px; font-weight: 700; display: flex; align-items: center; justify-content: center; margin-bottom: 24px;">
                        10</div>
                    <h1 class="auth-title">Área profesional</h1>
                    <!-- Campo movido al Step 4 (nuevo diseño Stitch) -->
                    <p class="auth-subtitle" style="margin-top: 24px;">Este campo ya se completó en el paso 4.</p>

                    <button class="btn-primary" onclick="app.nextOnboardingStep(11)"
                        style="margin-top: 32px;">Continuar</button>
                </div>
            </div>
        </div>

        <!-- ===== ONBOARDING STEP 11: SKILLS (Stitch) ===== -->
        <div id="onboardingStep11" class="view">
            <div
                style="font-family: 'Inter', sans-serif; min-height: 100vh; display: flex; flex-direction: column; background: #fff;">
                <!-- Header -->
                <div
                    style="padding: 48px 24px 16px; position: sticky; top: 0; background: rgba(255,255,255,0.95); backdrop-filter: blur(12px); z-index: 20; border-bottom: 1px solid #e5e7eb;">
                    <div
                        style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px;">
                        <button onclick="app.showView('onboardingStep10')"
                            style="padding: 8px; margin-left: -8px; border-radius: 50%; border: none; background: transparent; cursor: pointer; color: #111827; display: flex; align-items: center; justify-content: center;">
                            <span class="material-icons" style="font-size: 24px;">arrow_back</span>
                        </button>
                        <div style="display: flex; flex-direction: column; align-items: center;">
                            <span
                                style="font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 2px; color: #6b7280;">Habilidades</span>
                        </div>
                        <button onclick="app.nextOnboardingStep(12)"
                            style="font-size: 14px; font-weight: 700; color: #1392ec; border: none; background: transparent; cursor: pointer; padding: 4px 12px; border-radius: 999px;">Omitir</button>
                    </div>
                    <div
                        style="display: flex; align-items: center; gap: 6px; height: 6px; width: 100%; max-width: 384px; margin: 0 auto;">
                        <div style="height: 100%; flex: 1; border-radius: 999px; background: rgba(19,146,236,0.2);">
                        </div>
                        <div style="height: 100%; flex: 1; border-radius: 999px; background: rgba(19,146,236,0.2);">
                        </div>
                        <div style="height: 100%; flex: 1; border-radius: 999px; background: rgba(19,146,236,0.2);">
                        </div>
                        <div
                            style="height: 100%; flex: 1; border-radius: 999px; background: #1392ec; box-shadow: 0 0 15px rgba(19,146,236,0.3);">
                        </div>
                        <div style="height: 100%; flex: 1; border-radius: 999px; background: #f3f4f6;"></div>
                        <div style="height: 100%; flex: 1; border-radius: 999px; background: #f3f4f6;"></div>
                    </div>
                    <div
                        style="text-align: center; margin-top: 8px; font-size: 12px; font-weight: 500; color: #6b7280;">
                        Paso 11 de 16</div>
                </div>

                <!-- Main -->
                <main style="flex: 1; display: flex; flex-direction: column; padding: 24px 24px 128px;">
                    <div style="margin-bottom: 32px;">
                        <h1
                            style="font-size: 30px; font-weight: 800; line-height: 1.2; letter-spacing: -0.5px; margin: 0 0 12px; color: #111827;">
                            ¿Cuáles son tus<br><span style="color: #1392ec;">principales habilidades?</span>
                        </h1>
                        <p style="color: #6b7280; font-size: 16px; line-height: 1.6; margin: 0;">
                            Selecciona al menos 5 habilidades para conectarte con oportunidades relevantes.
                        </p>
                    </div>

                    <!-- Search -->
                    <div style="position: relative; margin-bottom: 32px;">
                        <div
                            style="position: absolute; top: 0; bottom: 0; left: 0; padding-left: 16px; display: flex; align-items: center; pointer-events: none; color: #9ca3af;">
                            <span class="material-icons" style="font-size: 22px;">search</span>
                        </div>
                        <input id="skillsSearchInput" oninput="app.filterSkillsSearch(this.value)" type="text"
                            placeholder="Buscar habilidades..."
                            style="width: 100%; height: 56px; padding-left: 48px; padding-right: 16px; background: #f3f4f6; border: 2px solid transparent; border-radius: 16px; font-size: 16px; font-family: 'Inter', sans-serif; color: #111827; outline: none; box-sizing: border-box; transition: all 0.3s;"
                            onfocus="this.style.background='#fff'; this.style.borderColor='rgba(19,146,236,0.3)'; this.style.boxShadow='0 0 0 4px rgba(19,146,236,0.1)';"
                            onblur="this.style.background='#f3f4f6'; this.style.borderColor='transparent'; this.style.boxShadow='none';">
                    </div>

                    <!-- Your Selection -->
                    <div id="skillsSelectionArea" style="margin-bottom: 40px; display: none;">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                            <h3
                                style="font-size: 13px; font-weight: 700; color: #111827; text-transform: uppercase; letter-spacing: 1.5px; margin: 0;">
                                Tu Selección</h3>
                            <span id="skillsSelectedBadge"
                                style="font-size: 12px; font-weight: 700; color: #1392ec; background: rgba(19,146,236,0.1); padding: 4px 12px; border-radius: 999px; border: 1px solid rgba(19,146,236,0.1);">0
                                seleccionadas</span>
                        </div>
                        <div id="skillsSelectedTags" style="display: flex; flex-wrap: wrap; gap: 12px;"></div>
                    </div>
                    <div id="skillsDivider"
                        style="height: 1px; width: 100%; background: #e5e7eb; margin-bottom: 32px; display: none;">
                    </div>

                    <!-- Categories -->
                    <div id="skillsCategoriesContainer" style="display: flex; flex-direction: column; gap: 32px;"></div>
                </main>

                <!-- Bottom -->
                <div
                    style="position: fixed; bottom: 0; left: 0; right: 0; padding: 24px; background: rgba(255,255,255,0.95); backdrop-filter: blur(20px); border-top: 1px solid #e5e7eb; z-index: 30;">
                    <div
                        style="display: flex; flex-direction: column; gap: 12px; max-width: 448px; margin: 0 auto; width: 100%;">
                        <button onclick="app.nextOnboardingStep(12)"
                            style="width: 100%; background: #1392ec; color: white; font-weight: 700; font-size: 18px; font-family: 'Inter', sans-serif; height: 56px; border-radius: 16px; border: none; cursor: pointer; box-shadow: 0 4px 15px rgba(19,146,236,0.25); display: flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s;">
                            Continuar
                            <span class="material-icons">arrow_forward</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== ONBOARDING STEP 12: LANGUAGES ===== -->
        <div id="onboardingStep12" class="view">
            <div class="auth-screen">
                <div class="auth-header">
                    <button class="back-btn" onclick="app.showView('onboardingStep11')">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <div class="auth-logo">Talently</div>
                </div>

                <div class="auth-content">
                    <div
                        style="width: 56px; height: 56px; border-radius: 50%; background: var(--gradient-primary); color: white; font-size: 24px; font-weight: 700; display: flex; align-items: center; justify-content: center; margin-bottom: 24px;">
                        12</div>
                    <h1 class="auth-title">Idiomas</h1>
                    <p class="auth-subtitle">¿Qué idiomas hablas?</p>

                    <form style="margin-top: 32px;">
                        <div id="languagesContainer">
                            <div class="language-item" style="display: flex; gap: 12px; margin-bottom: 16px;">
                                <select class="form-input" style="flex: 2;">
                                    <option value="">Selecciona idioma</option>
                                    <option value="espanol">Español</option>
                                    <option value="ingles">Inglés</option>
                                    <option value="portugues">Portugués</option>
                                    <option value="frances">Francés</option>
                                    <option value="aleman">Alemán</option>
                                    <option value="italiano">Italiano</option>
                                    <option value="chino">Chino</option>
                                </select>
                                <select class="form-input" style="flex: 1;">
                                    <option value="">Nivel</option>
                                    <option value="basico">Básico</option>
                                    <option value="intermedio">Intermedio</option>
                                    <option value="avanzado">Avanzado</option>
                                    <option value="nativo">Nativo</option>
                                </select>
                            </div>
                        </div>
                        <button type="button" onclick="app.addLanguage()"
                            style="background: var(--bg); color: var(--primary); border: 2px dashed var(--primary); padding: 12px; border-radius: 12px; font-weight: 600; cursor: pointer; width: 100%;">
                            + Agregar otro idioma
                        </button>
                    </form>

                    <div style="display: flex; gap: 12px; margin-top: 32px;">
                        <button class="btn-secondary" onclick="app.nextOnboardingStep(13)">Omitir</button>
                        <button class="btn-primary" onclick="app.nextOnboardingStep(13)"
                            style="flex: 1;">Continuar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== ONBOARDING STEP 13: EDUCATION ===== -->
        <div id="onboardingStep13" class="view">
            <div class="auth-screen">
                <div class="auth-header">
                    <button class="back-btn" onclick="app.showView('onboardingStep12')">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <div class="auth-logo">Talently</div>
                </div>

                <div class="auth-content">
                    <div
                        style="width: 56px; height: 56px; border-radius: 50%; background: var(--gradient-primary); color: white; font-size: 24px; font-weight: 700; display: flex; align-items: center; justify-content: center; margin-bottom: 24px;">
                        13</div>
                    <h1 class="auth-title">Nivel educativo</h1>
                    <!-- Campo movido al Step 6 (nuevo diseño Stitch - Historial Educativo) -->
                    <p class="auth-subtitle" style="margin-top: 24px;">Este campo ya se completó en el paso 6.</p>

                    <div style="display: flex; gap: 12px; margin-top: 32px;">
                        <button class="btn-primary" onclick="app.nextOnboardingStep(14)"
                            style="flex: 1;">Continuar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== ONBOARDING STEP 14: MEDIA UPLOAD (Stitch) ===== -->
        <div id="onboardingStep14" class="view">
            <div
                style="font-family: 'Inter', sans-serif; min-height: 100vh; display: flex; flex-direction: column; background: #fff;">
                <!-- Header -->
                <header
                    style="display: flex; align-items: center; justify-content: space-between; padding: 40px 16px 8px; background: #fff; z-index: 10; position: sticky; top: 0;">
                    <button onclick="app.showView('onboardingStep13')"
                        style="display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; border-radius: 50%; border: none; background: transparent; cursor: pointer; color: #0f172a;">
                        <span class="material-icons" style="font-size: 24px;">arrow_back</span>
                    </button>
                    <div style="flex: 1;"></div>
                    <button onclick="app.nextOnboardingStep(15)"
                        style="color: #64748b; font-size: 14px; font-weight: 600; border: none; background: transparent; cursor: pointer; font-family: 'Inter', sans-serif;">Omitir</button>
                </header>

                <!-- Progress -->
                <div style="padding: 8px 24px 16px; background: #fff;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <span style="color: #64748b; font-size: 14px; font-weight: 500;">Paso 14 de 16</span>
                        <span style="color: #1392ec; font-size: 12px; font-weight: 700;">87%</span>
                    </div>
                    <div style="height: 6px; width: 100%; background: #f1f5f9; border-radius: 999px; overflow: hidden;">
                        <div style="height: 100%; background: #1392ec; border-radius: 999px; width: 87%;"></div>
                    </div>
                </div>

                <!-- Main -->
                <main style="flex: 1; overflow-y: auto; padding: 16px 24px 112px; background: #fff;">
                    <!-- Title -->
                    <div style="text-align: center; margin-bottom: 32px;">
                        <h1
                            style="font-size: 26px; font-weight: 700; color: #0f172a; margin: 0 0 12px; letter-spacing: -0.5px;">
                            Dale cara a tu talento
                        </h1>
                        <p style="color: #64748b; font-size: 16px; line-height: 1.6; margin: 0;">
                            Los perfiles con foto y CV reciben <span style="color: #1392ec; font-weight: 700;">5x más
                                matches</span> por parte de los reclutadores.
                        </p>
                    </div>

                    <!-- Photo Upload -->
                    <div style="display: flex; flex-direction: column; align-items: center; margin-bottom: 40px;">
                        <div style="position: relative; cursor: pointer;"
                            onclick="document.getElementById('photoInput').click()">
                            <div id="mediaPhotoCircle"
                                style="width: 128px; height: 128px; border-radius: 50%; background: #f8fafc; border: 4px solid #fff; box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: center; overflow: hidden; outline: 4px solid #f1f5f9;">
                                <span class="material-icons" style="font-size: 48px; color: #cbd5e1;">person</span>
                            </div>
                            <div
                                style="position: absolute; bottom: 4px; right: 4px; background: #fff; color: #1392ec; padding: 10px; border-radius: 50%; box-shadow: 0 4px 12px rgba(0,0,0,0.12); border: 1px solid #f1f5f9; display: flex; align-items: center; justify-content: center; z-index: 10;">
                                <span class="material-icons" style="font-size: 20px;">photo_camera</span>
                            </div>
                            <input type="file" id="photoInput" accept="image/*" style="display: none;"
                                onchange="app.handlePhotoUpload(event)">
                        </div>
                        <button type="button" onclick="document.getElementById('photoInput').click()"
                            style="margin-top: 20px; color: #1392ec; font-weight: 700; font-size: 14px; border: none; background: transparent; cursor: pointer; font-family: 'Inter', sans-serif;">
                            Cambiar foto de perfil
                        </button>
                        <div id="photoPreview"
                            style="display: none; margin-top: 8px; color: #16a34a; font-size: 13px; font-weight: 600;">
                            Foto cargada correctamente
                        </div>
                    </div>

                    <!-- CV Upload -->
                    <div style="display: flex; flex-direction: column; gap: 16px;">
                        <h3
                            style="color: #0f172a; font-weight: 700; font-size: 18px; display: flex; align-items: center; gap: 8px; margin: 0;">
                            <span class="material-icons" style="color: #1392ec;">description</span>
                            Currículum Vitae
                        </h3>

                        <div style="position: relative; width: 100%;">
                            <input type="file" id="cvInput" accept=".pdf,.doc,.docx" style="display: none;"
                                onchange="app.handleCVUpload(event)">
                            <label for="cvInput" id="mediaCvDropzone"
                                style="display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%; height: 176px; border: 2px dashed #e2e8f0; border-radius: 16px; background: #f8fafc; cursor: pointer; transition: all 0.3s; position: relative; overflow: hidden; box-sizing: border-box;"
                                ondragover="event.preventDefault(); this.style.borderColor='#1392ec'; this.style.background='#eff6ff';"
                                ondragleave="this.style.borderColor='#e2e8f0'; this.style.background='#f8fafc';"
                                ondrop="event.preventDefault(); this.style.borderColor='#e2e8f0'; this.style.background='#f8fafc'; const f=event.dataTransfer.files[0]; if(f){const dt=new DataTransfer(); dt.items.add(f); document.getElementById('cvInput').files=dt.files; app.handleCVUpload({target:{files:[f]}});}">
                                <div
                                    style="padding: 16px; background: #fff; border-radius: 50%; margin-bottom: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); border: 1px solid #f1f5f9;">
                                    <span class="material-icons"
                                        style="font-size: 30px; color: #1392ec;">cloud_upload</span>
                                </div>
                                <p style="margin: 0 0 4px; font-size: 14px; color: #0f172a; font-weight: 600;">
                                    <span style="color: #1392ec;">Haz clic para subir</span> o arrastra
                                </p>
                                <p style="font-size: 12px; color: #94a3b8; margin: 4px 0 0;">Soportamos PDF, DOCX (Máx.
                                    5MB)</p>
                            </label>
                        </div>

                        <!-- Uploaded file info (hidden by default) -->
                        <div id="mediaCvFileInfo" style="display: none;">
                            <div
                                style="display: flex; align-items: center; padding: 12px; background: #f8fafc; border-radius: 12px; border: 1px solid #e2e8f0;">
                                <div
                                    style="height: 40px; width: 40px; background: #fff; border-radius: 8px; border: 1px solid #f1f5f9; display: flex; align-items: center; justify-content: center; color: #ef4444; margin-right: 12px; box-shadow: 0 1px 2px rgba(0,0,0,0.05);">
                                    <span class="material-icons">picture_as_pdf</span>
                                </div>
                                <div style="flex: 1; min-width: 0;">
                                    <p id="mediaCvFileName"
                                        style="font-size: 14px; font-weight: 700; color: #0f172a; margin: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                        archivo.pdf</p>
                                    <p id="mediaCvFileSize" style="font-size: 12px; color: #64748b; margin: 2px 0 0;">0
                                        KB</p>
                                </div>
                                <button type="button" onclick="app.removeCVUpload()"
                                    style="padding: 8px; color: #94a3b8; border: none; background: transparent; cursor: pointer; display: flex; align-items: center;">
                                    <span class="material-icons" style="font-size: 20px;">delete</span>
                                </button>
                            </div>
                        </div>
                        <div id="cvPreview" style="display: none;"></div>
                    </div>

                    <!-- Privacy notice -->
                    <div
                        style="margin-top: 32px; display: flex; align-items: flex-start; gap: 16px; padding: 16px; border-radius: 12px; background: #fff; border: 1px solid #f1f5f9; box-shadow: 0 1px 3px rgba(0,0,0,0.05);">
                        <div
                            style="background: #f0fdf4; padding: 8px; border-radius: 8px; color: #16a34a; flex-shrink: 0;">
                            <span class="material-icons" style="font-size: 20px;">verified_user</span>
                        </div>
                        <div>
                            <h4 style="font-size: 14px; font-weight: 700; color: #0f172a; margin: 0 0 4px;">Privacidad
                                garantizada</h4>
                            <p style="font-size: 12px; color: #64748b; line-height: 1.5; margin: 0;">Tu CV solo será
                                visible para las empresas con las que hagas match mutuamente.</p>
                        </div>
                    </div>
                </main>

                <!-- Bottom -->
                <div
                    style="position: fixed; bottom: 0; left: 0; width: 100%; padding: 24px; background: rgba(255,255,255,0.95); backdrop-filter: blur(12px); border-top: 1px solid #f1f5f9; z-index: 20; box-sizing: border-box;">
                    <button onclick="app.nextOnboardingStep(15)"
                        style="width: 100%; background: #1392ec; color: white; font-weight: 700; font-size: 18px; font-family: 'Inter', sans-serif; padding: 16px 24px; border-radius: 12px; border: none; cursor: pointer; box-shadow: 0 4px 15px rgba(19,146,236,0.2); display: flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s;">
                        Continuar
                        <span class="material-icons" style="font-size: 20px;">arrow_forward</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- ===== ONBOARDING STEP 15: INTERESTS (CRITICAL FOR MATCHING) ===== -->
        <div id="onboardingStep15" class="view">
            <div class="auth-screen">
                <div class="auth-header">
                    <button class="back-btn" onclick="app.showView('onboardingStep14')">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <div class="auth-logo">Talently</div>
                </div>

                <div class="auth-content">
                    <div
                        style="width: 56px; height: 56px; border-radius: 50%; background: var(--gradient-primary); color: white; font-size: 24px; font-weight: 700; display: flex; align-items: center; justify-content: center; margin-bottom: 24px;">
                        15</div>
                    <h1 class="auth-title">Tus intereses</h1>
                    <p class="auth-subtitle">Agrega industrias, tecnologías y áreas que te interesan (presiona
                        Enter)
                    </p>

                    <form style="margin-top: 32px;" onsubmit="return false;">
                        <div class="form-group">
                            <label class="form-label">Tags de intereses (mínimo 5, máximo 15)</label>
                            <div class="tag-input-container" id="interestsContainer"
                                onclick="document.getElementById('interestInput').focus()"
                                style="display: flex; flex-wrap: wrap; gap: 8px; padding: 12px; border: 2px solid var(--border); border-radius: 12px; min-height: 100px; cursor: text;">
                                <!-- Selected interests render here -->
                                <input type="text" class="tag-input" id="interestInput"
                                    onkeypress="app.addInterest(event)"
                                    style="flex: 1; min-width: 150px; border: none; outline: none; font-size: 15px; background: transparent;">
                            </div>
                            <div id="interestsCounter"
                                style="font-size: 13px; color: var(--text-secondary); margin-top: 6px;">
                                <span id="interestsCount" style="color: var(--primary); font-weight: 700;">0</span>/15
                                intereses agregados
                            </div>
                            <div id="interestsBubbleSection_stitch"
                                style="margin-top: 16px; display: flex; flex-direction: column; gap: 16px;">
                                <!-- Dynamic categories render here -->
                            </div>
                        </div>

                        <div style="margin-top: 24px;">
                            <div
                                style="font-size: 14px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px;">
                                💡 Sugerencias populares:</div>
                            <div style="display: flex; flex-wrap: wrap; gap: 8px;" id="suggestedTags">
                                <!-- JavaScript will populate this -->
                            </div>
                        </div>
                    </form>

                    <div style="display: flex; gap: 12px; margin-top: 32px;">
                        <button class="btn-secondary" onclick="app.nextOnboardingStep(16)">Omitir</button>
                        <button class="btn-primary" onclick="app.nextOnboardingStep(16)"
                            style="flex: 1;">Continuar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== ONBOARDING STEP 16: FINAL (simplified - uploads moved to step 14) ===== -->
        <div id="onboardingStep16" class="view">
            <div class="auth-screen">
                <div class="auth-header">
                    <button class="back-btn" onclick="app.showView('onboardingStep15')">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <div class="auth-logo">Talently</div>
                </div>

                <div class="auth-content">
                    <div
                        style="width: 56px; height: 56px; border-radius: 50%; background: var(--gradient-primary); color: white; font-size: 24px; font-weight: 700; display: flex; align-items: center; justify-content: center; margin-bottom: 24px;">
                        16</div>
                    <h1 class="auth-title">Últimos detalles</h1>
                    <!-- Uploads movidos al Step 14 (nuevo diseño Stitch) -->
                    <p class="auth-subtitle" style="margin-top: 24px;">Este campo ya se completó en el paso 14.</p>

                    <button class="btn-primary" onclick="app.completeOnboarding()"
                        style="margin-top: 32px; width: 100%;">Finalizar</button>
                </div>
            </div>
        </div>
        <!-- ===== SUCCESS VIEW (Stitch) ===== -->
        <div id="successView" class="view">
            <div
                style="font-family: 'Inter', sans-serif; min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: space-between; background: #fff; color: #0f172a; overflow: hidden;">
                <!-- Top spacer -->
                <div style="width: 100%; padding: 56px 24px 16px;"></div>

                <!-- Center content -->
                <div
                    style="flex: 1; width: 100%; max-width: 448px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; padding: 0 24px;">
                    <!-- Background glow -->
                    <div
                        style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 288px; height: 288px; background: rgba(239,246,255,0.8); border-radius: 50%; filter: blur(60px); pointer-events: none;">
                    </div>

                    <!-- Animated checkmark -->
                    <div
                        style="position: relative; margin-bottom: 48px; animation: stitch-scale-in 0.6s ease-out forwards;">
                        <!-- Floating dots -->
                        <div
                            style="position: absolute; top: -32px; left: -40px; width: 12px; height: 12px; border-radius: 50%; background: rgba(59,130,246,0.3); animation: stitch-float 4s ease-in-out infinite; animation-delay: 0.1s;">
                        </div>
                        <div
                            style="position: absolute; top: 0; right: -48px; width: 8px; height: 8px; border-radius: 50%; background: rgba(99,102,241,0.3); animation: stitch-float 4s ease-in-out infinite; animation-delay: 0.5s;">
                        </div>
                        <div
                            style="position: absolute; bottom: 40px; left: -56px; width: 16px; height: 16px; border-radius: 50%; background: rgba(19,146,236,0.2); animation: stitch-float 4s ease-in-out infinite; animation-delay: 0.9s;">
                        </div>
                        <div
                            style="position: absolute; bottom: -16px; right: -32px; width: 8px; height: 8px; border-radius: 50%; background: rgba(56,189,248,0.3); animation: stitch-float 4s ease-in-out infinite; animation-delay: 1.2s;">
                        </div>

                        <!-- Circle with rings -->
                        <div
                            style="position: relative; width: 160px; height: 160px; display: flex; align-items: center; justify-content: center;">
                            <div
                                style="position: absolute; inset: 0; border: 1px solid #dbeafe; border-radius: 50%; transform: scale(1.25);">
                            </div>
                            <div
                                style="position: absolute; inset: 0; border: 1px solid #eff6ff; border-radius: 50%; transform: scale(1.5);">
                            </div>
                            <div
                                style="width: 100%; height: 100%; background: linear-gradient(135deg, #1392ec, #2563eb); border-radius: 50%; box-shadow: 0 20px 50px -12px rgba(19,146,236,0.35); display: flex; align-items: center; justify-content: center; animation: stitch-pulse-glow 2s infinite; z-index: 10;">
                                <span class="material-icons" style="color: white; font-size: 80px;">check</span>
                            </div>
                        </div>
                    </div>

                    <!-- Text -->
                    <div style="text-align: center; max-width: 320px; z-index: 10;">
                        <h1 id="successTitle"
                            style="font-size: 32px; line-height: 1.2; font-weight: 800; letter-spacing: -0.5px; color: #0f172a; margin: 0 0 16px;">
                        </h1>
                        <p style="font-size: 18px; font-weight: 500; color: #64748b; line-height: 1.6; margin: 0;">
                            Tu perfil está completo y listo para encontrar tu próximo gran reto.
                        </p>
                    </div>
                </div>

                <!-- Bottom button -->
                <div
                    style="width: 100%; padding: 16px 24px 40px; z-index: 10; background: linear-gradient(to top, white, white, transparent);">
                    <button onclick="app.enterMainApp()"
                        style="width: 100%; background: #1392ec; color: white; font-weight: 700; font-size: 18px; font-family: 'Inter', sans-serif; height: 56px; border-radius: 12px; border: none; cursor: pointer; box-shadow: 0 4px 15px rgba(19,146,236,0.25); display: flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s;">
                        Empezar a Swipear
                        <span class="material-icons">arrow_forward</span>
                    </button>
                    <p style="font-size: 12px; text-align: center; color: #94a3b8; margin: 16px 0 0; font-weight: 500;">
                        Al continuar aceptas nuestros Términos y Condiciones
                    </p>
                </div>
            </div>
        </div>

        <!-- ===== MAIN APP ===== -->
        <div class="main-app">
            <div id="mainApp" class="view">
                <!-- Header (Stitch) -->
                <div
                    style="display: flex; justify-content: space-between; align-items: center; padding: 16px 24px 8px; z-index: 50; font-family: 'Inter', sans-serif;">
                    <div onclick="app.showAppSection('swipeSection')"
                        style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <div
                            style="width: 32px; height: 32px; background: linear-gradient(135deg, #3b82f6, #2563eb); border-radius: 8px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(59,130,246,0.2);">
                            <span style="color: #fff; font-weight: 700; font-size: 18px;">T</span>
                        </div>
                        <h1
                            style="font-size: 20px; font-weight: 700; letter-spacing: -0.02em; color: #111827; margin: 0;">
                            Talently</h1>
                    </div>
                    <div style="display: flex; gap: 12px;">
                        <button onclick="app.openFilters()"
                            style="padding: 8px; border-radius: 50%; background: #fff; border: 1px solid #e5e7eb; color: #6b7280; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 4px rgba(0,0,0,0.03); transition: all 0.2s;"
                            onmouseover="this.style.color='#3b82f6'; this.style.borderColor='#3b82f6'"
                            onmouseout="this.style.color='#6b7280'; this.style.borderColor='#e5e7eb'">
                            <span class="material-icons" style="font-size: 20px;">tune</span>
                        </button>
                        <button onclick="app.toggleNotifications()"
                            style="padding: 8px; border-radius: 50%; background: #fff; border: 1px solid #e5e7eb; color: #6b7280; cursor: pointer; display: flex; align-items: center; justify-content: center; position: relative; box-shadow: 0 2px 4px rgba(0,0,0,0.03); transition: all 0.2s;"
                            onmouseover="this.style.color='#3b82f6'; this.style.borderColor='#3b82f6'"
                            onmouseout="this.style.color='#6b7280'; this.style.borderColor='#e5e7eb'">
                            <span class="material-icons" style="font-size: 20px;">notifications</span>
                            <span id="notifBadgeDot"
                                style="position: absolute; top: 8px; right: 8px; width: 8px; height: 8px; background: #ef4444; border-radius: 50%; border: 2px solid #fff;"></span>
                        </button>
                    </div>
                </div>

                <!-- ===== VIEWS CONTAINER (Inside Main App for Relative Positioning) ===== -->

                <!-- NOTIFICATIONS VIEW -->
                <!-- Candidate Notifications (Stitch) -->
                <div id="notificationsView"
                    style="position: absolute; bottom: 0; left: 0; width: 100%; height: 95%; background: #F8F9FA; z-index: 100; transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1); display: flex; flex-direction: column; border-radius: 20px 20px 0 0; box-shadow: 0 -10px 40px rgba(0,0,0,0.1); font-family: 'Inter', sans-serif;">
                    <!-- Header -->
                    <div
                        style="flex-shrink: 0; padding: 12px 16px; background: #F8F9FA; z-index: 10; display: flex; align-items: center; justify-content: space-between;">
                        <button onclick="app.closeNotifications()"
                            style="padding: 8px; margin-left: -8px; border-radius: 50%; background: none; border: none; cursor: pointer; color: #333333; transition: background 0.15s;"
                            onmouseenter="this.style.background='#E5E7EB'" onmouseleave="this.style.background='none'">
                            <span class="material-icons" style="font-size: 24px;">arrow_back</span>
                        </button>
                        <h1 style="font-size: 18px; font-weight: 700; color: #333333; margin: 0;">Notificaciones</h1>
                        <button onclick="app.markNotificationsAsRead()"
                            style="color: #1392ec; font-size: 14px; font-weight: 700; background: none; border: none; cursor: pointer; font-family: 'Inter', sans-serif; transition: opacity 0.15s;"
                            onmouseenter="this.style.opacity='0.8'" onmouseleave="this.style.opacity='1'">
                            Marcar todo
                        </button>
                    </div>
                    <!-- Notification List -->
                    <div id="notificationList"
                        style="flex: 1; overflow-y: auto; padding: 0 0 24px; scrollbar-width: none; -ms-overflow-style: none;">
                        <!-- JS populated -->
                        <div style="text-align: center; padding: 60px 24px; color: #666666;">
                            <span class="material-icons"
                                style="font-size: 48px; color: #E5E7EB; display: block; margin-bottom: 12px;">notifications_none</span>
                            <p style="margin: 0; font-size: 14px;">No tienes notificaciones</p>
                        </div>
                    </div>
                </div>

                <!-- SETTINGS VIEW -->
                <div id="settingsView"
                    style="position: absolute; bottom: 0; left: 0; width: 100%; height: 100%; background: #F8F9FA; z-index: 101; transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1); display: flex; flex-direction: column;">

                    <div class="relative flex min-h-full flex-col w-full max-w-md mx-auto bg-slate-50 dark:bg-slate-900"
                        style="flex: 1;">
                        <!-- Sticky Header -->
                        <header
                            class="sticky top-0 z-50 flex items-center justify-between bg-white dark:bg-slate-900 px-4 py-4 border-b border-slate-200 dark:border-slate-800">
                            <button onclick="app.closeSettingsModal()"
                                class="flex items-center justify-center p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors cursor-pointer border-0 bg-transparent">
                                <span class="material-icons" style="font-size: 24px; color: #1e293b;">arrow_back</span>
                            </button>
                            <h1 class="text-lg font-bold tracking-tight text-center flex-1 m-0 text-slate-900 dark:text-white"
                                style="font-size: 18px;">Configuración</h1>
                            <div class="w-10" style="width: 40px;"></div> <!-- Spacer for centering -->
                        </header>

                        <!-- Content Area -->
                        <main class="flex-1 overflow-y-auto pb-24" style="flex: 1; padding-bottom: 96px;">
                            <!-- App Preferences Section -->
                            <section class="mt-6 px-4" style="margin-top: 24px; padding: 0 16px;">
                                <h2 class="text-sm font-semibold uppercase tracking-wider text-slate-500 mb-3 ml-2"
                                    style="font-size: 13px; margin-bottom: 12px; margin-left: 8px;">Preferencias de la
                                    App</h2>
                                <div class="bg-white dark:bg-slate-900 rounded-xl overflow-hidden shadow-sm border border-slate-200 dark:border-slate-800"
                                    style="border-radius: 16px;">

                                    <!-- Dark Mode Toggle -->
                                    <div onclick="app.toggleDarkMode()"
                                        class="flex items-center justify-between px-4 py-4 border-b border-slate-100 cursor-pointer"
                                        onmouseenter="this.style.background='#F8F9FA'"
                                        onmouseleave="this.style.background='transparent'"
                                        style="display: flex; align-items: center; justify-content: space-between; padding: 16px; border-bottom: 1px solid #f1f5f9;">
                                        <div class="flex items-center gap-3"
                                            style="display: flex; align-items: center; gap: 12px;">
                                            <div class="flex items-center justify-center rounded-lg"
                                                style="width: 40px; height: 40px; background: rgba(139,92,246,0.1); display: flex; align-items: center; justify-content: center;">
                                                <span class="material-icons" style="color: #8B5CF6;">dark_mode</span>
                                            </div>
                                            <span class="text-base font-medium"
                                                style="font-size: 15px; font-weight: 600; color: #212529;">Modo
                                                Oscuro</span>
                                        </div>
                                        <div style="font-size: 13px; color: #9CA3AF;" id="darkModeStatusText">Modo claro
                                        </div>
                                    </div>

                                    <!-- Notifications Toggle -->
                                    <div class="flex items-center justify-between px-4 py-4 cursor-pointer"
                                        onmouseenter="this.style.background='#F8F9FA'"
                                        onmouseleave="this.style.background='transparent'"
                                        style="display: flex; align-items: center; justify-content: space-between; padding: 16px;">
                                        <div class="flex items-center gap-3"
                                            style="display: flex; align-items: center; gap: 12px;">
                                            <div class="flex items-center justify-center rounded-lg"
                                                style="width: 40px; height: 40px; background: rgba(59,130,246,0.1); display: flex; align-items: center; justify-content: center;">
                                                <span class="material-icons"
                                                    style="color: #3B82F6;">notifications</span>
                                            </div>
                                            <span class="text-base font-medium"
                                                style="font-size: 15px; font-weight: 600; color: #212529;">Notificaciones</span>
                                        </div>
                                        <div style="font-size: 13px; color: #9CA3AF;" id="notifStatusText">Configurar
                                            alertas</div>
                                    </div>

                                </div>
                            </section>

                            <!-- Account & Security Section -->
                            <section class="mt-8 px-4" style="margin-top: 32px; padding: 0 16px;">
                                <h2 class="text-sm font-semibold uppercase tracking-wider text-slate-500 mb-3 ml-2"
                                    style="font-size: 13px; margin-bottom: 12px; margin-left: 8px;">Cuenta y Seguridad
                                </h2>
                                <div class="bg-white dark:bg-slate-900 rounded-xl overflow-hidden shadow-sm border border-slate-200 dark:border-slate-800"
                                    style="border-radius: 16px;">

                                    <!-- Privacy & Security -->
                                    <button onclick="app.openSecurityModal()"
                                        class="w-full flex items-center justify-between px-4 py-4 border-b border-slate-100 hover:bg-slate-50 transition-colors bg-transparent border-0 cursor-pointer"
                                        style="display: flex; align-items: center; justify-content: space-between; padding: 16px; border-bottom: 1px solid #f1f5f9; width: 100%;">
                                        <div class="flex items-center gap-3"
                                            style="display: flex; align-items: center; gap: 12px;">
                                            <div class="flex items-center justify-center rounded-lg"
                                                style="width: 40px; height: 40px; background: rgba(16,185,129,0.1); display: flex; align-items: center; justify-content: center;">
                                                <span class="material-icons" style="color: #10B981;">shield</span>
                                            </div>
                                            <span class="text-base font-medium"
                                                style="font-size: 15px; font-weight: 600; color: #212529;">Privacidad y
                                                Seguridad</span>
                                        </div>
                                        <span class="material-icons text-slate-400"
                                            style="color: #9CA3AF;">chevron_right</span>
                                    </button>

                                    <!-- Language & Region -->
                                    <button onclick="app.openPreferencesModal()"
                                        class="w-full flex items-center justify-between px-4 py-4 hover:bg-slate-50 transition-colors bg-transparent border-0 cursor-pointer"
                                        style="display: flex; align-items: center; justify-content: space-between; padding: 16px; width: 100%;">
                                        <div class="flex items-center gap-3"
                                            style="display: flex; align-items: center; gap: 12px;">
                                            <div class="flex items-center justify-center rounded-lg"
                                                style="width: 40px; height: 40px; background: rgba(236,72,153,0.1); display: flex; align-items: center; justify-content: center;">
                                                <span class="material-icons" style="color: #EC4899;">language</span>
                                            </div>
                                            <span class="text-base font-medium"
                                                style="font-size: 15px; font-weight: 600; color: #212529;">Idioma y
                                                Región</span>
                                        </div>
                                        <span class="material-icons text-slate-400"
                                            style="color: #9CA3AF;">chevron_right</span>
                                    </button>

                                </div>
                            </section>

                            <!-- Logout Area -->
                            <section class="mt-12 px-4 pb-12 flex flex-col items-center"
                                style="margin-top: 48px; display: flex; flex-direction: column; align-items: center;">
                                <button type="button" onclick="app.logout()"
                                    class="flex items-center gap-2 px-8 py-3 rounded-full text-red-500 font-semibold transition-colors bg-transparent cursor-pointer"
                                    style="border: 1.5px solid #EF4444; border-radius: 9999px; padding: 12px 32px; display: flex; align-items: center; gap: 8px;">
                                    <span class="material-icons" style="color: #EF4444; font-size: 20px;">logout</span>
                                    <span style="color: #EF4444; font-weight: 600; font-size: 15px;">Cerrar
                                        Sesión</span>
                                </button>
                                <p class="mt-4 text-xs text-slate-400"
                                    style="margin-top: 16px; font-size: 12px; color: #94A3B8;">Talently v2.4.0 (Premium)
                                </p>
                            </section>
                        </main>
                    </div>
                </div>

                <!-- FILTERS VIEW -->
                <div id="filtersView"
                    style="position: absolute; bottom: 0; left: 0; width: 100%; height: 95%; background: #F8F9FA; z-index: 102; transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1); display: flex; flex-direction: column; border-radius: 20px 20px 0 0; box-shadow: 0 -10px 40px rgba(0,0,0,0.1);">

                    <!-- Header -->
                    <div
                        style="display: flex; align-items: center; justify-content: space-between; padding: 16px; flex-shrink: 0; background: #ffffff; border-bottom: 1px solid #e2e8f0; z-index: 10; border-radius: 20px 20px 0 0; box-shadow: 0 1px 3px rgba(0,0,0,0.03);">
                        <button onclick="app.closeFilters()"
                            style="display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; border-radius: 50%; background: none; border: none; cursor: pointer; transition: background 0.15s;"
                            onmouseenter="this.style.background='#f1f5f9'"
                            onmouseleave="this.style.background='transparent'">
                            <span class="material-icons" style="font-size: 24px; color: #1e293b;">close</span>
                        </button>
                        <h2
                            style="font-size: 18px; font-weight: 700; color: #1e293b; letter-spacing: -0.01em; margin: 0;">
                            Filtros</h2>
                        <button onclick="app.clearAllFilters()"
                            style="color: #1392ec; font-size: 14px; font-weight: 700; background: none; border: none; cursor: pointer; letter-spacing: 0.01em; transition: color 0.15s;"
                            onmouseenter="this.style.color='#0e6ba8'" onmouseleave="this.style.color='#1392ec'">
                            Restablecer
                        </button>
                    </div>

                    <!-- Scrollable Content -->
                    <div
                        style="flex: 1; overflow-y: auto; padding: 24px 16px 96px; display: flex; flex-direction: column; gap: 24px;">

                        <!-- 1. Ubicación -->
                        <section>
                            <h3 style="font-size: 18px; font-weight: 700; color: #1e293b; margin: 0 0 12px;">Ubicación
                            </h3>
                            <div style="position: relative;">
                                <div
                                    style="position: absolute; top: 0; bottom: 0; left: 0; display: flex; align-items: center; padding-left: 16px; pointer-events: none;">
                                    <span class="material-icons"
                                        style="font-size: 20px; color: #9ca3af;">location_on</span>
                                </div>
                                <input id="filterLocationInput" type="text" placeholder="Ciudad, país o región..."
                                    style="width: 100%; background: #ffffff; border: 1px solid #e2e8f0; border-radius: 12px; padding: 14px 44px 14px 44px; color: #1e293b; font-size: 14px; font-family: 'Inter', sans-serif; box-sizing: border-box; outline: none; box-shadow: 0 1px 2px rgba(0,0,0,0.05); transition: all 0.15s;"
                                    onfocus="this.style.borderColor='#1392ec';this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.15)'"
                                    onblur="this.style.borderColor='#e2e8f0';this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'">
                                <div style="position: absolute; top: 0; bottom: 0; right: 0; display: flex; align-items: center; padding-right: 16px; cursor: pointer;"
                                    onclick="app.showToast('Geolocalización próximamente')">
                                    <span class="material-icons"
                                        style="font-size: 20px; color: #1392ec;">my_location</span>
                                </div>
                            </div>
                        </section>

                        <!-- 2. Rango Salarial -->
                        <section>
                            <div
                                style="display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 16px;">
                                <h3 style="font-size: 18px; font-weight: 700; color: #1e293b; margin: 0;">Rango Salarial
                                </h3>
                                <span style="font-size: 14px; color: #64748b; font-weight: 500;">Mensual</span>
                            </div>
                            <div
                                style="background: #ffffff; border: 1px solid #e2e8f0; border-radius: 12px; padding: 20px; box-shadow: 0 1px 2px rgba(0,0,0,0.05);">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
                                    <div style="display: flex; flex-direction: column; gap: 4px;">
                                        <label style="font-size: 12px; color: #64748b; font-weight: 500;">Mínimo</label>
                                        <div style="display: flex; align-items: baseline; gap: 2px;">
                                            <span style="font-size: 13px; color: #64748b;">$</span>
                                            <input id="filterSalaryMin" type="number" placeholder="0" min="0" step="500"
                                                style="width: 80px; font-size: 18px; font-weight: 700; color: #1e293b; border: none; outline: none; background: transparent; font-family: 'Inter', sans-serif; -moz-appearance: textfield; appearance: textfield;"
                                                oninput="app.updateCandidateSalarySlider(this, 'minText')">
                                        </div>
                                    </div>
                                    <div style="display: flex; flex-direction: column; gap: 4px; text-align: right;">
                                        <label style="font-size: 12px; color: #64748b; font-weight: 500;">Máximo</label>
                                        <div
                                            style="display: flex; align-items: baseline; gap: 2px; justify-content: flex-end;">
                                            <span style="font-size: 13px; color: #64748b;">$</span>
                                            <input id="filterSalaryMax" type="number" placeholder="10000" min="0"
                                                step="500"
                                                style="width: 80px; font-size: 18px; font-weight: 700; color: #1e293b; border: none; outline: none; background: transparent; font-family: 'Inter', sans-serif; text-align: right; -moz-appearance: textfield; appearance: textfield;"
                                                oninput="app.updateCandidateSalarySlider(this, 'maxText')">
                                        </div>
                                    </div>
                                </div>
                                <style>
                                    .dual-range-slider {
                                        pointer-events: none;
                                        touch-action: none;
                                    }

                                    .dual-range-slider::-webkit-slider-thumb {
                                        pointer-events: auto;
                                        pointer-events: all;
                                        -webkit-appearance: none;
                                        width: 22px;
                                        height: 22px;
                                        background: #ffffff;
                                        border: 2.5px solid #1392ec;
                                        border-radius: 50%;
                                        cursor: pointer;
                                        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                                        margin-top: -9px;
                                        position: relative;
                                        z-index: 10;
                                    }

                                    .dual-range-slider::-moz-range-thumb {
                                        pointer-events: auto;
                                        pointer-events: all;
                                        width: 22px;
                                        height: 22px;
                                        background: #ffffff;
                                        border: 2.5px solid #1392ec;
                                        border-radius: 50%;
                                        cursor: pointer;
                                        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                                        position: relative;
                                        z-index: 10;
                                    }

                                    input[type="range"]::-webkit-slider-runnable-track {
                                        -webkit-appearance: none;
                                        height: 0;
                                    }
                                </style>
                                <div id="candidateSalarySliderTrack"
                                    onclick="app.handleSalaryTrackClick(event, 'candidate')"
                                    style="position: relative; height: 32px; padding: 0; cursor: pointer;">
                                    <div
                                        style="position: absolute; top: 50%; left: 0; right: 0; height: 6px; background: #e2e8f0; border-radius: 3px; transform: translateY(-50%);">
                                    </div>
                                    <div id="candidateSalaryFill"
                                        style="position: absolute; top: 50%; height: 6px; background: #1392ec; border-radius: 3px; transform: translateY(-50%); left: 0%; right: 0%;">
                                    </div>
                                    <input type="range" class="dual-range-slider" id="filterSalaryMinRange" min="0"
                                        max="15000" step="500" value="0"
                                        oninput="app.updateCandidateSalarySlider(this, 'min')"
                                        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; margin: 0; -webkit-appearance: none; appearance: none; background: transparent; z-index: 2;">
                                    <input type="range" class="dual-range-slider" id="filterSalaryMaxRange" min="0"
                                        max="15000" step="500" value="15000"
                                        oninput="app.updateCandidateSalarySlider(this, 'max')"
                                        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; margin: 0; -webkit-appearance: none; appearance: none; background: transparent; z-index: 3;">
                                </div>
                            </div>
                        </section>

                        <!-- 3. Tipo de Jornada -->
                        <section>
                            <h3 style="font-size: 18px; font-weight: 700; color: #1e293b; margin: 0 0 12px;">Tipo de
                                Jornada</h3>
                            <div style="display: flex; gap: 8px; flex-wrap: wrap;" id="filterJobTypeChips">
                                <span style="font-size: 13px; color: #64748b;">Cargando...</span>
                            </div>
                        </section>

                        <!-- 4. Modalidad -->
                        <section>
                            <h3 style="font-size: 18px; font-weight: 700; color: #1e293b; margin: 0 0 12px;">Modalidad
                            </h3>
                            <div style="display: flex; gap: 8px; flex-wrap: wrap;" id="filterModalityChips">
                                <span style="font-size: 13px; color: #64748b;">Cargando...</span>
                            </div>
                        </section>

                        <!-- 5. Categoría -->
                        <section>
                            <h3 style="font-size: 18px; font-weight: 700; color: #1e293b; margin: 0 0 12px;">Categoría
                            </h3>
                            <div style="display: flex; gap: 8px; flex-wrap: wrap;" id="filterCategoryChips">
                                <span style="font-size: 13px; color: #64748b;">Cargando...</span>
                            </div>
                        </section>

                        <!-- 6. Experiencia -->
                        <section>
                            <h3 style="font-size: 18px; font-weight: 700; color: #1e293b; margin: 0 0 12px;">Experiencia
                            </h3>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;"
                                id="filterExperienceGrid">
                                <span style="font-size: 13px; color: #64748b;">Cargando...</span>
                            </div>
                        </section>

                    </div>

                    <!-- Footer - Apply button -->
                    <div
                        style="position: absolute; bottom: 0; left: 0; width: 100%; background: rgba(255,255,255,0.95); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border-top: 1px solid #e2e8f0; padding: 16px; z-index: 20; box-sizing: border-box;">
                        <button onclick="app.applyFilters()"
                            style="width: 100%; background: #1392ec; color: white; font-weight: 800; font-size: 16px; padding: 16px; border-radius: 12px; border: none; cursor: pointer; box-shadow: 0 10px 15px -3px rgba(19,146,236,0.2); display: flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s; font-family: 'Inter', sans-serif;"
                            onmouseenter="this.style.background='#0e6ba8'"
                            onmouseleave="this.style.background='#1392ec'"
                            onmousedown="this.style.transform='scale(0.98)'"
                            onmouseup="this.style.transform='scale(1)'">
                            <span>Ver Ofertas</span>
                            <span class="material-icons" style="font-size: 20px;">arrow_forward</span>
                        </button>
                    </div>
                </div>


                <!-- Swipe View (Default) -->
                <div id="swipeSection" class="app-section active" style="font-family: 'Inter', sans-serif;">
                    <!-- Filter bar -->
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; padding: 8px 24px 12px;">
                        <span id="swipeFilterLabel" style="font-size: 14px; font-weight: 500; color: #6b7280;">Mostrando
                            ofertas</span>
                        <span id="swipeLocationLabel"
                            style="font-size: 14px; font-weight: 500; color: #3b82f6; display: flex; align-items: center; gap: 4px;">
                            <span class="material-icons" style="font-size: 14px;">location_on</span>
                            <span id="swipeLocationText">Todas las ubicaciones</span>
                        </span>
                    </div>

                    <!-- Card Stack -->
                    <div
                        style="position: relative; width: 100%; padding: 0 16px; flex: 1; display: flex; flex-direction: column; justify-content: center; max-height: 60vh; aspect-ratio: 3/4; margin: 0 auto; margin-bottom: 24px;">
                        <!-- Shadow cards (visual stack effect) -->
                        <div id="cardShadow2"
                            style="position: absolute; top: 0; left: 16px; right: 16px; height: 100%; background: #fff; border-radius: 16px; border: 1px solid #f3f4f6; box-shadow: 0 2px 8px rgba(0,0,0,0.03); transform: scale(0.90) translateY(24px); opacity: 0.6; z-index: 10;">
                        </div>
                        <div id="cardShadow1"
                            style="position: absolute; top: 0; left: 16px; right: 16px; height: 100%; background: #fff; border-radius: 16px; border: 1px solid #f3f4f6; box-shadow: 0 4px 12px rgba(0,0,0,0.05); transform: scale(0.95) translateY(12px); opacity: 0.8; z-index: 20;">
                        </div>
                        <!-- Active card -->
                        <div class="card-stack" id="cardStack"
                            style="position: relative; z-index: 30; width: 100%; height: 100%;">
                            <!-- Cards rendered by JS -->
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="action-buttons"
                        style="display: flex; align-items: center; justify-content: center; gap: 32px; padding: 0 16px 16px;">
                        <button onclick="app.swipeLeft()"
                            style="position: relative; display: flex; align-items: center; justify-content: center; width: 64px; height: 64px; border-radius: 50%; background: #fff; border: 1px solid #f3f4f6; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.05); transition: all 0.2s;"
                            onmouseover="this.style.borderColor='#fecaca'; this.style.boxShadow='0 8px 20px rgba(0,0,0,0.08)'"
                            onmouseout="this.style.borderColor='#f3f4f6'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.05)'">
                            <span class="material-icons"
                                style="font-size: 28px; color: #9ca3af; transition: color 0.2s;"
                                onmouseover="this.style.color='#ef4444'"
                                onmouseout="this.style.color='#9ca3af'">close</span>
                        </button>
                        <button onclick="app.undoSwipe()"
                            style="display: flex; align-items: center; justify-content: center; width: 48px; height: 48px; border-radius: 50%; background: #fff; border: 1px solid #f3f4f6; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.05); transition: all 0.2s;"
                            onmouseover="this.style.borderColor='#fde68a'"
                            onmouseout="this.style.borderColor='#f3f4f6'">
                            <span class="material-icons" style="font-size: 20px; color: #eab308;">replay</span>
                        </button>
                        <button onclick="app.swipeRight()"
                            style="position: relative; display: flex; align-items: center; justify-content: center; width: 64px; height: 64px; border-radius: 50%; background: #3b82f6; border: none; cursor: pointer; box-shadow: 0 8px 20px rgba(59,130,246,0.3); color: #fff; transition: all 0.2s; transform: translateY(0);"
                            onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 12px 28px rgba(59,130,246,0.4)'"
                            onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 20px rgba(59,130,246,0.3)'">
                            <span class="material-icons" style="font-size: 28px;">favorite</span>
                        </button>
                    </div>
                </div>

                <!-- Matches View (Stitch) -->
                <div id="matchesSection" class="app-section"
                    style="font-family: 'Inter', sans-serif; background: #F8FAFC; flex-direction: column; overflow-y: auto;">

                    <!-- Sticky Header -->
                    <div
                        style="padding: 48px 24px 16px; background: rgba(255,255,255,0.97); position: sticky; top: 0; z-index: 10; backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border-bottom: 1px solid #f1f5f9; box-shadow: 0 1px 3px rgba(0,0,0,0.04);">
                        <h1
                            style="font-size: 24px; font-weight: 700; color: #0f172a; margin: 0; letter-spacing: -0.025em;">
                            Mis Matches</h1>
                    </div>

                    <!-- Nuevos Matches -->
                    <div style="padding: 20px 24px 0;">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px;">
                            <span style="font-size: 14px; font-weight: 600; color: #0f172a;">Nuevos Matches</span>
                            <span id="newMatchesBadge"
                                style="display: none; background: linear-gradient(135deg, #1392ec, #0b6cb3); color: #fff; font-size: 11px; font-weight: 600; padding: 2px 10px; border-radius: 999px;">0
                                Nuevos</span>
                        </div>
                        <div id="matchesRow"
                            style="display: flex; gap: 16px; overflow-x: auto; padding-bottom: 16px; scrollbar-width: none;">
                            <!-- JS populated -->
                        </div>
                    </div>

                    <!-- Search -->
                    <div style="padding: 0 24px 16px;">
                        <div style="position: relative;">
                            <span class="material-icons"
                                style="position: absolute; left: 14px; top: 50%; transform: translateY(-50%); font-size: 20px; color: #94a3b8;">search</span>
                            <input id="matchesSearchInput" type="text" placeholder="Buscar empresa o puesto..."
                                oninput="app.filterMatchConversations(this.value)"
                                style="width: 100%; padding: 12px 16px 12px 44px; border-radius: 14px; border: 1.5px solid #e2e8f0; background: #fff; font-size: 14px; color: #0f172a; outline: none; box-sizing: border-box; font-family: 'Inter', sans-serif; transition: border-color 0.2s;"
                                onfocus="this.style.borderColor='#1392ec'" onblur="this.style.borderColor='#e2e8f0'">
                        </div>
                    </div>

                    <!-- Conversaciones -->
                    <div
                        style="flex: 1; background: #fff; border-radius: 20px 20px 0 0; box-shadow: 0 -4px 24px rgba(0,0,0,0.04); overflow-y: auto;">
                        <div style="padding: 20px 24px 12px;">
                            <span style="font-size: 14px; font-weight: 600; color: #0f172a;">Conversaciones</span>
                        </div>
                        <div id="conversationsList">
                            <!-- JS populated -->
                            <div style="text-align: center; color: #94a3b8; padding: 40px 24px; font-size: 14px;">
                                <span class="material-icons"
                                    style="font-size: 48px; color: #cbd5e1; display: block; margin-bottom: 12px;">forum</span>
                                No tienes mensajes aún
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chat View (Stitch) -->
                <div id="chatSection" class="app-section"
                    style="font-family: 'Inter', sans-serif; flex-direction: column; background: #F8F9FA; overflow: hidden;">

                    <!-- Header -->
                    <header
                        style="flex-shrink: 0; background: #ffffff; border-bottom: 1px solid #f3f4f6; padding: 16px; display: flex; align-items: center; justify-content: space-between; gap: 12px; position: sticky; top: 0; z-index: 50; box-shadow: 0 1px 2px rgba(0,0,0,0.02);">
                        <div style="display: flex; align-items: center; gap: 12px; flex: 1; overflow: hidden;">
                            <button onclick="app.showAppSection('matchesSection')"
                                style="color: #9CA3AF; background: none; border: none; cursor: pointer; padding: 0; display: flex; align-items: center; transition: color 0.15s;"
                                onmouseenter="this.style.color='#1392ec'" onmouseleave="this.style.color='#9CA3AF'">
                                <span class="material-icons" style="font-size: 28px;">chevron_left</span>
                            </button>
                            <div style="display: flex; align-items: center; gap: 12px; overflow: hidden;">
                                <div style="position: relative; flex-shrink: 0;">
                                    <img class="chat-avatar"
                                        src="https://ui-avatars.com/api/?name=T&background=1392ec&color=fff"
                                        alt="Avatar"
                                        style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover; border: 1px solid #f3f4f6;">
                                    <div id="chatOnlineDot"
                                        style="position: absolute; bottom: -1px; right: -1px; width: 12px; height: 12px; background: #22c55e; border: 2px solid #ffffff; border-radius: 50%; display: none;">
                                    </div>
                                </div>
                                <div style="display: flex; flex-direction: column; overflow: hidden;">
                                    <h2 class="chat-company-name"
                                        style="font-size: 16px; font-weight: 700; line-height: 1.2; margin: 0; color: #343A40; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                        TechCorp</h2>
                                    <p class="chat-company-role"
                                        style="font-size: 12px; color: rgba(52,58,64,0.7); margin: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-weight: 500;">
                                        Senior Full Stack Developer</p>
                                    <div id="chatOnlineStatus"
                                        style="display: none; font-size: 11px; color: #22c55e; font-weight: 600;">● En
                                        línea</div>
                                </div>
                            </div>
                        </div>
                        <button id="chatViewOfferBtn" onclick="app.viewOfferFromChat && app.viewOfferFromChat()"
                            style="flex-shrink: 0; padding: 6px 12px; border-radius: 9999px; border: 1px solid rgba(19,146,236,0.2); background: rgba(19,146,236,0.05); color: #1392ec; font-size: 12px; font-weight: 700; cursor: pointer; font-family: 'Inter', sans-serif; transition: background 0.15s;"
                            onmouseenter="this.style.background='rgba(19,146,236,0.1)'"
                            onmouseleave="this.style.background='rgba(19,146,236,0.05)'">
                            Ver Oferta
                        </button>
                    </header>

                    <!-- Messages Area -->
                    <main id="chatMessages"
                        style="flex: 1; overflow-y: auto; padding: 16px 16px 80px; display: flex; flex-direction: column; gap: 20px; background: #F8F9FA; scrollbar-width: thin; scrollbar-color: #dee2e6 transparent;">
                        <!-- JS populated -->
                    </main>

                    <!-- Suggestions -->
                    <div id="chatSuggestions"
                        style="display: none; padding: 8px 16px; gap: 8px; overflow-x: auto; scrollbar-width: none; background: #ffffff; border-top: 1px solid #f3f4f6;">
                        <!-- JS populated -->
                    </div>

                    <!-- Input Footer -->
                    <footer
                        style="flex-shrink: 0; background: #ffffff; border-top: 1px solid #f3f4f6; padding: 12px 12px 24px; position: sticky; bottom: 0; z-index: 50; box-shadow: 0 -4px 6px -1px rgba(0,0,0,0.02);">
                        <div style="display: flex; align-items: flex-end; gap: 12px; max-width: 100%;">
                            <button id="chatAttachBtn"
                                style="height: 44px; width: 44px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: none; border: none; color: #9CA3AF; cursor: pointer; transition: all 0.15s;"
                                onmouseenter="this.style.background='#f3f4f6';this.style.color='#1392ec'"
                                onmouseleave="this.style.background='none';this.style.color='#9CA3AF'">
                                <span class="material-icons" style="font-size: 24px;">add_circle</span>
                            </button>
                            <div style="flex: 1; background: #ffffff; border-radius: 24px; min-height: 44px; display: flex; align-items: center; padding: 8px 16px; border: 1px solid #E5E7EB; transition: border-color 0.2s, box-shadow 0.2s;"
                                onfocusin="this.style.borderColor='rgba(19,146,236,0.5)';this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.08)'"
                                onfocusout="this.style.borderColor='#E5E7EB';this.style.boxShadow='none'">
                                <input id="chatInput" type="text" placeholder="Escribe un mensaje..."
                                    onkeypress="if(event.key==='Enter')app.sendMessageWithReceipts()"
                                    style="width: 100%; background: transparent; border: none; font-size: 16px; color: #212529; outline: none; font-family: 'Inter', sans-serif; font-weight: 500; padding: 0;" />
                            </div>
                            <button class="chat-send-btn" onclick="app.sendMessageWithReceipts()"
                                style="height: 44px; width: 44px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: #1392ec; color: #ffffff; border: none; cursor: pointer; box-shadow: 0 4px 12px rgba(19,146,236,0.25); transition: all 0.2s; transform: translateY(0);"
                                onmouseenter="this.style.background='#0f7fd0';this.style.transform='translateY(-2px)'"
                                onmouseleave="this.style.background='#1392ec';this.style.transform='translateY(0)'">
                                <span class="material-icons" style="font-size: 20px; margin-left: 2px;">send</span>
                            </button>
                        </div>
                    </footer>
                </div>

                <!-- Settings View -->
                <!-- CANDIDATE PROFILE (Stitch) -->
                <div id="settingsSection" class="app-section"
                    style="font-family: 'Inter', sans-serif; background: #f3f4f6; display: flex; flex-direction: column;">

                    <!-- Sticky Header -->
                    <div
                        style="position: sticky; top: 0; z-index: 50; background: #ffffff; border-bottom: 1px solid #f1f5f9; padding: 12px 16px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 1px 2px rgba(0,0,0,0.04);">
                        <h1
                            style="font-size: 20px; font-weight: 700; letter-spacing: -0.025em; color: #1e293b; margin: 0;">
                            Mi Perfil</h1>
                        <button onclick="app.openSettingsModal()"
                            style="padding: 8px; border-radius: 50%; background: none; border: none; cursor: pointer; color: #4b5563; transition: background 0.15s;"
                            onmouseenter="this.style.background='#f8fafc'" onmouseleave="this.style.background='none'">
                            <span class="material-icons" style="font-size: 24px;">settings</span>
                        </button>
                    </div>

                    <!-- Scrollable Content -->
                    <div
                        style="flex: 1; overflow-y: auto; -ms-overflow-style: none; scrollbar-width: none; padding-bottom: 96px;">

                        <!-- Profile Hero Card -->
                        <div
                            style="background: #ffffff; padding: 24px 16px 24px; margin-bottom: 16px; border-radius: 0 0 24px 24px; box-shadow: 0 4px 20px -2px rgba(0,0,0,0.05);">
                            <div style="display: flex; flex-direction: column; align-items: center;">
                                <!-- Avatar with Edit Badge -->
                                <div style="position: relative; margin-bottom: 16px; cursor: pointer;">
                                    <label for="avatarFileInput" style="cursor: pointer; display: inline-block;">
                                        <div
                                            style="width: 96px; height: 96px; border-radius: 50%; overflow: hidden; border: 4px solid #f8fafc; box-shadow: 0 1px 3px rgba(0,0,0,0.08);">
                                            <img id="profileAvatarImg" alt="Tu perfil"
                                                src="https://ui-avatars.com/api/?name=User&background=1392ec&color=fff&size=200"
                                                style="width: 100%; height: 100%; object-fit: cover;">
                                        </div>
                                        <div
                                            style="position: absolute; bottom: 0; right: 0; background: #1392ec; color: #ffffff; border-radius: 50%; padding: 6px; box-shadow: 0 2px 6px rgba(0,0,0,0.15); border: 2px solid #ffffff; display: flex; align-items: center; justify-content: center;">
                                            <span class="material-icons"
                                                style="font-size: 16px; font-weight: 700;">edit</span>
                                        </div>
                                    </label>
                                    <input type="file" id="avatarFileInput" accept="image/*" capture="environment"
                                        onchange="app.handleAvatarUpload(event)" style="display: none;">
                                </div>
                                <!-- Name & Role -->
                                <h2 id="profileDisplayName"
                                    style="font-size: 24px; font-weight: 700; color: #1e293b; text-align: center; margin: 0 0 4px;">
                                    Usuario</h2>
                                <p id="profileDisplayTitle"
                                    style="color: #64748b; font-size: 14px; font-weight: 500; text-align: center; margin: 0 0 24px;">
                                    Sin cargo definido</p>
                                <!-- Top Tags (populated by JS) -->
                                <div id="profileTopTags"
                                    style="display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; margin-bottom: 24px;">
                                </div>
                                <!-- Action Buttons -->
                                <div style="display: flex; width: 100%; gap: 12px; max-width: 384px; padding: 0 8px;">
                                    <button onclick="app.openPreviewModal()"
                                        style="flex: 1; background: #f1f5f9; color: #475569; font-weight: 600; padding: 10px 16px; border-radius: 16px; border: none; cursor: pointer; font-size: 14px; font-family: 'Inter', sans-serif; transition: all 0.1s;"
                                        onmousedown="this.style.transform='scale(0.95)'"
                                        onmouseup="this.style.transform='scale(1)'"
                                        onmouseleave="this.style.transform='scale(1)'">
                                        Vista Previa
                                    </button>
                                    <button onclick="app.shareProfile && app.shareProfile()"
                                        style="flex: 1; background: #1392ec; color: #ffffff; font-weight: 600; padding: 10px 16px; border-radius: 16px; border: none; cursor: pointer; font-size: 14px; font-family: 'Inter', sans-serif; box-shadow: 0 4px 12px rgba(19,146,236,0.2); transition: all 0.1s;"
                                        onmousedown="this.style.transform='scale(0.95)'"
                                        onmouseup="this.style.transform='scale(1)'"
                                        onmouseleave="this.style.transform='scale(1)'">
                                        Compartir
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Segmented Control Tabs -->
                        <div style="padding: 0 16px; margin-bottom: 24px;">
                            <div
                                style="background: rgba(226,232,240,0.6); padding: 4px; border-radius: 16px; display: flex; align-items: center;">
                                <button id="tab-cv" onclick="app.switchProfileTab('cv')"
                                    style="flex: 1; padding: 8px; font-size: 14px; font-weight: 600; border-radius: 12px; background: #ffffff; color: #1e293b; border: none; cursor: pointer; box-shadow: 0 1px 2px rgba(0,0,0,0.05); font-family: 'Inter', sans-serif; transition: all 0.2s; text-align: center;">
                                    CV / Perfil
                                </button>
                                <button id="tab-activity" onclick="app.switchProfileTab('activity')"
                                    style="flex: 1; padding: 8px; font-size: 14px; font-weight: 500; border-radius: 12px; background: transparent; color: #64748b; border: none; cursor: pointer; font-family: 'Inter', sans-serif; transition: all 0.2s; text-align: center;">
                                    Actividad
                                </button>
                            </div>
                        </div>

                        <!-- Tab Content: CV -->
                        <div id="profile-content-cv" style="padding: 0 16px;">
                            <div style="display: flex; flex-direction: column; gap: 16px;">

                                <!-- CV Document Card -->
                                <div id="cvDocumentCard"
                                    style="background: #ffffff; padding: 20px; border-radius: 20px; box-shadow: 0 4px 20px -2px rgba(0,0,0,0.05);">
                                    <div
                                        style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                                        <h3
                                            style="font-size: 18px; font-weight: 700; color: #1e293b; margin: 0; display: flex; align-items: center; gap: 8px;">
                                            <span class="material-icons" style="color: #1392ec;">description</span>
                                            Currículum Vitae
                                        </h3>
                                        <button onclick="document.getElementById('profileCvInput').click()"
                                            id="profileCvUploadBtn"
                                            style="color: #1392ec; background: none; border: none; cursor: pointer; padding: 2px; transition: opacity 0.15s; display: none;"
                                            title="Subir nuevo CV" onmouseenter="this.style.opacity='0.7'"
                                            onmouseleave="this.style.opacity='1'">
                                            <span class="material-icons" style="font-size: 20px;">upload</span>
                                        </button>
                                        <input type="file" id="profileCvInput" accept=".pdf,.doc,.docx"
                                            style="display: none;" onchange="app.handleProfileCVUpload(event)">
                                    </div>

                                    <!-- CV View State (when CV exists) -->
                                    <div id="cvViewState"
                                        style="display: none; align-items: center; justify-content: space-between; padding: 16px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px;">
                                        <div style="display: flex; align-items: center; gap: 12px; overflow: hidden;">
                                            <div
                                                style="height: 40px; width: 40px; background: #fff; border-radius: 8px; border: 1px solid #f1f5f9; display: flex; align-items: center; justify-content: center; color: #ef4444; flex-shrink: 0; box-shadow: 0 1px 2px rgba(0,0,0,0.05);">
                                                <span class="material-icons">picture_as_pdf</span>
                                            </div>
                                            <div style="min-width: 0;">
                                                <p
                                                    style="font-size: 14px; font-weight: 700; color: #0f172a; margin: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                                                    Mi_Curriculum.pdf</p>
                                                <p style="font-size: 12px; color: #64748b; margin: 2px 0 0;">Documento
                                                    subido</p>
                                            </div>
                                        </div>
                                        <div style="display: flex; gap: 8px;">
                                            <button onclick="app.viewProfileCV()"
                                                style="padding: 8px 16px; background: #1392ec; color: white; border: none; border-radius: 8px; font-weight: 600; font-size: 13px; cursor: pointer; font-family: 'Inter', sans-serif;">
                                                Ver CV
                                            </button>
                                            <button onclick="app.deleteProfileCV()"
                                                style="padding: 8px; color: #94a3b8; border: 1px solid #e2e8f0; border-radius: 8px; background: white; cursor: pointer; display: flex; align-items: center;">
                                                <span class="material-icons" style="font-size: 18px;">delete</span>
                                            </button>
                                        </div>
                                    </div>

                                    <!-- CV Empty State (when no CV exists) -->
                                    <div id="cvEmptyState">
                                        <label for="profileCvInput"
                                            style="display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%; padding: 24px; border: 2px dashed #cbd5e1; border-radius: 12px; background: #f8fafc; cursor: pointer; transition: all 0.2s; box-sizing: border-box;"
                                            ondragover="event.preventDefault(); this.style.borderColor='#1392ec'; this.style.background='#eff6ff';"
                                            ondragleave="this.style.borderColor='#cbd5e1'; this.style.background='#f8fafc';"
                                            ondrop="event.preventDefault(); this.style.borderColor='#cbd5e1'; this.style.background='#f8fafc'; const f=event.dataTransfer.files[0]; if(f){const dt=new DataTransfer(); dt.items.add(f); document.getElementById('profileCvInput').files=dt.files; app.handleProfileCVUpload({target:{files:[f]}});}">
                                            <div
                                                style="width: 48px; height: 48px; background: #e0f2fe; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 12px;">
                                                <span class="material-icons"
                                                    style="color: #0284c7; font-size: 24px;">cloud_upload</span>
                                            </div>
                                            <p
                                                style="margin: 0 0 4px; font-size: 14px; color: #0f172a; font-weight: 600; text-align: center;">
                                                Sube tu Currículum
                                            </p>
                                            <p style="font-size: 12px; color: #64748b; margin: 0; text-align: center;">
                                                PDF o DOCX. Max 5MB.
                                            </p>
                                        </label>
                                    </div>

                                    <!-- Uploading State -->
                                    <div id="cvUploadingState"
                                        style="display: none; flex-direction: column; align-items: center; justify-content: center; padding: 24px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px;">
                                        <span class="material-icons rotating"
                                            style="font-size: 32px; color: #1392ec; margin-bottom: 12px;">sync</span>
                                        <p style="font-size: 14px; font-weight: 600; color: #0f172a; margin: 0;">
                                            Subiendo documento...</p>
                                    </div>
                                </div>

                                <!-- Video Presentation Card -->
                                <div
                                    style="background: #ffffff; padding: 20px; border-radius: 20px; box-shadow: 0 4px 20px -2px rgba(0,0,0,0.05);">
                                    <div
                                        style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                                        <h3 style="font-size: 18px; font-weight: 700; color: #1e293b; margin: 0;">Video
                                            Presentación</h3>
                                        <button onclick="app.requestVideoUpload()"
                                            style="color: #1392ec; background: none; border: none; cursor: pointer; padding: 2px; transition: opacity 0.15s;"
                                            onmouseenter="this.style.opacity='0.7'"
                                            onmouseleave="this.style.opacity='1'">
                                            <span class="material-icons" style="font-size: 20px;">upload</span>
                                        </button>
                                    </div>
                                    <!-- Video Area/Empty State -->
                                    <div id="videoPitchContainer"
                                        style="width: 100%; aspect-ratio: 9/16; max-height: 480px; background: #f8fafc; border: 2px dashed #cbd5e1; border-radius: 16px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; overflow: hidden; margin: 0 auto; max-width: 280px; text-align: center; padding: 16px;">

                                        <!-- Empty State Content -->
                                        <div id="videoPitchEmptyState"
                                            style="display: flex; flex-direction: column; align-items: center; width: 100%;">
                                            <div
                                                style="width: 64px; height: 64px; background: #e0f2fe; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 16px;">
                                                <span class="material-icons"
                                                    style="color: #0284c7; font-size: 32px;">videocam</span>
                                            </div>
                                            <h4
                                                style="font-size: 16px; font-weight: 600; color: #0f172a; margin: 0 0 8px;">
                                                Preséntate en video</h4>
                                            <p
                                                style="font-size: 13px; color: #64748b; margin: 0 0 20px; text-align: center;">
                                                Destaca tu perfil grabando un video corto (máx 1min) contándonos sobre
                                                ti.</p>
                                            <button onclick="app.requestVideoUpload()"
                                                style="background: linear-gradient(135deg, #1392ec 0%, #2dd4bf 100%); color: white; border: none; padding: 12px 24px; border-radius: 9999px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                                                <span class="material-icons" style="font-size: 20px;">add_a_photo</span>
                                                Grabar o Subir
                                            </button>
                                            <input type="file" id="videoPitchInput"
                                                accept="video/mp4,video/x-m4v,video/*" style="display: none;"
                                                onchange="app.handleVideoPitchUpload(event)">
                                        </div>

                                        <!-- Player Content (Hidden initially) -->
                                        <video id="videoPitchPlayer"
                                            style="display: none; width: 100%; height: 100%; object-fit: cover; border-radius: 14px;"
                                            playsinline preload="metadata"
                                            onclick="app.toggleVideoPitchPlayback()"></video>

                                        <!-- Player Controls Overlay (Hidden initially) -->
                                        <div id="videoPitchControls"
                                            style="display: none; position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 40%); flex-direction: column; justify-content: flex-end; padding: 16px;">
                                            <button id="videoPitchPlayBtn" onclick="app.toggleVideoPitchPlayback()"
                                                style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 64px; height: 64px; border-radius: 50%; background: rgba(0,0,0,0.4); backdrop-filter: blur(4px); border: 2px solid white; color: white; display: flex; align-items: center; justify-content: center; cursor: pointer;">
                                                <span class="material-icons" style="font-size: 40px;">play_arrow</span>
                                            </button>
                                            <button onclick="app.requestVideoUpload()"
                                                style="position: absolute; top: 16px; right: 16px; width: 36px; height: 36px; border-radius: 50%; background: rgba(255,255,255,0.2); backdrop-filter: blur(4px); border: 1px solid rgba(255,255,255,0.3); color: white; display: flex; align-items: center; justify-content: center; cursor: pointer;">
                                                <span class="material-icons" style="font-size: 18px;">edit</span>
                                            </button>
                                            <div
                                                style="display: flex; align-items: center; gap: 8px; width: 100%; padding-bottom: 8px;">
                                                <span id="videoPitchTime"
                                                    style="color: white; font-size: 12px; font-weight: 500; text-shadow: 0 1px 2px rgba(0,0,0,0.8);">0:00</span>
                                                <div style="flex: 1; height: 4px; background: rgba(255,255,255,0.3); border-radius: 2px; overflow: hidden; cursor: pointer;"
                                                    onclick="app.seekVideoPitch(event)">
                                                    <div id="videoPitchProgress"
                                                        style="width: 0%; height: 100%; background: #1392ec;"></div>
                                                </div>
                                                <span id="videoPitchDuration"
                                                    style="color: white; font-size: 12px; font-weight: 500; text-shadow: 0 1px 2px rgba(0,0,0,0.8);">0:00</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Sobre mí Card -->
                                <div
                                    style="background: #ffffff; padding: 20px; border-radius: 20px; box-shadow: 0 4px 20px -2px rgba(0,0,0,0.05);">
                                    <div
                                        style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
                                        <h3 style="font-size: 18px; font-weight: 700; color: #1e293b; margin: 0;">Sobre
                                            mí</h3>
                                        <button onclick="app.openEditPersonal()"
                                            style="color: #1392ec; background: none; border: none; cursor: pointer; padding: 2px; transition: opacity 0.15s;"
                                            onmouseenter="this.style.opacity='0.7'"
                                            onmouseleave="this.style.opacity='1'">
                                            <span class="material-icons" style="font-size: 20px;">edit</span>
                                        </button>
                                    </div>
                                    <p id="profileBioText"
                                        style="color: #4b5563; font-size: 14px; line-height: 1.6; margin: 0; margin-bottom: 16px;">
                                        Sin
                                        descripción.</p>

                                    <h4 style="font-size: 14px; font-weight: 600; color: #1e293b; margin: 0 0 8px;">
                                        Ubicación Precisa (Geolocalización)</h4>
                                    <p
                                        style="font-size: 13px; color: var(--text-secondary); margin-bottom: 12px; line-height: 1.4;">
                                        Permite a las empresas filtrarte y encontrarte por proximidad a sus oficinas.
                                        <br><span id="userGeoStatus" style="font-weight: 500; color: #64748b;">Estado:
                                            No guardada</span>
                                    </p>
                                    <button onclick="app.requestDeviceLocation('candidate')" type="button"
                                        style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 8px; padding: 12px; background: #e0f2fe; color: #0284c7; border: 1px dashed #7dd3fc; border-radius: 12px; font-weight: 600; font-size: 14px; cursor: pointer; transition: all 0.2s;">
                                        <span class="material-icons" style="font-size: 18px;">my_location</span>
                                        Actualizar Mi Ubicación
                                    </button>
                                </div>

                                <!-- Experiencia Card -->
                                <div
                                    style="background: #ffffff; padding: 20px; border-radius: 20px; box-shadow: 0 4px 20px -2px rgba(0,0,0,0.05);">
                                    <div
                                        style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                                        <h3 style="font-size: 18px; font-weight: 700; color: #1e293b; margin: 0;">
                                            Experiencia</h3>
                                        <button onclick="app.addExperience()"
                                            style="color: #1392ec; background: none; border: none; cursor: pointer; padding: 2px; transition: opacity 0.15s;"
                                            onmouseenter="this.style.opacity='0.7'"
                                            onmouseleave="this.style.opacity='1'">
                                            <span class="material-icons" style="font-size: 24px;">add_circle</span>
                                        </button>
                                    </div>
                                    <div id="experienceList" style="display: flex; flex-direction: column; gap: 24px;">
                                        <!-- Rendered by JS -->
                                    </div>
                                </div>

                                <!-- Educación Card -->
                                <div
                                    style="background: #ffffff; padding: 20px; border-radius: 20px; box-shadow: 0 4px 20px -2px rgba(0,0,0,0.05);">
                                    <div
                                        style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                                        <h3 style="font-size: 18px; font-weight: 700; color: #1e293b; margin: 0;">
                                            Educación</h3>
                                        <button onclick="app.addEducation()"
                                            style="color: #1392ec; background: none; border: none; cursor: pointer; padding: 2px; transition: opacity 0.15s;"
                                            onmouseenter="this.style.opacity='0.7'"
                                            onmouseleave="this.style.opacity='1'">
                                            <span class="material-icons" style="font-size: 24px;">add_circle</span>
                                        </button>
                                    </div>
                                    <div id="educationList" style="display: flex; flex-direction: column; gap: 24px;">
                                        <!-- Rendered by JS -->
                                    </div>
                                </div>

                                <!-- Habilidades Card -->
                                <div
                                    style="background: #ffffff; padding: 20px; border-radius: 20px; box-shadow: 0 4px 20px -2px rgba(0,0,0,0.05); margin-bottom: 24px;">
                                    <div
                                        style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                                        <h3 style="font-size: 18px; font-weight: 700; color: #1e293b; margin: 0;">
                                            Habilidades</h3>
                                        <button onclick="app.openEditSkills()"
                                            style="color: #1392ec; background: none; border: none; cursor: pointer; padding: 2px; transition: opacity 0.15s;"
                                            onmouseenter="this.style.opacity='0.7'"
                                            onmouseleave="this.style.opacity='1'">
                                            <span class="material-icons" style="font-size: 20px;">edit</span>
                                        </button>
                                    </div>
                                    <div id="profileSkillsDisplay" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                        <!-- Rendered by JS -->
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- Tab Content: Activity -->
                        <div id="profile-content-activity" style="display: none; padding: 16px 24px 0;">
                            <div
                                style="background: #ffffff; padding: 20px; border-radius: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); border: 1px solid #E5E7EB;">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                                    <h3 style="font-weight: 700; font-size: 18px; margin: 0; color: #1F2937;">
                                        Estadísticas</h3>
                                    <span style="font-size: 12px; color: #6B7280;">Últimos 7 días</span>
                                </div>

                                <div class="stats-card" style="border: none; padding: 0;">
                                    <div class="stats-chart" id="activity-chart">
                                        <div class="chart-bar" style="height: 5%;" data-value="0"></div>
                                        <div class="chart-bar" style="height: 5%;" data-value="0"></div>
                                        <div class="chart-bar" style="height: 5%;" data-value="0"></div>
                                        <div class="chart-bar" style="height: 5%;" data-value="0"></div>
                                        <div class="chart-bar" style="height: 5%;" data-value="0"></div>
                                        <div class="chart-bar" style="height: 5%;" data-value="0"></div>
                                        <div class="chart-bar" style="height: 5%;" data-value="0"></div>
                                    </div>
                                    <div class="chart-labels" id="activity-chart-labels">
                                        <span class="chart-label">Lun</span>
                                        <span class="chart-label">Mar</span>
                                        <span class="chart-label">Mié</span>
                                        <span class="chart-label">Jue</span>
                                        <span class="chart-label">Vie</span>
                                        <span class="chart-label">Sáb</span>
                                        <span class="chart-label">Dom</span>
                                    </div>
                                </div>

                                <!-- Stats Summary -->
                                <div
                                    style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-top: 16px;">
                                    <div style="text-align: center; padding: 12px 0;">
                                        <div id="stat-views" style="font-size: 24px; font-weight: 700; color: #1F2937;">
                                            0</div>
                                        <div style="font-size: 12px; color: #6B7280; margin-top: 4px;">Vistas</div>
                                    </div>
                                    <div style="text-align: center; padding: 12px 0;">
                                        <div id="stat-matches"
                                            style="font-size: 24px; font-weight: 700; color: #1F2937;">0</div>
                                        <div style="font-size: 12px; color: #6B7280; margin-top: 4px;">Matches</div>
                                    </div>
                                    <div style="text-align: center; padding: 12px 0;">
                                        <div id="stat-response-rate"
                                            style="font-size: 24px; font-weight: 700; color: #1F2937;">0%</div>
                                        <div style="font-size: 12px; color: #6B7280; margin-top: 4px;">Tasa resp.</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Ranking Card -->
                            <div
                                style="background: #ffffff; padding: 20px; border-radius: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); border: 1px solid #E5E7EB; margin-top: 16px;">
                                <h4 style="font-size: 16px; font-weight: 700; margin: 0 0 16px; color: #1F2937;">Tu
                                    Ranking</h4>
                                <div class="ranking-list">
                                    <div class="ranking-item">
                                        <div class="ranking-position gold">1</div>
                                        <div class="ranking-info">
                                            <div class="ranking-title">Tasa de Match</div>
                                            <div class="ranking-subtitle" id="rank-match-subtitle">¡Sigue mejorando!
                                            </div>
                                        </div>
                                        <div class="ranking-value" id="rank-match-rate">0%</div>
                                    </div>
                                    <div class="ranking-item">
                                        <div class="ranking-position silver">2</div>
                                        <div class="ranking-info">
                                            <div class="ranking-title">Tiempo de Respuesta</div>
                                            <div class="ranking-subtitle">Promedio de respuesta</div>
                                        </div>
                                        <div class="ranking-value" id="rank-response-time">-</div>
                                    </div>
                                    <div class="ranking-item" onclick="app.showProfileCompletenessDetail()"
                                        style="cursor: pointer;">
                                        <div class="ranking-position bronze">3</div>
                                        <div class="ranking-info">
                                            <div class="ranking-title">Perfil Completo</div>
                                            <div class="ranking-subtitle" id="rank-profile-subtitle">0% completado</div>
                                        </div>
                                        <div class="ranking-value" id="rank-profile-complete">0%</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- Bottom Navigation (Stitch) -->
                <div class="bottom-nav"
                    style="position: fixed; bottom: 0; width: 100%; background: #ffffff; border-top: 1px solid #f1f5f9; padding: 8px 8px 0; z-index: 50; font-family: 'Inter', sans-serif;">
                    <div
                        style="display: flex; justify-content: space-around; align-items: flex-end; width: 100%; padding-bottom: 8px;">
                        <!-- Swipe -->
                        <a onclick="app.showAppSection('swipeSection')" id="navSwipe"
                            style="display: flex; flex-direction: column; align-items: center; gap: 4px; padding: 8px; cursor: pointer; text-decoration: none; width: 64px;">
                            <div style="color: #9ca3af; transition: color 0.2s;">
                                <span class="material-icons" style="font-size: 26px; display: block;">style</span>
                            </div>
                            <span style="font-size: 10px; font-weight: 500; color: #9ca3af;">Swipe</span>
                        </a>
                        <!-- Matches -->
                        <a onclick="app.showAppSection('matchesSection')" id="navMatches"
                            style="display: flex; flex-direction: column; align-items: center; gap: 4px; padding: 8px; cursor: pointer; text-decoration: none; width: 64px; position: relative;">
                            <div style="color: #9ca3af; transition: color 0.2s;">
                                <span class="material-icons" style="font-size: 26px; display: block;">favorite</span>
                            </div>
                            <span id="candidateMatchesBadge"
                                style="display: none; position: absolute; top: 4px; right: 4px; width: 16px; height: 16px; background: #ef4444; color: white; border-radius: 50%; font-size: 9px; font-weight: 700; align-items: center; justify-content: center; border: 2px solid #fff;">0</span>
                            <span style="font-size: 10px; font-weight: 500; color: #9ca3af;">Matches</span>
                        </a>

                        <!-- Perfil (Active) -->
                        <a onclick="app.showAppSection('settingsSection')" id="navProfile"
                            style="display: flex; flex-direction: column; align-items: center; gap: 4px; padding: 8px; cursor: pointer; text-decoration: none; width: 64px;">
                            <div style="color: #1392ec;">
                                <span class="material-icons" style="font-size: 26px; display: block;">person</span>
                            </div>
                            <span style="font-size: 10px; font-weight: 700; color: #1392ec;">Perfil</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== COMPANY APP ===== -->
        <div id="companyApp" class="view main-app" style="background: var(--bg);">

            <!-- COMPANY HEADER (Stitch) -->
            <div
                style="padding: 16px 24px 8px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 10; background: rgba(255,255,255,0.95); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border-bottom: 1px solid #f1f5f9; box-shadow: 0 1px 3px rgba(0,0,0,0.05);">
                <div style="display: flex; align-items: center; gap: 8px; cursor: pointer;"
                    onclick="app.showCompanySection('companyProfileSection')">
                    <div
                        style="width: 32px; height: 32px; background: linear-gradient(135deg, #4F46E5, #7C3AED); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 18px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                        T</div>
                    <h1 id="headerCompanyName"
                        style="font-size: 20px; font-weight: 700; letter-spacing: -0.025em; color: #18181b; margin: 0;">
                        Talently</h1>
                </div>
                <div style="display: flex; gap: 12px;">
                    <button onclick="app.openFilters()"
                        style="padding: 8px; border-radius: 50%; background: white; border: 1px solid #e5e7eb; color: #4b5563; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 1px 2px rgba(0,0,0,0.05); transition: color 0.2s, border-color 0.2s;">
                        <span class="material-icons" style="font-size: 20px;">tune</span>
                    </button>
                    <button onclick="app.toggleNotifications()"
                        style="padding: 8px; border-radius: 50%; background: white; border: 1px solid #e5e7eb; color: #4b5563; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 1px 2px rgba(0,0,0,0.05); position: relative; transition: color 0.2s, border-color 0.2s;">
                        <span class="material-icons" style="font-size: 20px;">notifications_none</span>
                        <span id="companyNotifBadgeDot"
                            style="display: none; position: absolute; top: 6px; right: 6px; width: 8px; height: 8px; background: #EF4444; border-radius: 50%; border: 2px solid white;"></span>
                    </button>
                </div>
            </div>

            <!-- COMPANY NOTIFICATIONS VIEW -->
            <div id="companyNotificationsView"
                style="position: absolute; bottom: 0; left: 0; width: 100%; height: 95%; background: #F8F9FA; z-index: 100; transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1); display: flex; flex-direction: column; border-radius: 16px 16px 0 0; box-shadow: 0 -10px 40px rgba(0,0,0,0.12); font-family: 'Inter', sans-serif;">

                <!-- Sticky Header -->
                <div
                    style="position: sticky; top: 0; z-index: 20; background: rgba(248,249,250,0.95); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border-bottom: 1px solid #e5e7eb; padding: 14px 16px; display: flex; align-items: center; justify-content: space-between;">
                    <button onclick="app.closeNotifications()"
                        style="padding: 6px; margin-left: -6px; border-radius: 50%; background: none; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; color: #6b7280; transition: background 0.2s;"
                        onmouseover="this.style.background='#e5e7eb'" onmouseout="this.style.background='none'">
                        <span class="material-icons" style="font-size: 24px;">arrow_back</span>
                    </button>
                    <h1 style="margin: 0; font-size: 17px; font-weight: 700; letter-spacing: -0.01em; color: #111827;">
                        Notificaciones</h1>
                    <button onclick="app.markNotificationsAsRead()"
                        style="background: none; border: none; cursor: pointer; font-size: 13px; font-weight: 600; color: #1392ec; font-family: 'Inter', sans-serif; transition: opacity 0.2s;"
                        onmouseover="this.style.opacity='0.7'" onmouseout="this.style.opacity='1'">Marcar todo</button>
                </div>

                <!-- Scrollable notification list -->
                <div id="companyNotificationList" style="flex: 1; overflow-y: auto; padding-bottom: 20px;">
                    <!-- Empty state (default) -->
                    <div style="text-align: center; padding: 60px 24px; color: #9ca3af;">
                        <span class="material-icons"
                            style="font-size: 48px; color: #d1d5db; margin-bottom: 12px; display: block;">notifications_none</span>
                        <p style="font-size: 14px; font-weight: 500;">No tienes notificaciones</p>
                    </div>
                </div>
            </div>

            <!-- COMPANY SETTINGS VIEW -->
            <div id="companySettingsView"
                style="position: absolute; bottom: 0; left: 0; width: 100%; height: 95%; background: var(--surface); z-index: 101; transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1); display: flex; flex-direction: column; border-radius: 20px 20px 0 0; box-shadow: 0 -10px 40px rgba(0,0,0,0.1);">
                <div
                    style="padding: 16px 20px; display: flex; align-items: center; gap: 12px; border-bottom: 1px solid var(--border);">
                    <button onclick="app.closeSettingsModal()"
                        style="background: none; border: none; padding: 4px; cursor: pointer;">
                        <svg width="24" height="24" display="block" stroke="var(--text-primary)" viewBox="0 0 24 24"
                            fill="none">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </button>
                    <h2 style="font-size: 18px; font-weight: 700; color: var(--text-primary);">Configuración
                    </h2>
                </div>
                <div style="padding: 20px; overflow-y: auto;">
                    <div class="settings-list" style="display: flex; flex-direction: column; gap: 12px;">
                        <!-- Dark Mode -->
                        <div class="settings-item" onclick="app.toggleDarkMode()"
                            style="display: flex; align-items: center; gap: 12px; padding: 16px; border-radius: 16px; background: var(--surface); box-shadow: 0 2px 8px rgba(0,0,0,0.05); border: 1px solid var(--border); cursor: pointer;">
                            <div class="settings-icon"
                                style="width: 40px; height: 40px; border-radius: 12px; background: rgba(108,92,231,0.1); display: flex; align-items: center; justify-content: center;">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                    style="width: 20px; height: 20px;">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                                </svg>
                            </div>
                            <div class="settings-item-content" style="flex: 1;">
                                <div class="settings-item-title" style="font-weight: 600; color: var(--text-primary);">
                                    Modo Oscuro</div>
                            </div>
                            <label class="switch" onclick="event.stopPropagation()">
                                <input type="checkbox" id="companyDarkModeToggle" onchange="app.toggleDarkMode()">
                                <span class="slider round"></span>
                            </label>
                        </div>

                        <!-- Notifications -->
                        <div class="settings-item" onclick="app.toggleNotificationSetting()"
                            style="display: flex; align-items: center; gap: 12px; padding: 16px; border-radius: 16px; background: var(--surface); box-shadow: 0 2px 8px rgba(0,0,0,0.05); border: 1px solid var(--border); cursor: pointer;">
                            <div class="settings-icon"
                                style="width: 40px; height: 40px; border-radius: 12px; background: rgba(108,92,231,0.1); display: flex; align-items: center; justify-content: center;">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                    style="width: 20px; height: 20px;">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                                </svg>
                            </div>
                            <div class="settings-item-content" style="flex: 1;">
                                <div class="settings-item-title" style="font-weight: 600; color: var(--text-primary);">
                                    Notificaciones</div>
                                <div class="settings-item-subtitle" id="companyNotifStatusText"
                                    style="font-size: 13px; color: var(--text-secondary);">
                                    Desactivado</div>
                            </div>
                            <div id="companyNotifToggle"
                                style="width: 48px; height: 28px; border-radius: 14px; background: var(--border); position: relative; transition: background 0.3s; flex-shrink: 0;">
                                <div id="companyNotifToggleKnob"
                                    style="width: 22px; height: 22px; border-radius: 50%; background: white; position: absolute; top: 3px; left: 3px; transition: transform 0.3s; box-shadow: 0 1px 3px rgba(0,0,0,0.2);">
                                </div>
                            </div>
                        </div>

                        <!-- Logout -->
                        <button type="button" onclick="app.logout()"
                            style="width: 100%; border: none; cursor: pointer; text-align: left; padding: 16px; border-radius: 16px; transition: background 0.2s; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border: 1px solid var(--border); display: flex; align-items: center; gap: 12px; background: var(--surface);">
                            <div class="settings-icon"
                                style="width: 40px; height: 40px; border-radius: 12px; background: rgba(255, 107, 157, 0.1); display: flex; align-items: center; justify-content: center;">
                                <svg fill="none" stroke="var(--danger)" viewBox="0 0 24 24"
                                    style="width: 20px; height: 20px;">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                                </svg>
                            </div>
                            <div class="settings-item-content">
                                <div class="settings-item-title" style="color: var(--danger); font-weight: 600;">
                                    Cerrar Sesión</div>
                            </div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- COMPANY FILTERS VIEW -->
            <div id="companyFiltersView"
                style="position: absolute; bottom: 0; left: 0; width: 100%; height: 95%; background: #ffffff; z-index: 102; transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1); display: flex; flex-direction: column; border-radius: 16px 16px 0 0; box-shadow: 0 -10px 40px rgba(0,0,0,0.12); font-family: 'Inter', sans-serif;">

                <!-- Drag Handle -->
                <div style="display: flex; justify-content: center; padding: 12px 0 0;">
                    <div style="width: 36px; height: 4px; background: #d1d5db; border-radius: 9999px;"></div>
                </div>

                <!-- Header -->
                <div
                    style="display: flex; align-items: center; justify-content: space-between; padding: 12px 20px 16px;">
                    <button onclick="app.closeFilters()"
                        style="background: none; border: none; padding: 4px; cursor: pointer; display: flex; align-items: center; justify-content: center;">
                        <span class="material-icons" style="font-size: 22px; color: #1e293b;">close</span>
                    </button>
                    <span style="font-size: 17px; font-weight: 700; color: #1e293b;">Filtros</span>
                    <button onclick="app.clearAllFilters()"
                        style="background: none; border: none; padding: 4px; cursor: pointer; font-size: 13px; font-weight: 600; color: #1392ec; font-family: 'Inter', sans-serif;">Restablecer</button>
                </div>

                <!-- Scrollable Content -->
                <div style="flex: 1; overflow-y: auto; padding: 0 20px 24px;">

                    <!-- 1. Ubicación -->
                    <div style="margin-bottom: 28px;">
                        <div style="font-size: 13px; font-weight: 700; color: #1e293b; margin-bottom: 10px;">Ubicación
                        </div>
                        <div style="position: relative;">
                            <span class="material-icons"
                                style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); font-size: 20px; color: #94a3b8;">location_on</span>
                            <input type="text" id="companyFilterLocation" placeholder="Ciudad o país"
                                style="width: 100%; padding: 12px 12px 12px 40px; border: 1.5px solid #e2e8f0; border-radius: 12px; font-size: 14px; font-family: 'Inter', sans-serif; color: #1e293b; background: #ffffff; outline: none; box-sizing: border-box;"
                                onfocus="this.style.borderColor='#1392ec'" onblur="this.style.borderColor='#e2e8f0'">
                        </div>
                    </div>

                    <!-- 2. Salario Mensual (USD) - Dual Range Slider -->
                    <div style="margin-bottom: 28px;">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <span style="font-size: 13px; font-weight: 700; color: #1e293b;">Salario Mensual
                                (USD)</span>
                            <span id="companySalaryRangeLabel"
                                style="font-size: 12px; font-weight: 600; color: #1392ec;">$0 - $15,000+</span>
                        </div>
                        <div id="companySalarySliderTrack" onclick="app.handleSalaryTrackClick(event, 'company')"
                            style="position: relative; height: 40px; padding: 0 8px; cursor: pointer;">
                            <!-- Track background -->
                            <div
                                style="position: absolute; top: 50%; left: 8px; right: 8px; height: 4px; background: #e2e8f0; border-radius: 2px; transform: translateY(-50%);">
                            </div>
                            <!-- Active range fill -->
                            <div id="companySalaryFill"
                                style="position: absolute; top: 50%; height: 4px; background: #1392ec; border-radius: 2px; transform: translateY(-50%); left: 8px; right: 8px;">
                            </div>
                            <!-- Min range input -->
                            <input type="range" class="dual-range-slider" id="companyFilterSalaryMin" min="0"
                                max="15000" step="500" value="0" oninput="app.updateSalarySlider()"
                                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; margin: 0; -webkit-appearance: none; appearance: none; background: transparent; z-index: 2;">
                            <!-- Max range input -->
                            <input type="range" class="dual-range-slider" id="companyFilterSalaryMax" min="0"
                                max="15000" step="500" value="15000" oninput="app.updateSalarySlider()"
                                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; margin: 0; -webkit-appearance: none; appearance: none; background: transparent; z-index: 3;">
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 2px;">
                            <span style="font-size: 11px; color: #94a3b8;">$0</span>
                            <span style="font-size: 11px; color: #94a3b8;">$15,000+</span>
                        </div>
                    </div>

                    <!-- 3. Modalidad de Trabajo -->
                    <div style="margin-bottom: 28px;">
                        <div style="font-size: 13px; font-weight: 700; color: #1e293b; margin-bottom: 10px;">Modalidad
                            de Trabajo</div>
                        <div style="display: flex; gap: 8px; flex-wrap: wrap;" id="companyFilterModalityChips">
                            <button class="filter-chip" onclick="app.toggleFilterChip(this, 'modality', 'Remoto')"
                                style="display: flex; align-items: center; gap: 6px; padding: 10px 18px; border: 1.5px solid #e2e8f0; border-radius: 99px; font-size: 13px; font-weight: 500; font-family: 'Inter', sans-serif; cursor: pointer; background: #ffffff; color: #475569; transition: all 0.2s;">
                                <span
                                    style="width: 16px; height: 16px; border: 1.5px solid #cbd5e1; border-radius: 4px; display: inline-block; flex-shrink: 0; transition: all 0.2s;"
                                    class="cf-check"></span>
                                Remoto
                            </button>
                            <button class="filter-chip" onclick="app.toggleFilterChip(this, 'modality', 'Híbrido')"
                                style="display: flex; align-items: center; gap: 6px; padding: 10px 18px; border: 1.5px solid #e2e8f0; border-radius: 99px; font-size: 13px; font-weight: 500; font-family: 'Inter', sans-serif; cursor: pointer; background: #ffffff; color: #475569; transition: all 0.2s;">
                                <span
                                    style="width: 16px; height: 16px; border: 1.5px solid #cbd5e1; border-radius: 4px; display: inline-block; flex-shrink: 0; transition: all 0.2s;"
                                    class="cf-check"></span>
                                Híbrido
                            </button>
                            <button class="filter-chip" onclick="app.toggleFilterChip(this, 'modality', 'Presencial')"
                                style="display: flex; align-items: center; gap: 6px; padding: 10px 18px; border: 1.5px solid #e2e8f0; border-radius: 99px; font-size: 13px; font-weight: 500; font-family: 'Inter', sans-serif; cursor: pointer; background: #ffffff; color: #475569; transition: all 0.2s;">
                                <span
                                    style="width: 16px; height: 16px; border: 1.5px solid #cbd5e1; border-radius: 4px; display: inline-block; flex-shrink: 0; transition: all 0.2s;"
                                    class="cf-check"></span>
                                Presencial
                            </button>
                        </div>
                    </div>

                    <!-- 4. Años de Experiencia - Segmented Control -->
                    <div style="margin-bottom: 28px;">
                        <div style="font-size: 13px; font-weight: 700; color: #1e293b; margin-bottom: 10px;">Años de
                            Experiencia</div>
                        <div id="companyFilterExperienceSegments"
                            style="display: flex; background: #f1f5f9; border-radius: 12px; padding: 3px; gap: 2px;">
                            <button onclick="app.selectExpSegment(this, '0-2')"
                                style="flex: 1; padding: 10px 0; border: none; border-radius: 10px; font-size: 13px; font-weight: 600; font-family: 'Inter', sans-serif; cursor: pointer; background: transparent; color: #64748b; transition: all 0.2s;"
                                class="exp-seg">0-2</button>
                            <button onclick="app.selectExpSegment(this, '3-5')"
                                style="flex: 1; padding: 10px 0; border: none; border-radius: 10px; font-size: 13px; font-weight: 600; font-family: 'Inter', sans-serif; cursor: pointer; background: transparent; color: #64748b; transition: all 0.2s;"
                                class="exp-seg">3-5</button>
                            <button onclick="app.selectExpSegment(this, '6-9')"
                                style="flex: 1; padding: 10px 0; border: none; border-radius: 10px; font-size: 13px; font-weight: 600; font-family: 'Inter', sans-serif; cursor: pointer; background: transparent; color: #64748b; transition: all 0.2s;"
                                class="exp-seg">6-9</button>
                            <button onclick="app.selectExpSegment(this, '10+')"
                                style="flex: 1; padding: 10px 0; border: none; border-radius: 10px; font-size: 13px; font-weight: 600; font-family: 'Inter', sans-serif; cursor: pointer; background: transparent; color: #64748b; transition: all 0.2s;"
                                class="exp-seg">10+</button>
                        </div>
                    </div>

                    <!-- 5. Habilidades Técnicas -->
                    <div style="margin-bottom: 28px;">
                        <div style="font-size: 13px; font-weight: 700; color: #1e293b; margin-bottom: 10px;">Habilidades
                            Técnicas</div>
                        <!-- Selected skill tags -->
                        <div id="companyFilterSkillTags"
                            style="display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 10px;"></div>
                        <!-- Add skill input -->
                        <div style="position: relative;">
                            <input type="text" id="companyFilterSkillInput" placeholder="Agregar habilidad..."
                                style="width: 100%; padding: 10px 40px 10px 14px; border: 1.5px solid #e2e8f0; border-radius: 12px; font-size: 13px; font-family: 'Inter', sans-serif; color: #1e293b; background: #ffffff; outline: none; box-sizing: border-box;"
                                onfocus="this.style.borderColor='#1392ec'" onblur="this.style.borderColor='#e2e8f0'"
                                onkeydown="if(event.key==='Enter'){event.preventDefault();app.addFilterSkill();}">
                            <button onclick="app.addFilterSkill()"
                                style="position: absolute; right: 4px; top: 50%; transform: translateY(-50%); background: #1392ec; border: none; border-radius: 8px; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; cursor: pointer;">
                                <span class="material-icons" style="font-size: 18px; color: #ffffff;">add</span>
                            </button>
                        </div>
                        <!-- Suggested skills (loaded from DB) -->
                        <div id="companyFilterSkillSuggestions"
                            style="display: flex; gap: 6px; flex-wrap: wrap; margin-top: 10px;"></div>
                    </div>

                </div>

                <!-- Apply Button (Fixed at bottom) -->
                <div style="padding: 16px 20px 24px; border-top: 1px solid #f1f5f9;">
                    <button onclick="app.applyFilters()"
                        style="width: 100%; padding: 16px; background: linear-gradient(135deg, #1392ec 0%, #0b6cb3 100%); color: #ffffff; border: none; border-radius: 14px; font-weight: 700; font-size: 15px; font-family: 'Inter', sans-serif; cursor: pointer; box-shadow: 0 4px 15px rgba(19,146,236,0.3); transition: opacity 0.2s;"
                        onmouseover="this.style.opacity='0.92'" onmouseout="this.style.opacity='1'">
                        Aplicar Filtros
                    </button>
                </div>
            </div>

            <main class="app-content" style="flex: 1; overflow-y: auto; position: relative;">

                <!-- OFFERS SECTION -->
                <!-- COMPANY OFFERS SECTION (Stitch) -->
                <div id="companyOffersSection" class="company-section active"
                    style="display: flex; flex-direction: column; flex: 1; overflow: hidden; font-family: 'Inter', sans-serif; background: #F8F9FA;">

                    <!-- Sticky Header -->
                    <div
                        style="position: sticky; top: 0; z-index: 20; display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; background: rgba(248,249,250,0.95); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border-bottom: 1px solid #f1f5f9;">
                        <h1
                            style="margin: 0; font-size: 22px; font-weight: 800; color: #1f2937; letter-spacing: -0.02em;">
                            Mis Ofertas</h1>
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <button onclick="app.toggleNotifications()"
                                style="position: relative; background: none; border: none; cursor: pointer; padding: 6px; color: #9ca3af; transition: color 0.2s;"
                                onmouseenter="this.style.color='#1392ec'" onmouseleave="this.style.color='#9ca3af'">
                                <span class="material-icons" style="font-size: 24px;">notifications</span>
                                <span id="companyOffersNotifDot"
                                    style="display: none; position: absolute; top: 6px; right: 6px; width: 8px; height: 8px; background: #ef4444; border-radius: 50%; border: 2px solid #F8F9FA;"></span>
                            </button>
                        </div>
                    </div>

                    <!-- Tab Bar -->
                    <div style="padding: 12px 20px;">
                        <div
                            style="display: flex; padding: 4px; background: #ffffff; border: 1px solid #f1f5f9; border-radius: 12px; box-shadow: 0 1px 2px rgba(0,0,0,0.04);">
                            <button id="offersTabActive" onclick="app.switchOffersTab('active')"
                                style="flex: 1; padding: 8px 16px; border-radius: 8px; font-size: 13px; font-weight: 700; border: none; cursor: pointer; transition: all 0.2s; background: #1392ec; color: #ffffff; box-shadow: 0 2px 8px rgba(19,146,236,0.25);">
                                Activas
                            </button>
                            <button id="offersTabHistory" onclick="app.switchOffersTab('history')"
                                style="flex: 1; padding: 8px 16px; border-radius: 8px; font-size: 13px; font-weight: 500; border: none; cursor: pointer; transition: all 0.2s; background: transparent; color: #6b7280;">
                                Historial
                            </button>
                        </div>
                    </div>

                    <!-- Scrollable Offers List -->
                    <div style="flex: 1; overflow-y: auto; padding: 0 20px 100px;">
                        <div id="companyOffersList" style="display: flex; flex-direction: column; gap: 16px;">
                            <!-- JS Rendered -->
                        </div>
                    </div>

                    <!-- FAB - Crear Nueva -->
                    <div style="position: absolute; bottom: 80px; right: 16px; z-index: 30;">
                        <button onclick="app.createOffer()"
                            style="display: flex; align-items: center; gap: 8px; background: #1392ec; color: #ffffff; border: none; border-radius: 100px; padding: 0 20px; height: 52px; font-size: 15px; font-weight: 700; cursor: pointer; box-shadow: 0 6px 20px rgba(19,146,236,0.35); transition: all 0.2s; letter-spacing: 0.01em;"
                            onmouseenter="this.style.transform='scale(1.05)'; this.style.boxShadow='0 8px 24px rgba(19,146,236,0.4)'"
                            onmouseleave="this.style.transform='scale(1)'; this.style.boxShadow='0 6px 20px rgba(19,146,236,0.35)'">
                            <span class="material-icons" style="font-size: 22px;">add</span>
                            <span>Crear Nueva</span>
                        </button>
                    </div>
                </div>

                <!-- SWIPE DISCOVERY SECTION (Stitch) -->
                <div id="companySearchSection" class="company-section"
                    style="display: none; flex: 1; flex-direction: column; overflow: hidden; position: relative; padding: 16px; align-items: center; justify-content: center;">

                    <!-- Empty state (hidden by default) -->
                    <div id="noMoreCandidates"
                        style="display: none; position: absolute; inset: 0; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 32px;">
                        <div
                            style="width: 80px; height: 80px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; border: 1px solid #e5e7eb; box-shadow: 0 1px 3px rgba(0,0,0,0.05);">
                            <span class="material-icons" style="font-size: 36px; color: #9ca3af;">search_off</span>
                        </div>
                        <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 8px; color: #18181b;">No hay más
                            candidatos</h3>
                        <p style="color: #71717a; font-size: 14px; margin-bottom: 16px;">Intenta ajustar tus filtros
                            para ver más perfiles.</p>
                        <button onclick="app.resetCandidateSwipe()"
                            style="padding: 10px 24px; border-radius: 12px; background: #4F46E5; color: white; border: none; font-weight: 600; font-size: 14px; cursor: pointer;">Volver
                            a empezar</button>
                    </div>

                    <!-- Card Stack -->
                    <div id="candidateSwipeDeck"
                        style="position: relative; max-width: 400px; width: 100%; height: 65vh; max-height: 520px;">
                        <!-- Shadow cards for stack effect -->
                        <div id="companyCardShadow1"
                            style="position: absolute; top: 12px; left: 2.5%; width: 95%; height: 100%; background: white; border-radius: 24px; border: 1px solid #e5e7eb; opacity: 0.8; z-index: 1; box-shadow: 0 4px 6px rgba(0,0,0,0.03);">
                        </div>
                        <div id="companyCardShadow2"
                            style="position: absolute; top: 24px; left: 5%; width: 90%; height: 100%; background: white; border-radius: 24px; border: 1px solid #e5e7eb; opacity: 0.6; z-index: 0; box-shadow: 0 4px 6px rgba(0,0,0,0.03);">
                        </div>
                        <!-- Active card injected here by renderCandidateCard() -->
                    </div>

                    <!-- Action Buttons -->
                    <div id="swipeControls"
                        style="width: 100%; max-width: 400px; display: flex; justify-content: center; align-items: center; gap: 24px; margin-top: 32px; margin-bottom: 8px;">
                        <!-- Reject -->
                        <button onclick="app.handleSwipe('left')"
                            style="width: 64px; height: 64px; border-radius: 50%; background: white; border: 1px solid #f3f4f6; color: #EF4444; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 10px 15px rgba(0,0,0,0.08), 0 4px 6px rgba(0,0,0,0.04); transition: transform 0.2s, box-shadow 0.2s;">
                            <span class="material-icons" style="font-size: 30px;">close</span>
                        </button>
                        <!-- Super Like / Bookmark -->
                        <button onclick="app.handleSuperSwipe()"
                            style="width: 48px; height: 48px; border-radius: 50%; background: white; border: 1px solid #f3f4f6; color: #2563EB; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.08); transition: transform 0.2s;">
                            <span class="material-icons" style="font-size: 20px;">star</span>
                        </button>
                        <!-- Like -->
                        <button onclick="app.handleSwipe('right')"
                            style="width: 64px; height: 64px; border-radius: 50%; background: white; border: 1px solid #f3f4f6; color: #10B981; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 10px 15px rgba(0,0,0,0.08), 0 4px 6px rgba(0,0,0,0.04); transition: transform 0.2s, box-shadow 0.2s;">
                            <span class="material-icons" style="font-size: 30px;">favorite</span>
                        </button>
                    </div>
                </div>

                <!-- MESSAGES SECTION -->
                <!-- MESSAGES SECTION -->
                <div id="companyMessagesSection" class="company-section"
                    style="display: none; height: calc(100vh - 80px); flex-direction: column; font-family: 'Inter', sans-serif; background: #F8F9FA;">

                    <!-- 1. CONVERSATIONS LIST -->
                    <div id="messagesListView" style="height: 100%; display: flex; flex-direction: column;">

                        <!-- Sticky Header -->
                        <div
                            style="position: sticky; top: 0; z-index: 10; background: rgba(248,249,250,0.95); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); padding: 40px 16px 16px; transition: all 0.3s;">
                            <div
                                style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                                <h1
                                    style="margin: 0; font-size: 28px; font-weight: 800; letter-spacing: -0.02em; color: #000000;">
                                    Mensajes</h1>
                                <button onclick="app.toggleNotifications()"
                                    style="display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; border-radius: 50%; background: #ffffff; border: 1px solid #f1f5f9; color: #64748b; cursor: pointer; box-shadow: 0 1px 3px rgba(0,0,0,0.04); transition: all 0.2s;"
                                    onmouseenter="this.style.background='rgba(19,146,236,0.1)'; this.style.color='#1392ec'"
                                    onmouseleave="this.style.background='#ffffff'; this.style.color='#64748b'">
                                    <span class="material-icons" style="font-size: 22px;">tune</span>
                                </button>
                            </div>
                            <!-- Search Bar -->
                            <div style="position: relative; width: 100%;">
                                <div
                                    style="position: absolute; inset: 0; right: auto; left: 0; padding-left: 12px; display: flex; align-items: center; pointer-events: none;">
                                    <span class="material-icons" style="font-size: 20px; color: #94a3b8;">search</span>
                                </div>
                                <input id="msgSearchInput" type="text" placeholder="Buscar candidatos o roles..."
                                    oninput="app.filterCompanyConversations()"
                                    style="display: block; width: 100%; padding: 12px 12px 12px 40px; border-radius: 12px; border: 1px solid #e2e8f0; background: #f8fafc; color: #0f172a; font-size: 14px; font-family: 'Inter', sans-serif; outline: none; box-shadow: 0 1px 3px rgba(0,0,0,0.04); transition: all 0.2s; box-sizing: border-box;"
                                    onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 3px rgba(19,146,236,0.12)'; this.style.background='#ffffff'"
                                    onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='0 1px 3px rgba(0,0,0,0.04)'; this.style.background='#f8fafc'">
                            </div>
                        </div>

                        <!-- Nuevos Matches Section -->
                        <section id="msgNewMatchesSection" style="margin-top: 16px; display: none;">
                            <div
                                style="display: flex; align-items: center; justify-content: space-between; padding: 0 16px; margin-bottom: 12px;">
                                <h2 style="margin: 0; font-size: 16px; font-weight: 700; color: #000000;">Nuevos Matches
                                </h2>
                            </div>
                            <div id="msgNewMatchesList"
                                style="display: flex; overflow-x: auto; padding: 0 16px 16px; gap: 16px; -ms-overflow-style: none; scrollbar-width: none;">
                                <!-- JS rendered match avatars -->
                            </div>
                        </section>

                        <!-- Conversations Section -->
                        <section
                            style="flex: 1; overflow-y: auto; margin-top: 8px; padding: 0 16px; background: #ffffff; border-radius: 24px 24px 0 0; box-shadow: 0 -4px 20px rgba(0,0,0,0.02); padding-top: 24px; padding-bottom: 24px; min-height: 400px;">
                            <h2 style="margin: 0 0 16px; font-size: 16px; font-weight: 700; color: #000000;">
                                Conversaciones</h2>
                            <div id="companyConversationList" style="display: flex; flex-direction: column;">
                                <!-- JS Rendered Items -->
                            </div>
                        </section>
                    </div>

                    <!-- CHAT DETAIL VIEW -->
                    <div id="messagesChatView"
                        style="display: none; height: 100%; flex-direction: column; background: #F8F9FA; padding-bottom: 70px; font-family: 'Inter', sans-serif; overflow: hidden;">

                        <!-- Chat Header -->
                        <header
                            style="flex-shrink: 0; z-index: 50; background: #ffffff; border-bottom: 1px solid #f1f5f9; padding: 16px 16px 10px; box-shadow: 0 1px 3px rgba(0,0,0,0.04);">
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <button onclick="app.backToConversationsList()"
                                        style="background: none; border: none; color: #64748b; cursor: pointer; padding: 2px; display: flex; align-items: center; justify-content: center; transition: color 0.2s;"
                                        onmouseenter="this.style.color='#1392ec'"
                                        onmouseleave="this.style.color='#64748b'">
                                        <span class="material-icons" style="font-size: 28px;">chevron_left</span>
                                    </button>
                                    <div style="position: relative; cursor: pointer;">
                                        <img id="companyChatAvatar"
                                            src="https://ui-avatars.com/api/?name=C&background=f1f5f9&color=64748b"
                                            style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover; background: #e2e8f0; background-size: cover; background-position: center; transition: all 0.2s;">
                                        <div id="companyChatOnlineDot"
                                            style="display: none; position: absolute; bottom: 0; right: 0; width: 12px; height: 12px; background: #22c55e; border: 2px solid #ffffff; border-radius: 50%;">
                                        </div>
                                    </div>
                                    <div style="display: flex; flex-direction: column; justify-content: center;">
                                        <h1 id="companyChatName"
                                            style="margin: 0; font-size: 15px; font-weight: 700; line-height: 1.3; letter-spacing: -0.01em; color: #1e293b;">
                                        </h1>
                                        <span id="companyChatOnlineStatus"
                                            style="font-size: 12px; font-weight: 500; color: #94a3b8;">Desconectado</span>
                                    </div>
                                </div>
                                <button id="companyChatViewProfile" onclick="app.viewChatCandidateProfile()"
                                    style="background: none; border: none; color: #1392ec; cursor: pointer; font-size: 13px; font-weight: 700; font-family: 'Inter', sans-serif; letter-spacing: 0.02em; padding: 4px 8px; transition: color 0.2s;"
                                    onmouseenter="this.style.color='#0b6cb3'" onmouseleave="this.style.color='#1392ec'">
                                    Ver Perfil
                                </button>
                            </div>
                        </header>

                        <!-- Chat Messages Container -->
                        <div id="companyChatMessages"
                            style="flex: 1; overflow-y: auto; padding: 24px 16px; display: flex; flex-direction: column; gap: 20px; background: #F8F9FA; scroll-behavior: smooth;">
                            <!-- Messages injected here by JS -->
                        </div>

                        <!-- Chat Input Area -->
                        <footer
                            style="flex-shrink: 0; background: #ffffff; border-top: 1px solid #e2e8f0; padding: 8px 12px 24px;">
                            <div style="display: flex; align-items: flex-end; gap: 8px; max-width: 100%;">
                                <button onclick="document.getElementById('fileInput').click()"
                                    style="flex-shrink: 0; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: none; border: none; color: #64748b; cursor: pointer; transition: all 0.2s;"
                                    onmouseenter="this.style.color='#1392ec'; this.style.background='#f1f5f9'"
                                    onmouseleave="this.style.color='#64748b'; this.style.background='none'">
                                    <span class="material-icons" style="font-size: 26px;">add_circle</span>
                                </button>
                                <div style="flex: 1; background: #ffffff; border-radius: 24px; border: 1px solid #e2e8f0; display: flex; align-items: center; min-height: 44px; transition: all 0.2s;"
                                    id="companyChatInputWrapper">
                                    <input type="text" id="companyChatInput" placeholder="Escribe un mensaje..."
                                        onkeyup="if(event.key === 'Enter') app.sendCompanyMessage()"
                                        style="flex: 1; background: transparent; border: none; outline: none; font-size: 14px; font-family: 'Inter', sans-serif; color: #1e293b; padding: 10px 4px 10px 16px; min-width: 0;"
                                        onfocus="document.getElementById('companyChatInputWrapper').style.borderColor='#1392ec'; document.getElementById('companyChatInputWrapper').style.boxShadow='0 0 0 1px #1392ec'"
                                        onblur="document.getElementById('companyChatInputWrapper').style.borderColor='#e2e8f0'; document.getElementById('companyChatInputWrapper').style.boxShadow='none'">
                                    <button
                                        style="flex-shrink: 0; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: none; border: none; color: #94a3b8; cursor: pointer; margin-right: 6px; transition: color 0.2s;"
                                        onmouseenter="this.style.color='#1392ec'"
                                        onmouseleave="this.style.color='#94a3b8'">
                                        <span class="material-icons" style="font-size: 20px;">calendar_month</span>
                                    </button>
                                </div>
                                <button onclick="app.sendCompanyMessage()"
                                    style="flex-shrink: 0; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: #1392ec; color: #ffffff; border: none; cursor: pointer; box-shadow: 0 4px 12px rgba(19,146,236,0.2); transition: all 0.15s;"
                                    onmouseenter="this.style.background='#0b6cb3'; this.style.transform='scale(1.05)'"
                                    onmouseleave="this.style.background='#1392ec'; this.style.transform='scale(1)'">
                                    <span class="material-icons" style="font-size: 20px; margin-left: 2px;">send</span>
                                </button>
                            </div>
                        </footer>
                    </div>

                </div>

                <!-- COMPANY PROFILE SECTION -->
                <div id="companyProfileSection" class="company-section"
                    style="display: none; flex-direction: column; font-family: 'Inter', sans-serif; background: #F8F9FA; position: relative; overflow: hidden; height: 100%;">

                    <!-- Settings button -->
                    <button onclick="app.openCompanySettings()"
                        style="position: absolute; top: 12px; right: 16px; z-index: 20; padding: 8px; border-radius: 50%; background: #ffffff; border: 1px solid #f1f5f9; color: #334155; cursor: pointer; box-shadow: 0 1px 3px rgba(0,0,0,0.06); transition: all 0.2s;"
                        onmouseenter="this.style.background='#f1f5f9'" onmouseleave="this.style.background='#ffffff'">
                        <span class="material-icons" style="font-size: 22px;">settings</span>
                    </button>

                    <!-- Scrollable content -->
                    <div style="flex: 1; overflow-y: auto; padding-bottom: 90px;">

                        <!-- Header / Hero -->
                        <header
                            style="padding: 48px 24px 24px; display: flex; flex-direction: column; align-items: center; position: relative; z-index: 10;">
                            <!-- Gradient background -->
                            <div
                                style="position: absolute; top: 0; left: 0; right: 0; height: 128px; background: linear-gradient(to bottom, rgba(19,146,236,0.1), transparent); z-index: -1;">
                            </div>

                            <!-- Avatar with edit -->
                            <div style="position: relative; margin-bottom: 16px; cursor: pointer;"
                                onclick="app.uploadCompanyLogo()">
                                <div
                                    style="width: 112px; height: 112px; border-radius: 50%; background: #ffffff; border: 4px solid #ffffff; box-shadow: 0 4px 16px rgba(0,0,0,0.08); overflow: hidden;">
                                    <img id="companyProfileLogo"
                                        src="https://ui-avatars.com/api/?name=Company&background=1392ec&color=fff&size=200"
                                        style="width: 100%; height: 100%; object-fit: cover;">
                                </div>
                                <div
                                    style="position: absolute; bottom: 0; right: 0; background: #1392ec; color: #ffffff; padding: 6px; border-radius: 50%; border: 4px solid #F8F9FA; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                                    <span class="material-icons" style="font-size: 14px; display: block;">edit</span>
                                </div>
                            </div>

                            <!-- Name & Subtitle -->
                            <div style="text-align: center; margin-bottom: 20px;">
                                <h1 id="companyProfileName"
                                    style="margin: 0; font-size: 22px; font-weight: 700; letter-spacing: -0.02em; color: #1a1a1a;">
                                    Nombre de la Empresa</h1>
                                <p id="companyProfileSector"
                                    style="margin: 4px 0 0; font-size: 13px; font-weight: 500; color: #666666;">Sector
                                </p>
                            </div>

                            <!-- Edit Profile Button -->
                            <button onclick="app.openCompanyEditModal()"
                                style="width: 100%; padding: 11px 24px; border-radius: 100px; background: #ffffff; border: 1px solid #e2e8f0; font-size: 13px; font-weight: 700; color: #1a1a1a; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.04); font-family: 'Inter', sans-serif; transition: all 0.2s;"
                                onmouseenter="this.style.background='#f8fafc'"
                                onmouseleave="this.style.background='#ffffff'">
                                <span class="material-icons" style="font-size: 18px;">edit_square</span>
                                Editar Perfil
                            </button>
                        </header>

                        <!-- Content -->
                        <div style="padding: 0 16px;">

                            <!-- Stats Section -->
                            <section style="margin-bottom: 24px;">
                                <div
                                    style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; padding: 0 4px;">
                                    <h2
                                        style="margin: 0; font-size: 12px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.08em; color: #666666;">
                                        Estadísticas</h2>
                                </div>

                                <!-- 2-col grid -->
                                <div
                                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px;">
                                    <!-- Matches Card -->
                                    <div
                                        style="background: #ffffff; padding: 16px; border-radius: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.04); border: 1px solid #f1f5f9; display: flex; flex-direction: column; justify-content: space-between; height: 120px; position: relative; overflow: hidden;">
                                        <div
                                            style="position: absolute; right: -16px; top: -16px; width: 80px; height: 80px; border-radius: 50%; background: rgba(19,146,236,0.05);">
                                        </div>
                                        <div
                                            style="position: relative; z-index: 1; display: flex; align-items: center; gap: 6px; color: #1392ec; margin-bottom: 8px;">
                                            <span class="material-icons" style="font-size: 20px;">bolt</span>
                                            <span style="font-size: 11px; font-weight: 700;">Matches</span>
                                        </div>
                                        <div style="position: relative; z-index: 1;">
                                            <span id="companyStatsMatches"
                                                style="font-size: 32px; font-weight: 800; color: #1a1a1a; display: block; letter-spacing: -0.03em;">0</span>
                                            <span id="companyStatsMatchesTrend"
                                                style="font-size: 11px; color: #666666; font-weight: 500;">Total</span>
                                        </div>
                                    </div>
                                    <!-- Ofertas Card -->
                                    <div
                                        style="background: #ffffff; padding: 16px; border-radius: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.04); border: 1px solid #f1f5f9; display: flex; flex-direction: column; justify-content: space-between; height: 120px; position: relative; overflow: hidden;">
                                        <div
                                            style="position: absolute; right: -16px; top: -16px; width: 80px; height: 80px; border-radius: 50%; background: rgba(139,92,246,0.05);">
                                        </div>
                                        <div
                                            style="position: relative; z-index: 1; display: flex; align-items: center; gap: 6px; color: #8b5cf6; margin-bottom: 8px;">
                                            <span class="material-icons" style="font-size: 20px;">work</span>
                                            <span style="font-size: 11px; font-weight: 700;">Ofertas</span>
                                        </div>
                                        <div style="position: relative; z-index: 1;">
                                            <span id="companyStatsOffers"
                                                style="font-size: 32px; font-weight: 800; color: #1a1a1a; display: block; letter-spacing: -0.03em;">0</span>
                                            <span style="font-size: 11px; color: #666666; font-weight: 500;">Activas
                                                ahora</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Candidatos interesados banner -->
                                <div style="background: #ffffff; padding: 18px 20px; border-radius: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.04); border: 1px solid #f1f5f9; display: flex; align-items: center; justify-content: space-between; position: relative; overflow: hidden; cursor: pointer;"
                                    onclick="app.showCompanySection('companySearchSection')">
                                    <div
                                        style="position: absolute; right: 0; top: 0; bottom: 0; width: 33%; background: linear-gradient(to left, rgba(16,185,129,0.05), transparent);">
                                    </div>
                                    <div>
                                        <div
                                            style="display: flex; align-items: center; gap: 6px; color: #10b981; margin-bottom: 4px;">
                                            <span class="material-icons" style="font-size: 18px;">group</span>
                                            <span
                                                style="font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em;">Candidatos
                                                interesados</span>
                                        </div>
                                        <div style="display: flex; align-items: baseline; gap: 8px;">
                                            <span id="companyStatsViews"
                                                style="font-size: 28px; font-weight: 800; color: #1a1a1a; letter-spacing: -0.03em;">0</span>
                                            <span
                                                style="font-size: 11px; font-weight: 700; color: #10b981; background: #ecfdf5; padding: 2px 8px; border-radius: 4px; border: 1px solid rgba(16,185,129,0.1);">Nuevo</span>
                                        </div>
                                    </div>
                                    <div
                                        style="width: 40px; height: 40px; border-radius: 50%; background: #f8fafc; display: flex; align-items: center; justify-content: center; color: #94a3b8;">
                                        <span class="material-icons" style="font-size: 22px;">chevron_right</span>
                                    </div>
                                </div>
                            </section>

                            <!-- Preview Profile Button -->
                            <section style="margin-bottom: 32px;">
                                <button onclick="app.previewCompanyProfile()"
                                    style="width: 100%; position: relative; overflow: hidden; border-radius: 14px; background: linear-gradient(135deg, #1392ec, #2563eb); color: #ffffff; border: none; box-shadow: 0 4px 16px rgba(37,99,235,0.2); padding: 16px 20px; display: flex; align-items: center; justify-content: space-between; cursor: pointer; font-family: 'Inter', sans-serif; transition: transform 0.15s;"
                                    onmousedown="this.style.transform='scale(0.98)'"
                                    onmouseup="this.style.transform='scale(1)'"
                                    onmouseleave="this.style.transform='scale(1)'">
                                    <div
                                        style="display: flex; align-items: center; gap: 12px; position: relative; z-index: 1;">
                                        <div
                                            style="background: rgba(255,255,255,0.2); padding: 8px; border-radius: 10px; backdrop-filter: blur(4px);">
                                            <span class="material-icons"
                                                style="font-size: 22px; color: #ffffff;">smartphone</span>
                                        </div>
                                        <div style="text-align: left;">
                                            <p style="margin: 0; font-size: 14px; font-weight: 700;">Vista Previa del
                                                Perfil</p>
                                            <p style="margin: 2px 0 0; font-size: 12px; color: rgba(219,234,254,0.9);">
                                                Ver cómo te ven los candidatos</p>
                                        </div>
                                    </div>
                                    <span class="material-icons"
                                        style="font-size: 22px; position: relative; z-index: 1;">visibility</span>
                                </button>
                            </section>

                            <!-- Company Details (scrollable below) -->
                            <div id="companyProfileDetailsCard"
                                style="background: #ffffff; border-radius: 14px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.04); border: 1px solid #f1f5f9; margin-bottom: 24px;">

                                <!-- Details Grid -->
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                                    <div>
                                        <div
                                            style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 4px;">
                                            Website</div>
                                        <a id="companyProfileWebsite" href="#" target="_blank"
                                            style="font-size: 13px; color: #1392ec; text-decoration: none; font-weight: 500; display: block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">-</a>
                                    </div>
                                    <div>
                                        <div
                                            style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 4px;">
                                            LinkedIn</div>
                                        <a id="companyProfileLinkedin" href="#" target="_blank"
                                            style="font-size: 13px; color: #1392ec; text-decoration: none; font-weight: 500; display: block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">-</a>
                                    </div>
                                    <div>
                                        <div
                                            style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 4px;">
                                            Modelo de Trabajo</div>
                                        <div id="companyProfileWorkModel"
                                            style="font-size: 13px; color: #1a1a1a; font-weight: 500;">-</div>
                                    </div>
                                    <div>
                                        <div
                                            style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 4px;">
                                            Etapa</div>
                                        <div id="companyProfileStage"
                                            style="font-size: 13px; color: #1a1a1a; font-weight: 500;">-</div>
                                    </div>
                                    <div>
                                        <div
                                            style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 4px;">
                                            Tamaño</div>
                                        <div id="companyProfileSize"
                                            style="font-size: 13px; color: #1a1a1a; font-weight: 500;">-</div>
                                    </div>
                                    <div>
                                        <div
                                            style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 4px;">
                                            Ubicación</div>
                                        <div id="companyProfileLocation"
                                            style="font-size: 13px; color: #1a1a1a; font-weight: 500;">-</div>
                                    </div>
                                </div>

                                <!-- Value Proposition -->
                                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #f1f5f9;">
                                    <div
                                        style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 6px;">
                                        Propuesta de Valor</div>
                                    <p id="companyProfileValueProp"
                                        style="font-size: 13px; color: #1a1a1a; line-height: 1.7; margin: 0;">-</p>
                                </div>

                                <!-- Culture Values -->
                                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #f1f5f9;">
                                    <div
                                        style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 10px;">
                                        Valores de Cultura</div>
                                    <div id="companyProfileCulture" style="display: flex; gap: 8px; flex-wrap: wrap;">
                                    </div>
                                </div>

                                <!-- Tech Stack -->
                                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #f1f5f9;">
                                    <div
                                        style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 10px;">
                                        Tech Stack</div>
                                    <div id="companyProfileTech" style="display: flex; gap: 8px; flex-wrap: wrap;">
                                    </div>
                                </div>

                                <!-- Positions -->
                                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #f1f5f9;">
                                    <div
                                        style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 10px;">
                                        Posiciones que Buscamos</div>
                                    <div id="companyProfilePositions" style="display: flex; gap: 8px; flex-wrap: wrap;">
                                    </div>
                                </div>

                                <!-- Seniority -->
                                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #f1f5f9;">
                                    <div
                                        style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 10px;">
                                        Niveles de Seniority</div>
                                    <div id="companyProfileSeniority" style="display: flex; gap: 8px; flex-wrap: wrap;">
                                    </div>
                                </div>

                                <!-- Benefits -->
                                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #f1f5f9;">
                                    <div
                                        style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 10px;">
                                        Beneficios</div>
                                    <div id="companyProfileBenefits" style="display: flex; gap: 8px; flex-wrap: wrap;">
                                    </div>
                                </div>

                                <!-- Selection Process -->
                                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #f1f5f9;">
                                    <div
                                        style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 10px;">
                                        Proceso de Selección</div>
                                    <div id="companyProfileSelection" style="display: flex; gap: 8px; flex-wrap: wrap;">
                                    </div>
                                </div>

                                <!-- Tags -->
                                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #f1f5f9;">
                                    <div
                                        style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 10px;">
                                        Tags</div>
                                    <div id="companyProfileTags" style="display: flex; gap: 8px; flex-wrap: wrap;">
                                    </div>
                                </div>
                            </div>

                            <!-- Version footer -->
                            <div style="text-align: center; padding: 16px 0 8px;">
                                <p style="font-size: 11px; color: #94a3b8; margin: 0;">Talently para Empresas v2.4.0</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- COMPANY SETTINGS SECTION (Stitch) -->
                <div id="companySettingsSection" class="company-section"
                    style="display: none; flex-direction: column; font-family: 'Inter', sans-serif; background: #F8F9FA; height: 100%;">

                    <!-- Header -->
                    <header
                        style="padding: 48px 16px 16px; display: flex; align-items: center; justify-content: space-between; position: relative; z-index: 10; background: #ffffff; border-bottom: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0,0,0,0.04);">
                        <button onclick="app.showCompanySection('companyProfileSection')"
                            style="width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: none; border: none; cursor: pointer; color: #334155; transition: all 0.2s;"
                            onmouseenter="this.style.background='#f1f5f9'" onmouseleave="this.style.background='none'">
                            <span class="material-icons" style="font-size: 24px;">arrow_back</span>
                        </button>
                        <h1 style="margin: 0; font-size: 17px; font-weight: 700; color: #1e293b;">Configuración</h1>
                        <div style="width: 40px;"></div>
                    </header>

                    <!-- Content -->
                    <div style="flex: 1; overflow-y: auto; padding: 24px 16px 100px;">

                        <!-- Settings Card -->
                        <div
                            style="background: #ffffff; border-radius: 14px; overflow: hidden; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0,0,0,0.04); margin-bottom: 24px;">

                            <!-- Notificaciones -->
                            <button onclick="app.openSettingsModal()"
                                style="width: 100%; display: flex; align-items: center; justify-content: space-between; padding: 16px; border: none; border-bottom: 1px solid #f1f5f9; background: none; cursor: pointer; transition: background 0.2s; font-family: 'Inter', sans-serif;"
                                onmouseenter="this.style.background='#f8fafc'"
                                onmouseleave="this.style.background='none'">
                                <div style="display: flex; align-items: center; gap: 14px;">
                                    <div
                                        style="width: 40px; height: 40px; border-radius: 50%; background: #eff6ff; display: flex; align-items: center; justify-content: center; color: #2563eb;">
                                        <span class="material-icons" style="font-size: 20px;">notifications</span>
                                    </div>
                                    <div style="text-align: left;">
                                        <span
                                            style="display: block; font-size: 14px; font-weight: 600; color: #1e293b;">Notificaciones</span>
                                        <span
                                            style="display: block; font-size: 12px; color: #64748b; margin-top: 1px;">Alertas
                                            de matches y mensajes</span>
                                    </div>
                                </div>
                                <span class="material-icons"
                                    style="font-size: 20px; color: #94a3b8;">chevron_right</span>
                            </button>

                            <!-- Seguridad -->
                            <button onclick="app.openSecurityModal()"
                                style="width: 100%; display: flex; align-items: center; justify-content: space-between; padding: 16px; border: none; border-bottom: 1px solid #f1f5f9; background: none; cursor: pointer; transition: background 0.2s; font-family: 'Inter', sans-serif;"
                                onmouseenter="this.style.background='#f8fafc'"
                                onmouseleave="this.style.background='none'">
                                <div style="display: flex; align-items: center; gap: 14px;">
                                    <div
                                        style="width: 40px; height: 40px; border-radius: 50%; background: #ecfdf5; display: flex; align-items: center; justify-content: center; color: #059669;">
                                        <span class="material-icons" style="font-size: 20px;">shield</span>
                                    </div>
                                    <div style="text-align: left;">
                                        <span
                                            style="display: block; font-size: 14px; font-weight: 600; color: #1e293b;">Seguridad
                                            y Privacidad</span>
                                        <span
                                            style="display: block; font-size: 12px; color: #64748b; margin-top: 1px;">Contraseña,
                                            2FA</span>
                                    </div>
                                </div>
                                <span class="material-icons"
                                    style="font-size: 20px; color: #94a3b8;">chevron_right</span>
                            </button>

                            <!-- Preferencias -->
                            <button onclick="app.openPreferencesModal()"
                                style="width: 100%; display: flex; align-items: center; justify-content: space-between; padding: 16px; border: none; border-bottom: 1px solid #f1f5f9; background: none; cursor: pointer; transition: background 0.2s; font-family: 'Inter', sans-serif;"
                                onmouseenter="this.style.background='#f8fafc'"
                                onmouseleave="this.style.background='none'">
                                <div style="display: flex; align-items: center; gap: 14px;">
                                    <div
                                        style="width: 40px; height: 40px; border-radius: 50%; background: #faf5ff; display: flex; align-items: center; justify-content: center; color: #7c3aed;">
                                        <span class="material-icons" style="font-size: 20px;">manage_accounts</span>
                                    </div>
                                    <div style="text-align: left;">
                                        <span
                                            style="display: block; font-size: 14px; font-weight: 600; color: #1e293b;">Preferencias
                                            de Cuenta</span>
                                        <span
                                            style="display: block; font-size: 12px; color: #64748b; margin-top: 1px;">Idioma,
                                            región</span>
                                    </div>
                                </div>
                                <span class="material-icons"
                                    style="font-size: 20px; color: #94a3b8;">chevron_right</span>
                            </button>

                            <!-- Apariencia -->
                            <button onclick="app.showToast('Próximamente', 'info')"
                                style="width: 100%; display: flex; align-items: center; justify-content: space-between; padding: 16px; border: none; background: none; cursor: pointer; transition: background 0.2s; font-family: 'Inter', sans-serif;"
                                onmouseenter="this.style.background='#f8fafc'"
                                onmouseleave="this.style.background='none'">
                                <div style="display: flex; align-items: center; gap: 14px;">
                                    <div
                                        style="width: 40px; height: 40px; border-radius: 50%; background: #fffbeb; display: flex; align-items: center; justify-content: center; color: #f59e0b;">
                                        <span class="material-icons" style="font-size: 20px;">palette</span>
                                    </div>
                                    <div style="text-align: left;">
                                        <span
                                            style="display: block; font-size: 14px; font-weight: 600; color: #1e293b;">Apariencia</span>
                                        <span
                                            style="display: block; font-size: 12px; color: #64748b; margin-top: 1px;">Temas
                                            y visualización</span>
                                    </div>
                                </div>
                                <span class="material-icons"
                                    style="font-size: 20px; color: #94a3b8;">chevron_right</span>
                            </button>
                        </div>

                        <!-- Logout Button -->
                        <div style="margin-top: 32px;">
                            <button onclick="app.logout()"
                                style="width: 100%; display: flex; align-items: center; justify-content: center; padding: 14px; border-radius: 14px; border: 1px solid #fecaca; background: #ffffff; color: #dc2626; cursor: pointer; gap: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.04); font-family: 'Inter', sans-serif; transition: all 0.2s;"
                                onmouseenter="this.style.background='#fef2f2'"
                                onmouseleave="this.style.background='#ffffff'">
                                <span class="material-icons" style="font-size: 20px;">logout</span>
                                <span style="font-size: 14px; font-weight: 700;">Cerrar Sesión</span>
                            </button>
                            <p style="text-align: center; font-size: 11px; color: #94a3b8; margin: 24px 0 0;">
                                Talently para Empresas v2.4.0<br>
                                Build 8922
                            </p>
                        </div>
                    </div>
                </div>

            </main>

            <!-- COMPANY BOTTOM NAV (Stitch) -->
            <nav
                style="background: rgba(255,255,255,0.9); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border-top: 1px solid #f1f5f9; padding: 8px 24px; padding-bottom: max(8px, env(safe-area-inset-bottom)); z-index: 20;">
                <div
                    style="display: flex; justify-content: space-between; align-items: center; max-width: 400px; margin: 0 auto;">
                    <!-- Ofertas -->
                    <a id="companyNavOfertas" onclick="app.showCompanySection('companyOffersSection')"
                        style="display: flex; flex-direction: column; align-items: center; gap: 6px; padding: 8px; color: #9ca3af; cursor: pointer; text-decoration: none; transition: color 0.2s;">
                        <span class="material-icons" style="font-size: 24px;">work_outline</span>
                        <span style="font-size: 10px; font-weight: 500; letter-spacing: 0.05em;">Ofertas</span>
                    </a>
                    <!-- Explorar -->
                    <a id="companyNavExplorar" onclick="app.showCompanySection('companySearchSection')"
                        style="display: flex; flex-direction: column; align-items: center; gap: 6px; padding: 8px; color: #4F46E5; cursor: pointer; text-decoration: none; filter: drop-shadow(0 0 8px rgba(79,70,229,0.2));">
                        <span class="material-icons" style="font-size: 24px; transform: scale(1.1);">search</span>
                        <span style="font-size: 10px; font-weight: 700; letter-spacing: 0.05em;">Explorar</span>
                    </a>
                    <!-- Mensajes -->
                    <a id="companyNavMensajes" onclick="app.showCompanySection('companyMessagesSection')"
                        style="display: flex; flex-direction: column; align-items: center; gap: 6px; padding: 8px; color: #9ca3af; cursor: pointer; text-decoration: none; position: relative; transition: color 0.2s;">
                        <div style="position: relative;">
                            <span class="material-icons" style="font-size: 24px;">chat_bubble_outline</span>
                            <span id="companyMessagesBadge"
                                style="display: none; position: absolute; top: -4px; right: -4px; min-width: 14px; height: 14px; background: #EF4444; color: white; font-size: 9px; font-weight: 700; border-radius: 50%; border: 2px solid white; display: flex; align-items: center; justify-content: center;">0</span>
                        </div>
                        <span style="font-size: 10px; font-weight: 500; letter-spacing: 0.05em;">Mensajes</span>
                    </a>
                    <!-- Perfil -->
                    <a id="companyNavPerfil" onclick="app.showCompanySection('companyProfileSection')"
                        style="display: flex; flex-direction: column; align-items: center; gap: 6px; padding: 8px; color: #9ca3af; cursor: pointer; text-decoration: none; transition: color 0.2s;">
                        <span class="material-icons" style="font-size: 24px;">person_outline</span>
                        <span style="font-size: 10px; font-weight: 500; letter-spacing: 0.05em;">Perfil</span>
                    </a>
                </div>
            </nav>
        </div>
    </div>

    <!-- Filters Modal -->
    <div class="filters-overlay" id="filtersOverlay" onclick="app.closeFilters()"
        style="display: none !important; z-index: 9999;"></div>
    <div class="filters-modal" id="filtersModal" style="display: none !important; z-index: 9999;">
        <div class="filters-header">
            <h2 class="filters-title">Filtros</h2>
            <button class="back-btn" onclick="app.closeFilters()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>

        <!-- Active Filters -->
        <div class="active-filters" id="activeFilters" style="display: none;">
            <!-- Populated by JS -->
        </div>

        <!-- Filter Tabs -->
        <div class="filters-tabs">
            <button class="filter-tab active" onclick="app.showFilterTab('sector')">Sector</button>
            <button class="filter-tab" onclick="app.showFilterTab('modalidad')">Modalidad</button>
            <button class="filter-tab" onclick="app.showFilterTab('salario')">Salario</button>
            <button class="filter-tab" onclick="app.showFilterTab('ubicacion')">Ubicación</button>
            <button class="filter-tab" onclick="app.showFilterTab('tamaño')">Tamaño</button>
            <button class="filter-tab" onclick="app.showFilterTab('techStack')">Tech Stack</button>
        </div>

        <div class="filters-content">
            <!-- Sector Filter -->
            <div class="filter-section" id="filter-sector">
                <div class="filter-section-header">
                    <div class="filter-section-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                        </svg>
                    </div>
                    <h3 class="filter-section-title">Sector / Industria</h3>
                </div>
                <div class="filter-chips">
                    <button class="filter-chip"
                        onclick="app.toggleFilterChip(this, 'sector', 'Tech')">Tecnología</button>
                    <button class="filter-chip"
                        onclick="app.toggleFilterChip(this, 'sector', 'FinTech')">FinTech</button>
                    <button class="filter-chip" onclick="app.toggleFilterChip(this, 'sector', 'SaaS')">SaaS</button>
                    <button class="filter-chip"
                        onclick="app.toggleFilterChip(this, 'sector', 'E-commerce')">E-commerce</button>
                    <button class="filter-chip"
                        onclick="app.toggleFilterChip(this, 'sector', 'HealthTech')">HealthTech</button>
                    <button class="filter-chip" onclick="app.toggleFilterChip(this, 'sector', 'EdTech')">EdTech</button>
                    <button class="filter-chip"
                        onclick="app.toggleFilterChip(this, 'sector', 'CleanTech')">CleanTech</button>
                    <button class="filter-chip" onclick="app.toggleFilterChip(this, 'sector', 'Data')">Data &
                        Analytics</button>
                </div>
            </div>

            <!-- Modalidad Filter -->
            <div class="filter-section" id="filter-modalidad" style="display: none;">
                <div class="filter-section-header">
                    <div class="filter-section-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                        </svg>
                    </div>
                    <h3 class="filter-section-title">Modalidad de Trabajo</h3>
                </div>
                <div class="filter-chips">
                    <button class="filter-chip" onclick="app.toggleFilterChip(this, 'modalidad', 'Remoto')">100%
                        Remoto</button>
                    <button class="filter-chip"
                        onclick="app.toggleFilterChip(this, 'modalidad', 'Híbrido')">Híbrido</button>
                    <button class="filter-chip"
                        onclick="app.toggleFilterChip(this, 'modalidad', 'Presencial')">Presencial</button>
                    <button class="filter-chip"
                        onclick="app.toggleFilterChip(this, 'modalidad', 'Remote-first')">Remote-first</button>
                </div>
            </div>

            <!-- Salario Filter -->
            <div class="filter-section" id="filter-salario" style="display: none;">
                <div class="filter-section-header">
                    <div class="filter-section-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>


                    <h3 class="filter-section-title">Rango Salarial</h3>
                </div>
                <div class="filter-chips">
                    <button class="filter-chip" onclick="app.toggleFilterChip(this, 'salario', '1-2M')">$1M -
                        $2M</button>
                    <button class="filter-chip" onclick="app.toggleFilterChip(this, 'salario', '2-3M')">$2M -
                        $3M</button>
                    <button class="filter-chip" onclick="app.toggleFilterChip(this, 'salario', '3-4M')">$3M -
                        $4M</button>
                    <button class="filter-chip" onclick="app.toggleFilterChip(this, 'salario', '4M+')">$4M+</button>
                </div>
            </div>

            <!-- Ubicación Filter -->
            <div class="filter-section" id="filter-ubicacion" style="display: none;">
                <div class="filter-section-header">
                    <div class="filter-section-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                        </svg>
                    </div>
                    <h3 class="filter-section-title">Ubicación y Distancia</h3>
                </div>

                <div
                    style="margin-bottom: 24px; padding: 16px; background: #f8fafc; border-radius: 12px; border: 1px solid #e2e8f0;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                        <span style="font-size: 14px; font-weight: 600; color: #1e293b;">Distancia Máxima</span>
                        <span id="distanceFilterValue"
                            style="font-size: 14px; font-weight: 700; color: #1392ec;">Cualquiera</span>
                    </div>
                    <input type="range" id="distanceFilterSlider" min="5" max="200" step="5" value="200"
                        style="width: 100%; accent-color: #1392ec; cursor: pointer;"
                        oninput="app.updateDistanceFilter(this.value)">
                    <div
                        style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 11px; color: #94a3b8; font-weight: 500;">
                        <span>5 km</span>
                        <span>&gt; 200 km</span>
                    </div>
                    <p id="distanceFilterWarning"
                        style="margin: 8px 0 0 0; font-size: 11px; color: #ef4444; display: none;">
                        * Configura tu ubicación en tu Perfil de Empresa para usar este filtro.
                    </p>
                </div>

                <h4
                    style="font-size: 13px; font-weight: 600; color: #64748b; margin: 0 0 12px 4px; text-transform: uppercase; letter-spacing: 0.05em;">
                    Región Específica</h4>
                <div class="filter-chips">
                    <button class="filter-chip"
                        onclick="app.toggleFilterChip(this, 'ubicacion', 'Santiago')">Santiago</button>
                    <button class="filter-chip"
                        onclick="app.toggleFilterChip(this, 'ubicacion', 'Chile')">Chile</button>
                    <button class="filter-chip"
                        onclick="app.toggleFilterChip(this, 'ubicacion', 'LATAM')">LATAM</button>
                    <button class="filter-chip" onclick="app.toggleFilterChip(this, 'ubicacion', 'Global')">Global /
                        Anywhere</button>
                </div>
            </div>

            <!-- Tamaño Filter -->
            <div class="filter-section" id="filter-tamaño" style="display: none;">
                <div class="filter-section-header">
                    <div class="filter-section-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                        </svg>
                    </div>
                    <h3 class="filter-section-title">Tamaño de Empresa</h3>
                </div>
                <div class="filter-chips">
                    <button class="filter-chip" onclick="app.toggleFilterChip(this, 'tamaño', 'Startup')">Startup
                        (1-10)</button>
                    <button class="filter-chip" onclick="app.toggleFilterChip(this, 'tamaño', 'Pequeña')">Pequeña
                        (11-50)</button>
                    <button class="filter-chip" onclick="app.toggleFilterChip(this, 'tamaño', 'Mediana')">Mediana
                        (51-200)</button>
                    <button class="filter-chip" onclick="app.toggleFilterChip(this, 'tamaño', 'Grande')">Grande
                        (200+)</button>
                </div>
            </div>

            <!-- Tech Stack Filter -->
            <div class="filter-section" id="filter-techStack" style="display: none;">
                <div class="filter-section-header">
                    <div class="filter-section-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
                        </svg>
                    </div>
                    <h3 class="filter-section-title">Tech Stack</h3>
                </div>
                <div class="filter-chips">
                    <button class="filter-chip"
                        onclick="app.toggleFilterChip(this, 'techStack', 'React')">React</button>
                    <button class="filter-chip"
                        onclick="app.toggleFilterChip(this, 'techStack', 'Node.js')">Node.js</button>
                    <button class="filter-chip"
                        onclick="app.toggleFilterChip(this, 'techStack', 'Python')">Python</button>
                    <button class="filter-chip" onclick="app.toggleFilterChip(this, 'techStack', 'Java')">Java</button>
                    <button class="filter-chip" onclick="app.toggleFilterChip(this, 'techStack', 'AWS')">AWS</button>
                    <button class="filter-chip" onclick="app.toggleFilterChip(this, 'techStack', 'SQL')">SQL</button>
                    <button class="filter-chip"
                        onclick="app.toggleFilterChip(this, 'techStack', 'TypeScript')">TypeScript</button>
                    <button class="filter-chip" onclick="app.toggleFilterChip(this, 'techStack', 'Go')">Go</button>
                </div>
            </div>
        </div>

        <div class="filters-footer">
            <button class="btn-secondary" onclick="app.clearFilters()">Limpiar</button>
            <button class="btn-primary" onclick="app.applyFilters()">Aplicar Filtros</button>
        </div>
    </div>

    <!-- Company Detail Modal -->
    <div class="company-modal-overlay" id="companyModalOverlay" onclick="app.closeCompanyModal(event)"
        style="display: none !important; z-index: 10001;">
        <div class="company-modal" id="companyModal" onclick="event.stopPropagation()">
            <div class="company-modal-header">
                <h3 style="font-family: 'Sora', sans-serif; font-size: 18px;">Detalles de la Empresa</h3>
                <button class="company-modal-close" onclick="app.closeCompanyModal()">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="company-modal-body" id="companyModalBody">
                <!-- Content populated by JS -->
            </div>
        </div>
    </div>

    <!-- Preview Modal - Candidate Profile Preview (Stitch) -->
    <div id="previewModalOverlay"
        style="display: none; position: fixed; inset: 0; z-index: 10000; background: #F8F9FA; font-family: 'Inter', sans-serif; max-width: 480px; margin: 0 auto; flex-direction: column; overflow: hidden;">

        <!-- Sticky Header -->
        <header
            style="display: flex; align-items: center; justify-content: space-between; padding: 44px 20px 14px; position: sticky; top: 0; z-index: 20; background: rgba(248,249,250,0.9); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);">
            <div style="width: 40px;"></div>
            <h1
                style="margin: 0; font-size: 17px; font-weight: 700; letter-spacing: -0.01em; color: #1f2937; text-align: center;">
                Vista Previa</h1>
            <button onclick="app.closePreviewModal()"
                style="width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: none; border: none; cursor: pointer; color: #6b7280; transition: background 0.2s;"
                onmouseover="this.style.background='rgba(0,0,0,0.05)'" onmouseout="this.style.background='none'">
                <span class="material-icons" style="font-size: 24px;">close</span>
            </button>
        </header>

        <!-- Scrollable main content -->
        <main
            style="flex: 1; overflow-y: auto; display: flex; flex-direction: column; align-items: center; padding: 0 16px 120px;">

            <!-- Info banner -->
            <div style="margin-bottom: 20px; margin-top: 4px;">
                <div
                    style="display: inline-flex; align-items: center; gap: 8px; padding: 8px 16px; border-radius: 99px; background: #eff6ff; border: 1px solid #dbeafe;">
                    <span class="material-icons" style="font-size: 14px; color: #1e40af;">visibility</span>
                    <p
                        style="margin: 0; font-size: 11px; font-weight: 700; color: #1e40af; text-transform: uppercase; letter-spacing: 0.04em;">
                        Así es como te ven las empresas</p>
                </div>
            </div>

            <!-- Preview Card -->
            <div
                style="width: 100%; max-width: 360px; aspect-ratio: 3/4; position: relative; border-radius: 20px; overflow: hidden; background: #ffffff; box-shadow: 0 10px 40px -10px rgba(0,0,0,0.1); border: 1px solid #f3f4f6;">

                <!-- Cover image/video (top 60%) -->
                <div
                    style="position: absolute; top: 0; left: 0; right: 0; height: 60%; background: #e5e7eb; overflow: hidden; display: flex; align-items: center; justify-content: center;">
                    <img id="pvCardImage" alt="Tu perfil" style="width: 100%; height: 100%; object-fit: cover;"
                        src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=">
                    <video id="pvCardVideo" style="display: none; width: 100%; height: 100%; object-fit: cover;"
                        playsinline preload="metadata" loop muted autoplay></video>
                    <div
                        style="position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.15), transparent); pointer-events: none;">
                    </div>
                </div>

                <!-- Info button (top right) -->
                <button
                    style="position: absolute; top: 14px; right: 14px; width: 40px; height: 40px; background: rgba(255,255,255,0.3); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.4); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #ffffff; cursor: pointer; z-index: 10; box-shadow: 0 1px 4px rgba(0,0,0,0.1);"
                    onclick="app.closePreviewModal(); app.openCardDetail('self');">
                    <span class="material-icons" style="font-size: 22px;">info</span>
                </button>

                <!-- Bottom info section (40%) -->
                <div
                    style="position: absolute; bottom: 0; left: 0; right: 0; height: 40%; background: #ffffff; padding: 20px; display: flex; flex-direction: column; gap: 10px;">
                    <!-- Name + verified -->
                    <div>
                        <div style="display: flex; align-items: flex-end; gap: 6px; margin-bottom: 4px;">
                            <h2 id="pvCardName"
                                style="margin: 0; font-size: 22px; font-weight: 800; color: #111827; line-height: 1; letter-spacing: -0.02em;">
                            </h2>
                            <span class="material-icons"
                                style="font-size: 20px; color: #1392ec; margin-bottom: 1px;">verified</span>
                        </div>
                        <p id="pvCardRole"
                            style="margin: 3px 0 0; font-size: 14px; font-weight: 500; color: #4b5563; display: flex; align-items: center; gap: 6px;">
                            <span class="material-icons" style="font-size: 17px; color: #9ca3af;">work</span>
                            <span id="pvCardRoleText"></span>
                        </p>
                    </div>

                    <!-- Divider -->
                    <div style="height: 1px; background: #f3f4f6;"></div>

                    <!-- Skills -->
                    <div id="pvCardSkills" style="display: flex; flex-wrap: wrap; gap: 6px;"></div>

                    <!-- View full profile button -->
                    <button onclick="app.closePreviewModal(); app.openCardDetail('self');"
                        style="margin-top: auto; width: 100%; display: flex; align-items: center; justify-content: center; gap: 6px; padding: 10px; border-radius: 12px; border: 1px solid #e5e7eb; background: #ffffff; cursor: pointer; color: #4b5563; font-family: 'Inter', sans-serif; transition: background 0.15s;"
                        onmouseover="this.style.background='#f9fafb'" onmouseout="this.style.background='#ffffff'">
                        <span style="font-size: 13px; font-weight: 600;">Ver perfil completo</span>
                        <span class="material-icons" style="font-size: 18px;">keyboard_arrow_down</span>
                    </button>
                </div>
            </div>

            <!-- Completeness text -->
            <p
                style="margin-top: 20px; text-align: center; font-size: 13px; color: #6b7280; padding: 0 32px; line-height: 1.5;">
                Tu perfil tiene un <span id="pvCompletenessPercent" style="color: #1392ec; font-weight: 700;">0%</span>
                de completitud. Las empresas con mejor match verán esta tarjeta primero.
            </p>
        </main>

        <!-- Bottom CTA -->
        <div
            style="position: absolute; bottom: 0; left: 0; right: 0; padding: 24px; background: linear-gradient(to top, #F8F9FA, rgba(248,249,250,0.95) 60%, transparent); z-index: 30; display: flex; justify-content: center;">
            <button onclick="app.closePreviewModal()"
                style="width: 100%; max-width: 320px; height: 52px; background: #1392ec; border: none; border-radius: 16px; color: #ffffff; font-size: 15px; font-weight: 700; font-family: 'Inter', sans-serif; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; box-shadow: 0 8px 24px rgba(19,146,236,0.25); transition: opacity 0.2s;"
                onmouseover="this.style.opacity='0.9'" onmouseout="this.style.opacity='1'">
                <span class="material-icons" style="font-size: 20px;">edit</span>
                Volver a editar
            </button>
        </div>
    </div>
    <!-- ===== INLINE STYLES FOR UX ENHANCEMENTS ===== -->
    <style>
        .glass-effect {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .cta-gradient {
            background: linear-gradient(135deg, #1392ec 0%, #2dd4bf 100%);
        }

        .input-error {
            border-color: var(--danger) !important;
            box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1) !important;
        }

        .skills-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2100;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 24px;
        }

        .skills-modal-content {
            background: var(--surface);
            width: 100%;
            max-width: 400px;
            border-radius: 24px;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .skill-tag {
            padding: 8px 16px;
            border-radius: 20px;
            background: var(--bg);
            border: 1px solid var(--border);
            font-size: 13px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
        }

        .skill-tag.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
    </style>

    <!-- ===== CREATE OFFER VIEW (Fixed Full Screen Modal) ===== -->
    <!-- CREATE OFFER - Multi-step Wizard (Stitch) -->
    <div id="createOfferView" class="view"
        style="display: none; position: fixed; top: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 480px; height: 100vh; background: #ffffff; z-index: 2000; flex-direction: column; font-family: 'Inter', sans-serif;">

        <!-- Sticky Header -->
        <div
            style="padding: 16px 20px; display: flex; align-items: center; gap: 16px; background: #ffffff; border-bottom: 1px solid #e2e8f0; flex-shrink: 0;">
            <button onclick="app.prevOfferStep()"
                style="background: none; border: none; cursor: pointer; padding: 4px; display: flex; align-items: center; justify-content: center;">
                <span class="material-icons" style="font-size: 24px; color: #1e293b;">arrow_back</span>
            </button>
            <h1 id="offerStepTitle" style="margin: 0; font-size: 18px; font-weight: 700; color: #1e293b; flex: 1;">Nueva
                Oferta</h1>
            <button onclick="app.cancelCreateOffer()"
                style="background: none; border: none; font-size: 14px; font-weight: 600; color: #64748b; cursor: pointer;">Cancelar</button>
        </div>

        <!-- Segmented Progress Bar -->
        <div style="padding: 12px 20px 0; background: #ffffff; flex-shrink: 0;">
            <div style="display: flex; gap: 6px;">
                <div id="offerBar1"
                    style="height: 5px; flex: 1; border-radius: 100px; background: #1392ec; transition: background 0.3s;">
                </div>
                <div id="offerBar2"
                    style="height: 5px; flex: 1; border-radius: 100px; background: #e2e8f0; transition: background 0.3s;">
                </div>
                <div id="offerBar3"
                    style="height: 5px; flex: 1; border-radius: 100px; background: #e2e8f0; transition: background 0.3s;">
                </div>
                <div id="offerBar4"
                    style="height: 5px; flex: 1; border-radius: 100px; background: #e2e8f0; transition: background 0.3s;">
                </div>
            </div>
        </div>

        <!-- Scrollable Content Area -->
        <div style="flex: 1; overflow-y: auto; padding: 24px 20px 100px;">

            <!-- ========== STEP 1: Datos Básicos ========== -->
            <div id="offerStep1" style="display: block;">
                <div style="margin-bottom: 8px;">
                    <h2 style="margin: 0; font-size: 20px; font-weight: 700; color: #1e293b;">Comencemos con lo básico
                    </h2>
                    <p style="margin: 4px 0 0; font-size: 14px; color: #64748b;">Define el cargo y la modalidad de
                        trabajo.</p>
                </div>

                <!-- Job Title -->
                <div style="margin-top: 24px;">
                    <label
                        style="display: block; font-size: 13px; font-weight: 600; color: #1e293b; margin-bottom: 6px;">Cargo
                        / Título <span style="color: #ef4444;">*</span></label>
                    <input type="text" id="offerTitle" placeholder="Ej: Senior Frontend Developer"
                        style="width: 100%; padding: 12px 16px; border: 1.5px solid #e2e8f0; border-radius: 12px; font-size: 15px; color: #1e293b; background: #ffffff; outline: none; box-sizing: border-box; transition: border-color 0.2s;"
                        onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 3px rgba(19,146,236,0.1)'"
                        onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'">
                    <small id="offerTitleError"
                        style="color: #ef4444; display: none; margin-top: 4px; font-size: 12px;">Este campo es
                        obligatorio</small>
                </div>

                <!-- Professional Title / Department -->
                <div style="margin-top: 20px;">
                    <label
                        style="display: block; font-size: 13px; font-weight: 600; color: #1e293b; margin-bottom: 6px;">Título
                        Profesional Requerido</label>
                    <div style="position: relative;">
                        <input type="text" id="offerProfessionalTitle"
                            placeholder="Ej: Ingeniero Informático, Téc. Analista..."
                            style="width: 100%; padding: 12px 16px; border: 1.5px solid #e2e8f0; border-radius: 12px; font-size: 15px; color: #1e293b; background: #ffffff; outline: none; box-sizing: border-box; transition: border-color 0.2s;"
                            onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 3px rgba(19,146,236,0.1)'"
                            onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'">
                    </div>
                    <small id="offerProfessionalTitleError"
                        style="color: #ef4444; display: none; margin-top: 4px; font-size: 12px;">Este campo es
                        obligatorio</small>
                </div>

                <!-- Work Modality - Radio Cards -->
                <div style="margin-top: 20px;">
                    <label
                        style="display: block; font-size: 13px; font-weight: 600; color: #1e293b; margin-bottom: 10px;">Modalidad
                        de Trabajo <span style="color: #ef4444;">*</span></label>
                    <div style="display: flex; gap: 10px;">
                        <!-- Remote -->
                        <label id="offerModalityRemoto" onclick="app.selectOfferModality('Remoto')"
                            style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: 8px; padding: 16px 8px; border: 1.5px solid #e2e8f0; border-radius: 12px; cursor: pointer; transition: all 0.2s; background: #ffffff;">
                            <span class="material-icons" style="font-size: 28px; color: #64748b;">laptop_mac</span>
                            <span style="font-size: 13px; font-weight: 500; color: #1e293b;">Remoto</span>
                            <input type="radio" name="offerModalityRadio" value="Remoto" style="display: none;">
                        </label>
                        <!-- Hybrid -->
                        <label id="offerModalityHíbrido" onclick="app.selectOfferModality('Híbrido')"
                            style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: 8px; padding: 16px 8px; border: 1.5px solid #e2e8f0; border-radius: 12px; cursor: pointer; transition: all 0.2s; background: #ffffff;">
                            <span class="material-icons" style="font-size: 28px; color: #64748b;">sync_alt</span>
                            <span style="font-size: 13px; font-weight: 500; color: #1e293b;">Híbrido</span>
                            <input type="radio" name="offerModalityRadio" value="Híbrido" style="display: none;">
                        </label>
                        <!-- On-site -->
                        <label id="offerModalityPresencial" onclick="app.selectOfferModality('Presencial')"
                            style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: 8px; padding: 16px 8px; border: 1.5px solid #e2e8f0; border-radius: 12px; cursor: pointer; transition: all 0.2s; background: #ffffff;">
                            <span class="material-icons" style="font-size: 28px; color: #64748b;">business</span>
                            <span style="font-size: 13px; font-weight: 500; color: #1e293b;">Presencial</span>
                            <input type="radio" name="offerModalityRadio" value="Presencial" style="display: none;">
                        </label>
                    </div>
                    <input type="hidden" id="offerModality" value="">
                </div>
            </div>

            <!-- ========== STEP 2: Requisitos y Salario ========== -->
            <div id="offerStep2" style="display: none;">
                <div style="margin-bottom: 8px;">
                    <h2 style="margin: 0; font-size: 24px; font-weight: 800; color: #1e293b; letter-spacing: -0.02em;">
                        Requisitos y Salario</h2>
                    <p style="margin: 6px 0 0; font-size: 14px; color: #6b7280; font-weight: 500;">Define la
                        compensación y el perfil buscado.</p>
                </div>

                <!-- Salary Range -->
                <div style="margin-top: 28px;">
                    <div
                        style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
                        <h3 style="margin: 0; font-size: 16px; font-weight: 700; color: #1e293b;">Rango Salarial</h3>
                        <div style="position: relative;">
                            <select id="offerCurrency"
                                style="appearance: none; -webkit-appearance: none; background: #ffffff; color: #1e293b; font-size: 13px; font-weight: 700; padding: 6px 28px 6px 10px; border-radius: 8px; border: 1px solid #e5e7eb; outline: none; cursor: pointer; box-shadow: 0 1px 2px rgba(0,0,0,0.05);"
                                onfocus="this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.3)'"
                                onblur="this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'">
                                <option value="$">CLP / Mes</option>
                                <option value="US$">USD / Mes</option>
                            </select>
                            <span class="material-icons"
                                style="position: absolute; right: 4px; top: 50%; transform: translateY(-50%); font-size: 16px; color: #6b7280; pointer-events: none;">expand_more</span>
                        </div>
                    </div>
                    <div style="display: flex; gap: 12px; align-items: center;">
                        <div style="flex: 1;">
                            <label
                                style="display: block; font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: #6b7280; margin-bottom: 6px;">Min</label>
                            <div style="position: relative;">
                                <span
                                    style="position: absolute; left: 14px; top: 50%; transform: translateY(-50%); font-size: 15px; color: #9ca3af; font-weight: 700;">$</span>
                                <input type="text" id="offerSalaryMin" placeholder="800.000"
                                    oninput="app.formatCurrency(this)"
                                    style="width: 100%; padding: 14px 14px 14px 30px; border: 1.5px solid #e5e7eb; border-radius: 12px; font-size: 16px; font-weight: 700; color: #1e293b; background: #ffffff; outline: none; box-sizing: border-box; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05);"
                                    onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 3px rgba(19,146,236,0.1)'"
                                    onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'">
                            </div>
                            <small id="offerSalaryMinError"
                                style="color: #ef4444; display: none; margin-top: 4px; font-size: 12px;">Requerido</small>
                        </div>
                        <div style="padding-top: 20px; color: #d1d5db;">
                            <span class="material-icons" style="font-size: 20px;">remove</span>
                        </div>
                        <div style="flex: 1;">
                            <label
                                style="display: block; font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: #6b7280; margin-bottom: 6px;">Max</label>
                            <div style="position: relative;">
                                <span
                                    style="position: absolute; left: 14px; top: 50%; transform: translateY(-50%); font-size: 15px; color: #9ca3af; font-weight: 700;">$</span>
                                <input type="text" id="offerSalaryMax" placeholder="1.500.000"
                                    oninput="app.formatCurrency(this)"
                                    style="width: 100%; padding: 14px 14px 14px 30px; border: 1.5px solid #e5e7eb; border-radius: 12px; font-size: 16px; font-weight: 700; color: #1e293b; background: #ffffff; outline: none; box-sizing: border-box; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05);"
                                    onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 3px rgba(19,146,236,0.1)'"
                                    onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'">
                            </div>
                            <small id="offerSalaryMaxError"
                                style="color: #ef4444; display: none; margin-top: 4px; font-size: 12px;">Requerido</small>
                        </div>
                    </div>
                </div>

                <!-- Years of Experience Stepper -->
                <div style="margin-top: 28px;">
                    <h3 style="margin: 0 0 12px; font-size: 16px; font-weight: 700; color: #1e293b;">Años de Experiencia
                    </h3>
                    <div
                        style="background: #ffffff; border-radius: 16px; padding: 16px; border: 1px solid #e5e7eb; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 1px 2px rgba(0,0,0,0.05);">
                        <button onclick="app.adjustOfferExp(-1)"
                            style="width: 48px; height: 48px; border-radius: 12px; background: #f9fafb; border: 1px solid #e5e7eb; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background 0.2s;"
                            onmouseenter="this.style.background='#f3f4f6'"
                            onmouseleave="this.style.background='#f9fafb'">
                            <span class="material-icons" style="font-size: 22px; color: #1e293b;">remove</span>
                        </button>
                        <div style="display: flex; flex-direction: column; align-items: center;">
                            <span id="offerExpDisplay"
                                style="font-size: 28px; font-weight: 700; color: #1e293b; font-variant-numeric: tabular-nums;">0</span>
                            <span
                                style="font-size: 11px; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em;">Años</span>
                        </div>
                        <button onclick="app.adjustOfferExp(1)"
                            style="width: 48px; height: 48px; border-radius: 12px; background: #1392ec; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(19,146,236,0.3); transition: background 0.2s;"
                            onmouseenter="this.style.background='#0b6cb3'"
                            onmouseleave="this.style.background='#1392ec'">
                            <span class="material-icons" style="font-size: 22px; color: #ffffff;">add</span>
                        </button>
                    </div>
                    <input type="hidden" id="offerExperience" value="0">
                </div>

                <!-- Seniority Level -->
                <div style="margin-top: 28px;">
                    <h3 style="margin: 0 0 12px; font-size: 16px; font-weight: 700; color: #1e293b;">Nivel de Seniority
                    </h3>
                    <div style="display: flex; flex-wrap: wrap; gap: 8px;" id="offerSeniorityContainer">
                        <label onclick="app.selectOfferSeniority('Practicante', this)"
                            style="padding: 10px 18px; border-radius: 12px; border: 1.5px solid #e5e7eb; background: #f9fafb; color: #6b7280; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 6px; user-select: none;">
                            <span>Practicante</span>
                            <input type="radio" name="offerSeniority" value="Practicante" style="display: none;">
                        </label>
                        <label onclick="app.selectOfferSeniority('Junior', this)"
                            style="padding: 10px 18px; border-radius: 12px; border: 1.5px solid #e5e7eb; background: #f9fafb; color: #6b7280; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 6px; user-select: none;">
                            <span>Junior</span>
                            <input type="radio" name="offerSeniority" value="Junior" style="display: none;">
                        </label>
                        <label onclick="app.selectOfferSeniority('Mid-Level', this)"
                            style="padding: 10px 18px; border-radius: 12px; border: 1.5px solid #e5e7eb; background: #f9fafb; color: #6b7280; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 6px; user-select: none;">
                            <span>Mid-Level</span>
                            <input type="radio" name="offerSeniority" value="Mid-Level" style="display: none;">
                        </label>
                        <label onclick="app.selectOfferSeniority('Senior', this)"
                            style="padding: 10px 18px; border-radius: 12px; border: 1.5px solid #e5e7eb; background: #f9fafb; color: #6b7280; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 6px; user-select: none;">
                            <span>Senior</span>
                            <input type="radio" name="offerSeniority" value="Senior" style="display: none;">
                        </label>
                        <label onclick="app.selectOfferSeniority('Lead', this)"
                            style="padding: 10px 18px; border-radius: 12px; border: 1.5px solid #e5e7eb; background: #f9fafb; color: #6b7280; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 6px; user-select: none;">
                            <span>Lead</span>
                            <input type="radio" name="offerSeniority" value="Lead" style="display: none;">
                        </label>
                    </div>
                    <input type="hidden" id="offerSeniority" value="">
                </div>
            </div>

            <!-- ========== STEP 3: Habilidades y Descripción ========== -->
            <div id="offerStep3" style="display: none;">
                <div style="margin-bottom: 24px;">
                    <h2 style="margin: 0; font-size: 24px; font-weight: 800; color: #1e293b; letter-spacing: -0.02em;">
                        Habilidades y Descripción</h2>
                    <p style="margin: 6px 0 0; font-size: 14px; color: #64748b; line-height: 1.5;">Define las
                        competencias clave y describe el rol para atraer a los mejores candidatos.</p>
                </div>

                <!-- Technical Skills -->
                <div style="margin-bottom: 28px;">
                    <div
                        style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
                        <h3 style="margin: 0; font-size: 16px; font-weight: 700; color: #1e293b;">Habilidades Técnicas
                        </h3>
                        <span
                            style="font-size: 11px; font-weight: 500; color: #1392ec; background: #eff6ff; padding: 4px 10px; border-radius: 100px; border: 1px solid #dbeafe;">Requerido</span>
                    </div>
                    <div style="position: relative; margin-bottom: 10px;">
                        <div
                            style="position: absolute; top: 50%; left: 12px; transform: translateY(-50%); display: flex; align-items: center; pointer-events: none;">
                            <span class="material-icons" style="font-size: 20px; color: #94a3b8;"
                                id="offerSkillsSearchIcon">code</span>
                        </div>
                        <input type="text" id="offerSkillsSearch"
                            placeholder="Buscar habilidades (ej. React, Python)..." onclick="app.openSkillsModal()"
                            readonly
                            style="width: 100%; padding: 12px 44px 12px 40px; border: 1.5px solid #e2e8f0; border-radius: 10px; font-size: 14px; color: #1e293b; background: #ffffff; outline: none; box-sizing: border-box; cursor: pointer; box-shadow: 0 1px 2px rgba(0,0,0,0.05); transition: all 0.2s;"
                            onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.15)'; document.getElementById('offerSkillsSearchIcon').style.color='#1392ec'"
                            onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'; document.getElementById('offerSkillsSearchIcon').style.color='#94a3b8'">
                        <div
                            style="position: absolute; top: 50%; right: 10px; transform: translateY(-50%); display: flex;">
                            <button onclick="app.openSkillsModal()"
                                style="background: none; border: none; padding: 4px; cursor: pointer; border-radius: 6px; display: flex; align-items: center; transition: all 0.2s;"
                                onmouseenter="this.style.background='#f1f5f9'"
                                onmouseleave="this.style.background='none'">
                                <span class="material-icons" style="font-size: 20px; color: #94a3b8;">add_circle</span>
                            </button>
                        </div>
                    </div>
                    <div id="offerSkillsDisplay" style="display: flex; flex-wrap: wrap; gap: 8px; min-height: 8px;">
                    </div>
                    <input type="hidden" id="offerSkills">
                    <small id="offerSkillsError"
                        style="color: #ef4444; display: none; margin-top: 6px; font-size: 12px;">Selecciona al menos una
                        habilidad</small>
                </div>

                <!-- Soft Skills -->
                <div style="margin-bottom: 28px;">
                    <div
                        style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
                        <h3 style="margin: 0; font-size: 16px; font-weight: 700; color: #1e293b;">Soft Skills</h3>
                        <span
                            style="font-size: 11px; font-weight: 500; color: #64748b; background: #f1f5f9; padding: 4px 10px; border-radius: 100px; border: 1px solid #e2e8f0;">Opcional</span>
                    </div>
                    <div style="position: relative; margin-bottom: 10px;">
                        <div
                            style="position: absolute; top: 50%; left: 12px; transform: translateY(-50%); display: flex; align-items: center; pointer-events: none;">
                            <span class="material-icons" style="font-size: 20px; color: #94a3b8;"
                                id="offerSoftSearchIcon">psychology</span>
                        </div>
                        <input type="text" id="offerSoftSkillsSearch"
                            placeholder="Buscar (ej. Liderazgo, Comunicación)..."
                            oninput="app.filterSoftSkillSuggestions(this.value)"
                            onkeydown="if(event.key==='Enter'){event.preventDefault(); app.addSoftSkillFromInput()}"
                            style="width: 100%; padding: 12px 16px 12px 40px; border: 1.5px solid #e2e8f0; border-radius: 10px; font-size: 14px; color: #1e293b; background: #ffffff; outline: none; box-sizing: border-box; box-shadow: 0 1px 2px rgba(0,0,0,0.05); transition: all 0.2s;"
                            onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.15)'; document.getElementById('offerSoftSearchIcon').style.color='#1392ec'"
                            onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'; document.getElementById('offerSoftSearchIcon').style.color='#94a3b8'; setTimeout(function(){app.hideSoftSkillSuggestions()}, 200)">
                        <!-- Suggestions dropdown -->
                        <div id="offerSoftSkillSuggestions"
                            style="display: none; position: absolute; top: 100%; left: 0; right: 0; background: #ffffff; border: 1px solid #e2e8f0; border-radius: 10px; margin-top: 4px; box-shadow: 0 4px 16px rgba(0,0,0,0.08); z-index: 10; max-height: 160px; overflow-y: auto;">
                        </div>
                    </div>
                    <div id="offerSoftSkillsDisplay" style="display: flex; flex-wrap: wrap; gap: 8px; min-height: 8px;">
                    </div>
                    <input type="hidden" id="offerSoftSkillsValue" value="">
                </div>

                <!-- Description -->
                <div>
                    <h3 style="margin: 0 0 12px; font-size: 16px; font-weight: 700; color: #1e293b;">Descripción del
                        puesto</h3>
                    <div style="position: relative;">
                        <textarea id="offerDescription" rows="6"
                            placeholder="Describe las responsabilidades, la cultura del equipo, beneficios y lo que buscas en el candidato ideal..."
                            oninput="app.updateDescriptionCount()" maxlength="2500"
                            style="width: 100%; padding: 14px 16px 28px; border: 1.5px solid #e2e8f0; border-radius: 10px; font-size: 14px; color: #1e293b; background: #ffffff; outline: none; resize: none; box-sizing: border-box; font-family: 'Inter', sans-serif; line-height: 1.6; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05);"
                            onfocus="this.style.borderColor='#1392ec'; this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.15)'"
                            onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'"></textarea>
                        <div id="offerDescCount"
                            style="position: absolute; bottom: 10px; right: 14px; font-size: 11px; color: #94a3b8; pointer-events: none; background: #ffffff; padding: 0 4px; border-radius: 4px;">
                            0/2500</div>
                    </div>
                    <!-- Quick add chips -->
                    <div
                        style="display: flex; gap: 8px; overflow-x: auto; padding: 10px 0 2px; -ms-overflow-style: none; scrollbar-width: none;">
                        <button onclick="app.appendToDescription('Trabajo 100% remoto. ')"
                            style="flex-shrink: 0; font-size: 12px; font-weight: 500; color: #1392ec; border: 1px solid rgba(19,146,236,0.2); background: rgba(19,146,236,0.05); padding: 6px 12px; border-radius: 100px; cursor: pointer; transition: background 0.2s;"
                            onmouseenter="this.style.background='rgba(19,146,236,0.1)'"
                            onmouseleave="this.style.background='rgba(19,146,236,0.05)'">+ Remoto</button>
                        <button onclick="app.appendToDescription('Ofrecemos seguro médico completo. ')"
                            style="flex-shrink: 0; font-size: 12px; font-weight: 500; color: #1392ec; border: 1px solid rgba(19,146,236,0.2); background: rgba(19,146,236,0.05); padding: 6px 12px; border-radius: 100px; cursor: pointer; transition: background 0.2s;"
                            onmouseenter="this.style.background='rgba(19,146,236,0.1)'"
                            onmouseleave="this.style.background='rgba(19,146,236,0.05)'">+ Seguro Médico</button>
                        <button onclick="app.appendToDescription('Stock options disponibles. ')"
                            style="flex-shrink: 0; font-size: 12px; font-weight: 500; color: #1392ec; border: 1px solid rgba(19,146,236,0.2); background: rgba(19,146,236,0.05); padding: 6px 12px; border-radius: 100px; cursor: pointer; transition: background 0.2s;"
                            onmouseenter="this.style.background='rgba(19,146,236,0.1)'"
                            onmouseleave="this.style.background='rgba(19,146,236,0.05)'">+ Stock Options</button>
                        <button onclick="app.appendToDescription('Horario flexible. ')"
                            style="flex-shrink: 0; font-size: 12px; font-weight: 500; color: #1392ec; border: 1px solid rgba(19,146,236,0.2); background: rgba(19,146,236,0.05); padding: 6px 12px; border-radius: 100px; cursor: pointer; transition: background 0.2s;"
                            onmouseenter="this.style.background='rgba(19,146,236,0.1)'"
                            onmouseleave="this.style.background='rgba(19,146,236,0.05)'">+ Horario Flexible</button>
                    </div>
                </div>
            </div>

            <!-- ========== STEP 4: Revisión ========== -->
            <div id="offerStep4" style="display: none;">
                <div style="margin-bottom: 8px;">
                    <h2 style="margin: 0; font-size: 20px; font-weight: 700; color: #1e293b;">Revisa y publica</h2>
                    <p style="margin: 4px 0 0; font-size: 14px; color: #64748b;">Verifica que toda la información sea
                        correcta.</p>
                </div>

                <!-- Review Card -->
                <div
                    style="margin-top: 20px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 16px; overflow: hidden;">
                    <!-- Title Section -->
                    <div style="padding: 20px; border-bottom: 1px solid #e2e8f0;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                            <div
                                style="width: 40px; height: 40px; background: linear-gradient(135deg, #1392ec, #0b6cb3); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                                <span class="material-icons" style="font-size: 22px; color: #ffffff;">work</span>
                            </div>
                            <div>
                                <div id="reviewTitle" style="font-size: 16px; font-weight: 700; color: #1e293b;">-</div>
                                <div id="reviewProfTitle" style="font-size: 13px; color: #64748b;">-</div>
                            </div>
                        </div>
                    </div>

                    <!-- Details Grid -->
                    <div style="padding: 16px 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                        <div>
                            <div
                                style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 4px;">
                                Modalidad</div>
                            <div id="reviewModality" style="font-size: 14px; font-weight: 500; color: #1e293b;">-</div>
                        </div>
                        <div>
                            <div
                                style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 4px;">
                                Experiencia</div>
                            <div id="reviewExperience" style="font-size: 14px; font-weight: 500; color: #1e293b;">-
                            </div>
                        </div>
                        <div>
                            <div
                                style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 4px;">
                                Seniority</div>
                            <div id="reviewSeniority" style="font-size: 14px; font-weight: 500; color: #1e293b;">-</div>
                        </div>
                        <div style="grid-column: 1 / -1;">
                            <div
                                style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 4px;">
                                Salario</div>
                            <div id="reviewSalary" style="font-size: 16px; font-weight: 700; color: #1392ec;">-</div>
                        </div>
                    </div>

                    <!-- Skills -->
                    <div style="padding: 0 20px 16px;">
                        <div
                            style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 8px;">
                            Habilidades Técnicas</div>
                        <div id="reviewSkills" style="display: flex; flex-wrap: wrap; gap: 6px;">-</div>
                    </div>

                    <!-- Soft Skills -->
                    <div id="reviewSoftSkillsSection" style="padding: 0 20px 16px; display: none;">
                        <div
                            style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 8px;">
                            Soft Skills</div>
                        <div id="reviewSoftSkills" style="display: flex; flex-wrap: wrap; gap: 6px;"></div>
                    </div>

                    <!-- Description -->
                    <div style="padding: 0 20px 20px;">
                        <div
                            style="font-size: 11px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 8px;">
                            Descripción</div>
                        <div id="reviewDescription"
                            style="font-size: 13px; color: #475569; line-height: 1.6; white-space: pre-wrap;">-</div>
                    </div>
                </div>

                <!-- Edit hint -->
                <div style="margin-top: 16px; text-align: center;">
                    <button onclick="app.goToOfferStep(1)"
                        style="background: none; border: none; font-size: 13px; color: #1392ec; font-weight: 600; cursor: pointer; padding: 8px;">
                        <span class="material-icons"
                            style="font-size: 16px; vertical-align: middle; margin-right: 4px;">edit</span>
                        Editar información
                    </button>
                </div>
            </div>
        </div>

        <!-- Sticky Bottom Button -->
        <div style="padding: 16px 20px; background: #ffffff; border-top: 1px solid #e2e8f0; flex-shrink: 0;">
            <button id="offerNextBtn" onclick="app.nextOfferStep()"
                style="width: 100%; padding: 14px; background: #1392ec; color: #ffffff; border: none; border-radius: 12px; font-size: 15px; font-weight: 700; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; box-shadow: 0 4px 12px rgba(19,146,236,0.3); transition: background 0.2s;"
                onmouseenter="this.style.background='#0b6cb3'" onmouseleave="this.style.background='#1392ec'">
                <span id="offerBtnText">Continuar</span>
                <span id="offerBtnIcon" class="material-icons" style="font-size: 20px;">arrow_forward</span>
            </button>
        </div>

        <!-- SUCCESS SCREEN (overlay) -->
        <div id="offerSuccessScreen"
            style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #f6f7f8; z-index: 2050; flex-direction: column; font-family: 'Inter', sans-serif; overflow: hidden;">
            <!-- Decorative background shapes -->
            <div
                style="position: absolute; top: -10%; left: -10%; width: 250px; height: 250px; background: rgba(19,146,236,0.08); border-radius: 50%; filter: blur(60px); pointer-events: none;">
            </div>
            <div
                style="position: absolute; bottom: -5%; right: -10%; width: 280px; height: 280px; background: rgba(19,146,236,0.04); border-radius: 50%; filter: blur(60px); pointer-events: none;">
            </div>

            <!-- Centered content -->
            <div
                style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 24px; position: relative; z-index: 1;">
                <!-- Checkmark animation -->
                <div
                    style="position: relative; margin-bottom: 32px; display: flex; align-items: center; justify-content: center;">
                    <div
                        style="position: absolute; width: 192px; height: 192px; background: rgba(19,146,236,0.08); border-radius: 50%;">
                    </div>
                    <div
                        style="position: absolute; width: 160px; height: 160px; background: rgba(19,146,236,0.15); border-radius: 50%;">
                    </div>
                    <div
                        style="position: relative; width: 128px; height: 128px; background: #1392ec; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 32px rgba(19,146,236,0.35);">
                        <span class="material-icons"
                            style="font-size: 56px; color: #ffffff; font-weight: bold;">check</span>
                    </div>
                    <!-- Floating decorations -->
                    <div
                        style="position: absolute; top: -8px; right: -8px; width: 28px; height: 28px; background: #4CAF50; border-radius: 6px; transform: rotate(12deg); opacity: 0.8;">
                    </div>
                    <div
                        style="position: absolute; bottom: 4px; left: -20px; width: 20px; height: 20px; background: #FFC107; border-radius: 50%; opacity: 0.8;">
                    </div>
                    <div
                        style="position: absolute; top: 40px; right: -36px; width: 14px; height: 14px; background: #1392ec; border-radius: 3px; transform: rotate(45deg); opacity: 0.6;">
                    </div>
                </div>

                <!-- Text -->
                <div style="text-align: center; margin-bottom: 32px;">
                    <h1
                        style="margin: 0; font-size: 28px; font-weight: 800; color: #0f172a; line-height: 1.2; letter-spacing: -0.02em;">
                        ¡Oferta publicada<br>con éxito!
                    </h1>
                    <p
                        style="margin: 10px auto 0; font-size: 15px; color: #64748b; font-weight: 500; max-width: 280px; line-height: 1.5;">
                        Tu oferta ya está visible para miles de candidatos en Talently.
                    </p>
                </div>

                <!-- Job Summary Card -->
                <div id="offerSuccessCard"
                    style="width: 100%; background: #ffffff; border-radius: 16px; padding: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.06); border: 1px solid #f1f5f9; display: flex; align-items: center; gap: 14px; margin-bottom: 24px;">
                    <div
                        style="width: 56px; height: 56px; border-radius: 12px; background: linear-gradient(135deg, #1392ec, #0b6cb3); display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                        <span class="material-icons" style="font-size: 28px; color: #ffffff;">work</span>
                    </div>
                    <div style="flex: 1; min-width: 0;">
                        <h3 id="successOfferTitle"
                            style="margin: 0; font-size: 16px; font-weight: 700; color: #0f172a; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                            -</h3>
                        <div
                            style="display: flex; align-items: center; gap: 10px; margin-top: 4px; font-size: 13px; color: #64748b; font-weight: 500;">
                            <div style="display: flex; align-items: center; gap: 3px;">
                                <span class="material-icons" style="font-size: 15px;">schedule</span>
                                <span>Full-time</span>
                            </div>
                            <div style="width: 3px; height: 3px; background: #cbd5e1; border-radius: 50%;"></div>
                            <div id="successOfferModality"
                                style="display: flex; align-items: center; gap: 3px; color: #1392ec;">
                                <span class="material-icons" style="font-size: 15px;">public</span>
                                <span>Remoto</span>
                            </div>
                        </div>
                    </div>
                    <button onclick="app.editLastPublishedOffer()"
                        style="background: none; border: none; cursor: pointer; padding: 6px; display: flex; color: #94a3b8; transition: color 0.2s;"
                        onmouseenter="this.style.color='#1392ec'" onmouseleave="this.style.color='#94a3b8'">
                        <span class="material-icons" style="font-size: 22px;">edit</span>
                    </button>
                </div>
            </div>

            <!-- Bottom buttons -->
            <div style="padding: 20px 24px 32px; position: relative; z-index: 1;">
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <button onclick="app.viewPublishedOffer()"
                        style="width: 100%; height: 52px; background: #1392ec; color: #ffffff; font-size: 15px; font-weight: 700; border: none; border-radius: 12px; cursor: pointer; box-shadow: 0 4px 16px rgba(19,146,236,0.25); display: flex; align-items: center; justify-content: center; gap: 8px; transition: background 0.2s;"
                        onmouseenter="this.style.background='#0b6cb3'" onmouseleave="this.style.background='#1392ec'">
                        <span>Ver mi oferta</span>
                        <span class="material-icons" style="font-size: 20px;">arrow_forward</span>
                    </button>
                    <button onclick="app.closeOfferSuccess()"
                        style="width: 100%; height: 52px; background: transparent; color: #475569; font-size: 15px; font-weight: 700; border: none; border-radius: 12px; cursor: pointer; transition: background 0.2s;"
                        onmouseenter="this.style.background='#f1f5f9'"
                        onmouseleave="this.style.background='transparent'">
                        Volver al panel
                    </button>
                </div>
            </div>
        </div>

        <!-- SKILLS MODAL (nested) -->
        <div id="skillsModal"
            style="display: none; position: fixed; top: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 480px; height: 100vh; background: #ffffff; z-index: 2100; flex-direction: column; font-family: 'Inter', sans-serif;">
            <div style="display: flex; flex-direction: column; height: 100%;">
                <div
                    style="padding: 16px 20px; display: flex; align-items: center; gap: 16px; border-bottom: 1px solid #e2e8f0; flex-shrink: 0;">
                    <button onclick="app.confirmSkills()"
                        style="background: none; border: none; cursor: pointer; padding: 4px; display: flex;">
                        <span class="material-icons" style="font-size: 24px; color: #1e293b;">arrow_back</span>
                    </button>
                    <h3 style="margin: 0; font-size: 18px; font-weight: 700; color: #1e293b; flex: 1;">Seleccionar
                        Habilidades</h3>
                </div>
                <div style="padding: 16px 20px; flex-shrink: 0;">
                    <div style="position: relative;">
                        <span class="material-icons"
                            style="position: absolute; left: 14px; top: 50%; transform: translateY(-50%); font-size: 20px; color: #94a3b8;">search</span>
                        <input type="text" placeholder="Buscar habilidad..." onkeyup="app.filterSkills(this.value)"
                            style="width: 100%; padding: 12px 16px 12px 44px; border: 1.5px solid #e2e8f0; border-radius: 12px; font-size: 15px; color: #1e293b; background: #f8fafc; outline: none; box-sizing: border-box;"
                            onfocus="this.style.borderColor='#1392ec'; this.style.background='#ffffff'"
                            onblur="this.style.borderColor='#e2e8f0'; this.style.background='#f8fafc'">
                    </div>
                </div>
                <div style="flex: 1; overflow-y: auto; padding: 0 20px 20px;">
                    <div id="skillsGrid" style="display: flex; flex-wrap: wrap; gap: 8px;"></div>
                </div>
                <div style="padding: 16px 20px; border-top: 1px solid #e2e8f0; flex-shrink: 0;">
                    <button onclick="app.confirmSkills()"
                        style="width: 100%; padding: 14px; background: #1392ec; color: #ffffff; border: none; border-radius: 12px; font-size: 15px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 12px rgba(19,146,236,0.3);">
                        Confirmar Selección
                    </button>
                </div>
            </div>
        </div>
    </div><!-- End of app-container -->

    <!-- Company Profile Edit Modal -->
    <div class="company-modal-overlay" id="companyProfileModal"
        style="z-index: 10002; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); justify-content: center; align-items: center;">
        <div class="company-modal" onclick="event.stopPropagation()"
            style="background: var(--surface); width: 90%; max-width: 400px; border-radius: 16px; overflow: hidden; display: flex; flex-direction: column; max-height: 85vh; margin: auto;">
            <div class="company-modal-header"
                style="padding: 16px 24px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; flex-shrink: 0;">
                <h3 style="font-family: 'Sora', sans-serif; font-size: 18px; margin: 0; padding-right: 24px;">Editar
                    Perfil</h3>
                <button class="company-modal-close" onclick="app.closeCompanyProfile()"
                    style="background: none; border: none; cursor: pointer; padding: 4px;">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="company-modal-body"
                style="padding: 24px; overflow-y: auto; -webkit-overflow-scrolling: touch; flex: 1;">
                <div class="form-group">
                    <label class="form-label">Nombre de la Empresa</label>
                    <input type="text" class="form-input" id="cpName" placeholder="Ej: Tech Solutions">
                </div>

                <div class="form-group">
                    <label class="form-label">Sitio Web</label>
                    <input type="url" class="form-input" id="cpWebsite" placeholder="https://ejemplo.com">
                </div>

                <div class="form-group">
                    <label class="form-label">Industria / Sector</label>
                    <select class="form-input" id="cpIndustry">
                        <option value="">Cargando...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Tamaño</label>
                    <select class="form-input" id="cpSize">
                        <option value="">Cargando...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Ubicación Precisa (Geolocalización)</label>
                    <p style="font-size: 12px; color: var(--text-secondary); margin-bottom: 8px; line-height: 1.4;">
                        Permite a los candidatos encontrarte por distancia exacta. <br><span id="cpGeoStatus"
                            style="font-weight: 500;">Estado: No guardada</span></p>
                    <button onclick="app.requestDeviceLocation('company')" type="button"
                        style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 8px; padding: 12px; background: #e0f2fe; color: #0284c7; border: 1px dashed #7dd3fc; border-radius: 12px; font-weight: 600; font-size: 14px; cursor: pointer; transition: all 0.2s;">
                        <span class="material-icons" style="font-size: 18px;">my_location</span>
                        Capturar Ubicación Actual
                    </button>
                    <!-- Hidden Lat/Lng Inputs -->
                    <input type="hidden" id="cpLatitude">
                    <input type="hidden" id="cpLongitude">
                </div>

                <div class="form-group">
                    <label class="form-label">Etapa</label>
                    <select class="form-input" id="cpStage">
                        <option value="">Cargando...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Modalidad</label>
                    <select class="form-input" id="cpWorkModel">
                        <option value="">Cargando...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Logo de la Empresa</label>
                    <div style="display: flex; gap: 8px; align-items: center;">
                        <input type="file" id="cpLogoFile" accept="image/*" style="display: none;"
                            onchange="app.handleLogoUpload(this)">
                        <button class="btn-secondary" onclick="document.getElementById('cpLogoFile').click()"
                            style="width: auto; flex: 1;">Subir Imagen</button>
                        <div id="cpLogoPreview"
                            style="width: 40px; height: 40px; border-radius: 8px; background: #eee; background-size: cover; background-position: center; display: none;">
                        </div>
                    </div>
                    <input type="hidden" id="cpLogo"> <!-- Stores DataURL or URL -->
                </div>

                <div class="form-group">
                    <label class="form-label">País</label>
                    <select class="form-input" id="cpCountry" onchange="app.loadCitiesForEdit(this.value)">
                        <option value="">Cargando...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Ciudad</label>
                    <select class="form-input" id="cpCity">
                        <option value="">Selecciona un país</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Propuesta de Valor (Descripción)</label>
                    <textarea class="form-input" id="cpDescription" rows="4"
                        placeholder="Breve descripción de la empresa y cultura..."></textarea>
                </div>

                <!-- NEW FIELDS -->
                <div class="form-group">
                    <label class="form-label">LinkedIn (URL)</label>
                    <input type="url" class="form-input" id="cpLinkedin" placeholder="https://linkedin.com/company/...">
                </div>

                <div class="form-group">
                    <label class="form-label">Proceso de Selección</label>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                        <div>
                            <label
                                style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px; display: block;">Prueba
                                Técnica</label>
                            <select class="form-input" id="cpTechTest">
                                <option value="">Seleccionar</option>
                                <option value="si">Sí</option>
                                <option value="no">No</option>
                                <option value="depende">Depende</option>
                            </select>
                        </div>
                        <div>
                            <label
                                style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px; display: block;">Prueba
                                Pagada</label>
                            <select class="form-input" id="cpPaidTest">
                                <option value="">Seleccionar</option>
                                <option value="si">Sí</option>
                                <option value="no">No</option>
                                <option value="a-veces">A veces</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Etapas de Selección</label>
                    <select class="form-input" id="cpStages">
                        <option value="">Seleccionar</option>
                        <option value="1">1 etapa</option>
                        <option value="2">2 etapas</option>
                        <option value="3">3 etapas</option>
                        <option value="4">4 etapas</option>
                        <option value="5">5+ etapas</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Duración del Proceso</label>
                    <select class="form-input" id="cpSelectionDuration">
                        <option value="">Cargando...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Valores de Cultura</label>
                    <p style="font-size: 12px; color: var(--text-secondary); margin-bottom: 8px;">Selecciona los valores
                        que definen tu cultura</p>
                    <div id="cpCultureContainer"
                        style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; max-height: 240px; overflow-y: auto; padding: 4px;">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Posiciones que Buscas</label>
                    <div id="cpPositionsContainer"
                        style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; max-height: 240px; overflow-y: auto; padding: 4px;">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Niveles de Seniority</label>
                    <div id="cpSeniorityContainer"
                        style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; max-height: 200px; overflow-y: auto; padding: 4px;">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Beneficios</label>
                    <div id="cpBenefitsContainer"
                        style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; max-height: 280px; overflow-y: auto; padding: 4px;">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Tech Stack</label>
                    <input type="text" class="form-input" id="cpTechStackInput"
                        placeholder="Escribe y presiona Enter..." onkeydown="app.addEditTech(event)">
                    <div id="cpTechStackTags" style="display: flex; gap: 6px; flex-wrap: wrap; margin-top: 8px;">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Tags de la Empresa</label>
                    <input type="text" class="form-input" id="cpTagsInput" placeholder="Escribe y presiona Enter..."
                        onkeydown="app.addEditTag(event)">
                    <div id="cpTagsTags" style="display: flex; gap: 6px; flex-wrap: wrap; margin-top: 8px;">
                    </div>
                </div>
            </div>
            <div class="company-modal-footer"
                style="padding: 16px 24px; border-top: 1px solid var(--border); display: flex; gap: 12px; background: var(--surface); flex-shrink: 0;">
                <button class="btn-secondary" onclick="app.closeCompanyProfile()" style="flex: 1;">Cancelar</button>
                <button class="btn-primary" onclick="app.saveCompanyProfile()" style="flex: 1;">Guardar</button>
            </div>
        </div>
    </div>

    <!-- Card Detail Modal (Tinder-style profile expand) -->
    <!-- Card Detail Modal (Stitch) -->
    <!-- Candidate Detail Full-Screen (Stitch) -->
    <div id="cardDetailModal"
        style="display: none; position: fixed; inset: 0; z-index: 10002; background: #f8f9fa; flex-direction: column; font-family: 'Inter', sans-serif; max-width: 480px; margin: 0 auto; overflow: hidden;">

        <!-- Close button -->
        <button onclick="app.closeCardDetail()"
            style="position: absolute; top: 12px; right: 16px; z-index: 50; display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; border-radius: 50%; background: rgba(255,255,255,0.3); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.4); color: #ffffff; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.15);">
            <span class="material-icons" style="font-size: 24px;">close</span>
        </button>

        <!-- Scrollable content -->
        <div id="cardDetailScroll" style="flex: 1; overflow-y: auto; padding-bottom: 120px;">

            <!-- Hero Image -->
            <div style="position: relative; width: 100%; height: 50vh; min-height: 380px;">
                <div id="cdHeroImg"
                    style="position: absolute; inset: 0; background-size: cover; background-position: center; background-repeat: no-repeat;">
                </div>
                <div
                    style="position: absolute; inset: 0; background: linear-gradient(to top, #f8f9fa, rgba(0,0,0,0.15) 50%, transparent);">
                </div>

                <!-- Overlaid info -->
                <div
                    style="position: absolute; bottom: 0; left: 0; width: 100%; padding: 24px 24px 28px; display: flex; flex-direction: column; align-items: flex-start; gap: 4px;">
                    <!-- Badges -->
                    <div id="cdBadges" style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                        <span
                            style="padding: 5px 12px; border-radius: 99px; background: #1392ec; color: #ffffff; font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; border: 1px solid rgba(19,146,236,0.2); box-shadow: 0 1px 4px rgba(0,0,0,0.1);">Available
                            now</span>
                        <span id="cdVerifiedBadge"
                            style="display: none; padding: 5px 12px; border-radius: 99px; background: #d1fae5; color: #047857; font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; border: 1px solid #a7f3d0;">
                            <span class="material-icons"
                                style="font-size: 13px; vertical-align: -2px; margin-right: 2px;">verified</span>Verified
                        </span>
                    </div>
                    <!-- Name -->
                    <h1 id="cdName"
                        style="margin: 0; font-size: 32px; font-weight: 800; color: #1a202c; line-height: 1.15; letter-spacing: -0.02em;">
                    </h1>
                    <!-- Role -->
                    <p id="cdRole" style="margin: 4px 0 0; font-size: 18px; font-weight: 700; color: #4a5568;"></p>
                    <!-- Location -->
                    <div id="cdLocation"
                        style="display: flex; align-items: center; gap: 4px; color: #4a5568; font-size: 14px; font-weight: 500; margin-top: 6px;">
                        <span class="material-icons" style="font-size: 18px;">location_on</span>
                        <span id="cdLocationText"></span>
                    </div>
                </div>
            </div>

            <!-- Content Sections -->
            <div
                style="padding: 0 24px; display: flex; flex-direction: column; gap: 32px; margin-top: -8px; position: relative; z-index: 10;">

                <!-- Sobre mí -->
                <section>
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                        <span class="material-icons" style="font-size: 22px; color: #1392ec;">person</span>
                        <h2 style="margin: 0; font-size: 18px; font-weight: 800; color: #1a202c;">Sobre mí</h2>
                    </div>
                    <p id="cdBio"
                        style="margin: 0; font-size: 14px; line-height: 1.65; color: #4a5568; font-weight: 400;"></p>
                </section>

                <!-- Habilidades -->
                <section>
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 14px;">
                        <span class="material-icons" style="font-size: 22px; color: #1392ec;">psychology</span>
                        <h2 style="margin: 0; font-size: 18px; font-weight: 800; color: #1a202c;">Habilidades</h2>
                    </div>
                    <div id="cdSkills" style="display: flex; flex-wrap: wrap; gap: 8px;"></div>
                </section>

                <!-- Experiencia Laboral -->
                <section>
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 18px;">
                        <span class="material-icons" style="font-size: 22px; color: #1392ec;">work</span>
                        <h2 style="margin: 0; font-size: 18px; font-weight: 800; color: #1a202c;">Experiencia Laboral
                        </h2>
                    </div>
                    <div id="cdExperience"
                        style="position: relative; padding-left: 16px; border-left: 2px solid #e2e8f0; margin-left: 8px;">
                    </div>
                </section>

                <!-- Educación -->
                <section>
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 18px;">
                        <span class="material-icons" style="font-size: 22px; color: #1392ec;">school</span>
                        <h2 style="margin: 0; font-size: 18px; font-weight: 800; color: #1a202c;">Educación</h2>
                    </div>
                    <div id="cdEducation"
                        style="position: relative; padding-left: 16px; border-left: 2px solid #e2e8f0; margin-left: 8px;">
                    </div>
                </section>

                <!-- Preferencias -->
                <section style="padding-bottom: 16px;">
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 14px;">
                        <span class="material-icons" style="font-size: 22px; color: #1392ec;">tune</span>
                        <h2 style="margin: 0; font-size: 18px; font-weight: 800; color: #1a202c;">Preferencias</h2>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                        <!-- Salario -->
                        <div
                            style="background: #ffffff; padding: 16px; border-radius: 16px; border: 1px solid #e2e8f0; display: flex; flex-direction: column; gap: 6px;">
                            <div
                                style="width: 32px; height: 32px; border-radius: 50%; background: rgba(16,185,129,0.1); display: flex; align-items: center; justify-content: center; margin-bottom: 4px;">
                                <span class="material-icons"
                                    style="font-size: 18px; color: #10b981;">attach_money</span>
                            </div>
                            <span
                                style="font-size: 11px; font-weight: 700; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.06em;">Salario
                                Esperado</span>
                            <p id="cdSalary"
                                style="margin: 0; font-size: 17px; font-weight: 800; color: #1a202c; line-height: 1.1;">
                            </p>
                            <span style="font-size: 11px; color: #94a3b8; font-weight: 500;">USD / Mensual</span>
                        </div>
                        <!-- Modalidad -->
                        <div
                            style="background: #ffffff; padding: 16px; border-radius: 16px; border: 1px solid #e2e8f0; display: flex; flex-direction: column; gap: 6px;">
                            <div
                                style="width: 32px; height: 32px; border-radius: 50%; background: rgba(139,92,246,0.1); display: flex; align-items: center; justify-content: center; margin-bottom: 4px;">
                                <span class="material-icons" style="font-size: 18px; color: #8b5cf6;">cottage</span>
                            </div>
                            <span
                                style="font-size: 11px; font-weight: 700; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.06em;">Modalidad</span>
                            <p id="cdModality"
                                style="margin: 0; font-size: 17px; font-weight: 800; color: #1a202c; line-height: 1.1;">
                            </p>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <!-- Bottom gradient fade -->
        <div
            style="pointer-events: none; position: absolute; bottom: 0; left: 0; width: 100%; height: 120px; background: linear-gradient(to top, #f8f9fa, rgba(248,249,250,0.9) 50%, transparent); z-index: 20;">
        </div>

        <!-- Floating Action Buttons -->
        <div id="cdActionButtons"
            style="position: absolute; bottom: 24px; left: 0; width: 100%; display: flex; align-items: center; justify-content: center; gap: 24px; z-index: 30;">
            <!-- Reject -->
            <button onclick="app.closeCardDetail(); app.handleSwipe('left');"
                style="width: 64px; height: 64px; border-radius: 50%; background: #ffffff; border: 1px solid #e2e8f0; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 8px 20px rgba(0,0,0,0.12); transition: transform 0.2s, box-shadow 0.2s;"
                onmouseover="this.style.transform='scale(1.08)'" onmouseout="this.style.transform='scale(1)'">
                <span class="material-icons" style="font-size: 30px; color: #ef4444;">close</span>
            </button>
            <!-- Star / Super Like -->
            <button onclick="app.closeCardDetail(); app.handleSuperSwipe();"
                style="width: 48px; height: 48px; border-radius: 50%; background: #ffffff; border: 1px solid #bfdbfe; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 8px 16px rgba(0,0,0,0.08); transition: transform 0.2s; margin-top: -24px;"
                onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                <span class="material-icons" style="font-size: 22px; color: #3b82f6;">star</span>
            </button>
            <!-- Like -->
            <button onclick="app.closeCardDetail(); app.handleSwipe('right');"
                style="width: 64px; height: 64px; border-radius: 50%; background: #ffffff; border: 1px solid #e2e8f0; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 8px 20px rgba(0,0,0,0.12); transition: transform 0.2s, box-shadow 0.2s;"
                onmouseover="this.style.transform='scale(1.08)'" onmouseout="this.style.transform='scale(1)'">
                <span class="material-icons" style="font-size: 30px; color: #22c55e;">favorite</span>
            </button>
        </div>

        <!-- Floating Action Buttons for Matches -->
        <div id="cdMatchActionButtons"
            style="display: none; position: absolute; bottom: 0; left: 0; right: 0; z-index: 50; padding: 16px 24px; padding-bottom: 32px; background: linear-gradient(to top, rgba(255,255,255,1) 0%, rgba(255,255,255,0.95) 60%, transparent 100%);">
            <div
                style="display: flex; align-items: center; gap: 12px; background: #ffffff; padding: 8px 12px; border-radius: 9999px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); border: 1px solid #e2e8f0; width: 100%; max-width: 380px; margin: 0 auto;">
                <!-- Secondary Action: Discard -->
                <button onclick="app.discardMatchFromProfile()"
                    style="display: flex; flex-shrink: 0; width: 48px; height: 48px; align-items: center; justify-content: center; border-radius: 50%; border: 1px solid #e2e8f0; color: #94a3b8; background: #ffffff; cursor: pointer; transition: all 0.2s;"
                    onmouseover="this.style.borderColor='#fecaca'; this.style.color='#ef4444'; this.style.background='#fef2f2';"
                    onmouseout="this.style.borderColor='#e2e8f0'; this.style.color='#94a3b8'; this.style.background='#ffffff';">
                    <span class="material-icons">delete_outline</span>
                </button>
                <!-- Primary Action: Schedule -->
                <button onclick="app.scheduleInterview()"
                    style="display: flex; flex: 1; align-items: center; justify-content: center; gap: 8px; background: #1392ec; color: #ffffff; height: 48px; padding: 0 24px; border-radius: 9999px; font-weight: 700; border: none; cursor: pointer; box-shadow: 0 8px 16px rgba(19,146,236,0.2); transition: all 0.2s;">
                    <span class="material-icons" style="font-size: 20px;">calendar_month</span>
                    <span style="white-space: nowrap;">Agendar Entrevista</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Match Modal -->
    <div id="matchModal"
        style="display: none; position: fixed; inset: 0; z-index: 10003; overflow: hidden; align-items: center; justify-content: center;">
        <!-- Background gradient overlay -->
        <div
            style="position: absolute; inset: 0; background: linear-gradient(135deg, rgba(230,242,255,0.97) 0%, rgba(255,255,255,0.95) 40%, rgba(255,230,235,0.92) 100%); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);">
        </div>

        <!-- Confetti dots (decorative) -->
        <div
            style="position: absolute; inset: 0; pointer-events: none; opacity: 0.15; background-image: radial-gradient(#F43F5E 2px, transparent 2.5px), radial-gradient(#1392ec 2px, transparent 2.5px), radial-gradient(#10B981 2px, transparent 2.5px); background-size: 40px 40px; background-position: 0 0, 20px 20px, 10px 30px;">
        </div>

        <!-- Animated glow circles -->
        <div
            style="position: absolute; bottom: 40px; left: 40px; width: 16px; height: 16px; border-radius: 50%; background: rgba(19,146,236,0.35); filter: blur(2px);">
        </div>
        <div
            style="position: absolute; top: 80px; right: 40px; width: 24px; height: 24px; border-radius: 50%; background: rgba(244,63,94,0.35); filter: blur(2px);">
        </div>

        <!-- Content card -->
        <div
            style="position: relative; z-index: 1; width: 100%; max-width: 420px; height: 100%; max-height: 850px; display: flex; flex-direction: column; justify-content: space-between; padding: 24px; font-family: 'Inter', sans-serif;">

            <!-- Close button -->
            <div style="display: flex; justify-content: flex-end;">
                <button onclick="app.closeMatchModal()"
                    style="padding: 8px; border-radius: 50%; background: rgba(255,255,255,0.5); border: none; cursor: pointer; color: #6b7280; transition: background 0.15s;"
                    onmouseenter="this.style.background='rgba(255,255,255,0.8)'"
                    onmouseleave="this.style.background='rgba(255,255,255,0.5)'">
                    <span class="material-icons" style="font-size: 24px;">close</span>
                </button>
            </div>

            <!-- Center content -->
            <div
                style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; margin-top: -40px;">

                <!-- Title -->
                <div style="margin-bottom: 48px; text-align: center;">
                    <h1
                        style="font-size: 48px; font-weight: 800; font-style: italic; letter-spacing: -0.04em; margin: 0 0 8px; background: linear-gradient(to right, #1392ec, #F43F5E); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.06));">
                        ¡Es un Match!
                    </h1>
                    <p style="color: #4b5563; font-size: 18px; font-weight: 500; margin: 0;">
                        Tú y <span id="matchCandidateName" style="color: #1392ec; font-weight: 700;"></span> se gustan.
                    </p>
                </div>

                <!-- Avatars area -->
                <div
                    style="position: relative; width: 100%; height: 192px; display: flex; align-items: center; justify-content: center;">

                    <!-- Pulse rings (decorative) -->
                    <div
                        style="position: absolute; width: 256px; height: 256px; border-radius: 50%; border: 1px solid rgba(19,146,236,0.15);">
                    </div>
                    <div
                        style="position: absolute; width: 192px; height: 192px; border-radius: 50%; border: 1px solid rgba(244,63,94,0.12);">
                    </div>

                    <!-- Company avatar (left, tilted) -->
                    <div style="position: relative; z-index: 10; transform: translateX(-24px) rotate(-6deg); transition: transform 0.2s;"
                        onmouseenter="this.style.transform='translateX(-24px) rotate(-6deg) scale(1.05)'"
                        onmouseleave="this.style.transform='translateX(-24px) rotate(-6deg)'">
                        <div
                            style="width: 128px; height: 128px; border-radius: 24px; overflow: hidden; border: 4px solid #ffffff; box-shadow: 0 8px 32px rgba(19,146,236,0.25); background: #ffffff; display: flex; align-items: center; justify-content: center;">
                            <img id="matchCompanyLogo"
                                src="https://ui-avatars.com/api/?name=T&background=1392ec&color=fff" alt="Company logo"
                                style="width: 100%; height: 100%; object-fit: cover; padding: 8px;">
                        </div>
                        <div
                            style="position: absolute; bottom: -12px; right: -12px; background: #ffffff; padding: 6px; border-radius: 50%; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <span class="material-icons" style="font-size: 20px; color: #1392ec;">person</span>
                        </div>
                    </div>

                    <!-- Candidate avatar (right, tilted) -->
                    <div style="position: relative; z-index: 20; transform: translateX(24px) rotate(6deg); transition: transform 0.2s;"
                        onmouseenter="this.style.transform='translateX(24px) rotate(6deg) scale(1.05)'"
                        onmouseleave="this.style.transform='translateX(24px) rotate(6deg)'">
                        <div
                            style="width: 128px; height: 128px; border-radius: 24px; overflow: hidden; border: 4px solid #ffffff; box-shadow: 0 8px 32px rgba(244,63,94,0.2); background: #e5e7eb;">
                            <img id="matchCandidateImage"
                                src="https://ui-avatars.com/api/?name=Candidate&background=f1f5f9&color=64748b"
                                alt="Candidate photo" style="width: 100%; height: 100%; object-fit: cover;">
                        </div>
                        <div
                            style="position: absolute; bottom: -12px; left: -12px; background: #ffffff; padding: 6px; border-radius: 50%; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <span class="material-icons" style="font-size: 20px; color: #F43F5E;">business</span>
                        </div>
                    </div>

                    <!-- Heart center icon -->
                    <div
                        style="position: absolute; z-index: 30; background: #ffffff; padding: 12px; border-radius: 50%; box-shadow: 0 4px 16px rgba(0,0,0,0.1); border: 2px solid #1392ec; transform: scale(1.25);">
                        <span class="material-icons" style="font-size: 30px; color: #F43F5E;">favorite</span>
                    </div>
                </div>

                <!-- Subtitle -->
                <div style="margin-top: 48px; text-align: center; max-width: 280px;">
                    <p style="font-size: 14px; color: #6b7280; margin: 0;">
                        Ahora pueden chatear directamente y agendar una entrevista.
                    </p>
                </div>
            </div>

            <!-- Buttons -->
            <div style="display: flex; flex-direction: column; gap: 12px; width: 100%; padding-bottom: 16px;">
                <button onclick="app.startChatFromMatch()"
                    style="position: relative; width: 100%; display: flex; align-items: center; justify-content: center; gap: 8px; background: #1392ec; color: #ffffff; padding: 16px; border-radius: 16px; border: none; font-family: 'Inter', sans-serif; font-weight: 700; font-size: 18px; cursor: pointer; box-shadow: 0 4px 16px rgba(19,146,236,0.3); transition: all 0.15s; transform: translateY(0);"
                    onmouseenter="this.style.background='#0e6ba8';this.style.transform='translateY(-2px)';this.style.boxShadow='0 6px 24px rgba(19,146,236,0.35)'"
                    onmouseleave="this.style.background='#1392ec';this.style.transform='translateY(0)';this.style.boxShadow='0 4px 16px rgba(19,146,236,0.3)'">
                    <span class="material-icons" style="font-size: 22px;">chat</span>
                    Enviar mensaje
                    <span class="material-icons"
                        style="position: absolute; right: 16px; font-size: 20px; opacity: 0.7;">arrow_forward</span>
                </button>
                <button onclick="app.closeMatchModal()"
                    style="width: 100%; padding: 16px; border-radius: 16px; font-family: 'Inter', sans-serif; font-weight: 600; font-size: 16px; color: #374151; background: #ffffff; border: 1px solid #e5e7eb; cursor: pointer; transition: background 0.15s;"
                    onmouseenter="this.style.background='#f3f4f6'" onmouseleave="this.style.background='#ffffff'">
                    Seguir explorando
                </button>
            </div>
        </div>
    </div>



    <!-- Delete Confirmation Modal -->
    <div class="company-modal-overlay" id="deleteConfirmModal"
        style="display: none; z-index: 10005; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); align-items: center; justify-content: center;">
        <div class="company-modal"
            style="background: var(--surface); width: 90%; max-width: 320px; border-radius: 20px; padding: 24px; text-align: center; box-shadow: 0 10px 40px rgba(0,0,0,0.2);">
            <div
                style="width: 60px; height: 60px; background: #FFF0F0; color: var(--danger); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; margin: 0 auto 16px auto;">
                🗑️
            </div>
            <h3 style="margin: 0 0 8px 0; font-size: 18px; color: var(--text-primary);">¿Eliminar oferta?</h3>
            <p style="margin: 0 0 24px 0; color: var(--text-secondary); font-size: 14px;">Esta acción no se puede
                deshacer.</p>
            <div style="display: flex; gap: 12px;">
                <button onclick="app.closeDeleteModal()"
                    style="flex: 1; padding: 12px; border: 1px solid var(--border); background: var(--surface); color: var(--text-primary); border-radius: 12px; cursor: pointer; font-weight: 600;">Cancelar</button>
                <button onclick="app.confirmDeleteOffer()"
                    style="flex: 1; padding: 12px; border: none; background: var(--danger); color: white; border-radius: 12px; cursor: pointer; font-weight: 600;">Eliminar</button>
            </div>
        </div>
    </div>

    <!-- CRITICAL INLINE CSS TO FIX BOTTOM NAV (STYLES.CSS IS UNRELIABLE) -->
    <style>
        /* FIX: Hide bottom nav when in chat mode to prevent overlap */
        body.chat-mode .bottom-nav {
            display: none !important;
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
        }

        /* --- DARK MODE OVERRIDES --- */
        body.dark-mode {
            background-color: #0f172a !important;
            color: #f8fafc !important;
        }

        body.dark-mode .company-section,
        body.dark-mode .app-section {
            background-color: #0f172a !important;
        }

        body.dark-mode header,
        body.dark-mode footer,
        body.dark-mode nav.bottom-nav {
            background-color: #1e293b !important;
            border-color: #334155 !important;
        }

        body.dark-mode .card,
        body.dark-mode [style*="background: #ffffff"],
        body.dark-mode [style*="background: rgb(255, 255, 255)"],
        body.dark-mode [style*="background:#ffffff"] {
            background-color: #1e293b !important;
            border-color: #334155 !important;
            color: #f8fafc !important;
        }

        body.dark-mode input,
        body.dark-mode select,
        body.dark-mode textarea {
            background-color: #0f172a !important;
            border-color: #334155 !important;
            color: #f8fafc !important;
        }

        body.dark-mode h1,
        body.dark-mode h2,
        body.dark-mode h3,
        body.dark-mode h4,
        body.dark-mode p,
        body.dark-mode span,
        body.dark-mode div {
            color: inherit;
        }

        body.dark-mode .material-icons {
            /* Keep primary colors but dull them if needed, or leave them */
        }

        body.dark-mode [style*="color: #64748b"],
        body.dark-mode [style*="color: #9CA3AF"],
        body.dark-mode [style*="color: #94a3b8"] {
            color: #94a3b8 !important;
        }

        body.dark-mode [style*="color: #1e293b"],
        body.dark-mode [style*="color: #212529"],
        body.dark-mode [style*="color: #000000"] {
            color: #f8fafc !important;
        }
    </style>

    <!-- EDIT PERSONAL INFO MODAL (Stitch) -->

    <!-- SETTINGS / NOTIFICATIONS MODAL -->
    <div id="settingsModal"
        style="display: none; position: fixed; inset: 0; z-index: 10000; background: #f8fafc; font-family: 'Inter', sans-serif;">
        <!-- Header -->
        <header
            style="display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; background: #ffffff; border-bottom: 1px solid #e2e8f0; position: sticky; top: 0; z-index: 10;">
            <button onclick="app.closeSettingsModal()"
                style="background: none; border: none; font-size: 24px; color: #64748b; cursor: pointer; display: flex; align-items: center; justify-content: center; padding: 0;">
                <span class="material-icons">arrow_back</span>
            </button>
            <h2
                style="font-size: 18px; font-weight: 700; color: #1e293b; margin: 0; position: absolute; left: 50%; transform: translateX(-50%);">
                Configuración
            </h2>
            <div style="width: 24px;"></div>
        </header>

        <!-- Scrollable Content -->
        <main style="padding: 24px 20px; overflow-y: auto; height: calc(100vh - 65px);">
            <div style="margin-bottom: 32px;">
                <h3
                    style="font-size: 14px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.05em; margin: 0 0 16px 8px;">
                    Notificaciones Push / Email</h3>

                <div
                    style="background: #ffffff; border-radius: 16px; border: 1px solid #e2e8f0; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.02);">

                    <!-- Matches Toggle -->
                    <div
                        style="display: flex; align-items: center; justify-content: space-between; padding: 16px; border-bottom: 1px solid #f1f5f9;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div
                                style="width: 40px; height: 40px; border-radius: 10px; background: #F0Fdf4; display: flex; align-items: center; justify-content: center;">
                                <span class="material-icons" style="color: #16a34a;">favorite</span>
                            </div>
                            <div>
                                <h4 style="margin: 0; font-size: 16px; font-weight: 600; color: #1e293b;">Nuevos Matches
                                </h4>
                                <p style="margin: 4px 0 0 0; font-size: 13px; color: #64748b;">Avisos cuando conectes
                                    con alguien</p>
                            </div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="pref_matches" onchange="app.toggleNotificationPref('matches')">
                            <span class="slider round"></span>
                        </label>
                    </div>

                    <!-- Messages Toggle -->
                    <div
                        style="display: flex; align-items: center; justify-content: space-between; padding: 16px; border-bottom: 1px solid #f1f5f9;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div
                                style="width: 40px; height: 40px; border-radius: 10px; background: #e0f2fe; display: flex; align-items: center; justify-content: center;">
                                <span class="material-icons" style="color: #0284c7;">chat</span>
                            </div>
                            <div>
                                <h4 style="margin: 0; font-size: 16px; font-weight: 600; color: #1e293b;">Mensajes del
                                    Chat</h4>
                                <p style="margin: 4px 0 0 0; font-size: 13px; color: #64748b;">Notificaciones por DMs
                                    entrantes</p>
                            </div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="pref_messages" onchange="app.toggleNotificationPref('messages')">
                            <span class="slider round"></span>
                        </label>
                    </div>

                    <!-- Marketing Toggle -->
                    <div style="display: flex; align-items: center; justify-content: space-between; padding: 16px;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div
                                style="width: 40px; height: 40px; border-radius: 10px; background: #fdf4ff; display: flex; align-items: center; justify-content: center;">
                                <span class="material-icons" style="color: #c026d3;">campaign</span>
                            </div>
                            <div>
                                <h4 style="margin: 0; font-size: 16px; font-weight: 600; color: #1e293b;">Novedades y
                                    Recom.</h4>
                                <p style="margin: 4px 0 0 0; font-size: 13px; color: #64748b;">Nuevas features y tips
                                </p>
                            </div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="pref_marketing"
                                onchange="app.toggleNotificationPref('marketing')">
                            <span class="slider round"></span>
                        </label>
                    </div>
                </div>
            </div>

            <p style="text-align: center; color: #94a3b8; font-size: 13px; margin-top: 32px;">Talently App v56</p>
        </main>
    </div>
    <!-- END SETTINGS MODAL -->

    <!-- SECURITY MODAL (Stitch) -->
    <div id="securityModal"
        style="display: none; position: fixed; inset: 0; z-index: 10001; background: #f8fafc; font-family: 'Inter', sans-serif;">
        <!-- Header -->
        <header
            style="display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; background: #ffffff; border-bottom: 1px solid #e2e8f0; position: sticky; top: 0; z-index: 10;">
            <button onclick="app.closeSecurityModal()"
                style="background: none; border: none; font-size: 24px; color: #64748b; cursor: pointer; display: flex; align-items: center; justify-content: center; padding: 0;">
                <span class="material-icons">arrow_back</span>
            </button>
            <h2
                style="font-size: 18px; font-weight: 700; color: #1e293b; margin: 0; position: absolute; left: 50%; transform: translateX(-50%);">
                Control de Acceso
            </h2>
            <div style="width: 24px;"></div>
        </header>

        <!-- Scrollable Content -->
        <main style="padding: 24px 20px; overflow-y: auto; height: calc(100vh - 65px);">
            <div style="margin-bottom: 32px;">
                <h3
                    style="font-size: 14px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.05em; margin: 0 0 16px 8px;">
                    Cambiar Contraseña
                </h3>

                <div
                    style="background: #ffffff; border-radius: 16px; border: 1px solid #e2e8f0; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.02);">

                    <div style="margin-bottom: 20px;">
                        <label for="securityNewPassword"
                            style="display: block; font-size: 14px; font-weight: 600; color: #1e293b; margin-bottom: 8px;">Nueva
                            Contraseña</label>
                        <div style="position: relative;">
                            <input type="password" id="securityNewPassword" placeholder="Al menos 6 caracteres"
                                style="width: 100%; height: 48px; padding: 0 44px 0 16px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; color: #1e293b; font-size: 14px; font-family: 'Inter', sans-serif; box-sizing: border-box; outline: none; transition: all 0.2s;"
                                onfocus="this.style.borderColor='#1392ec';this.style.background='#ffffff'"
                                onblur="this.style.borderColor='#e2e8f0';this.style.background='#f8fafc'">
                            <button onclick="app.togglePasswordVisibility('securityNewPassword')"
                                style="position: absolute; right: 12px; top: 12px; background: none; border: none; padding: 0; cursor: pointer; color: #94a3b8; display: flex;"
                                onmouseenter="this.style.color='#1392ec'" onmouseleave="this.style.color='#94a3b8'">
                                <span class="material-icons" id="securityNewPasswordIcon"
                                    style="font-size: 24px;">visibility_off</span>
                            </button>
                        </div>
                    </div>

                    <div style="margin-bottom: 24px;">
                        <label for="securityConfirmPassword"
                            style="display: block; font-size: 14px; font-weight: 600; color: #1e293b; margin-bottom: 8px;">Confirmar
                            Contraseña</label>
                        <div style="position: relative;">
                            <input type="password" id="securityConfirmPassword" placeholder="Repite tu nueva clave"
                                style="width: 100%; height: 48px; padding: 0 44px 0 16px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; color: #1e293b; font-size: 14px; font-family: 'Inter', sans-serif; box-sizing: border-box; outline: none; transition: all 0.2s;"
                                onfocus="this.style.borderColor='#1392ec';this.style.background='#ffffff'"
                                onblur="this.style.borderColor='#e2e8f0';this.style.background='#f8fafc'">
                            <button onclick="app.togglePasswordVisibility('securityConfirmPassword')"
                                style="position: absolute; right: 12px; top: 12px; background: none; border: none; padding: 0; cursor: pointer; color: #94a3b8; display: flex;"
                                onmouseenter="this.style.color='#1392ec'" onmouseleave="this.style.color='#94a3b8'">
                                <span class="material-icons" id="securityConfirmPasswordIcon"
                                    style="font-size: 24px;">visibility_off</span>
                            </button>
                        </div>
                    </div>

                    <button id="securitySaveBtn" onclick="app.changePassword()"
                        style="width: 100%; background: #1392ec; color: #ffffff; font-weight: 700; font-size: 15px; padding: 14px; border: none; border-radius: 12px; cursor: pointer; box-shadow: 0 4px 12px rgba(19,146,236,0.2); transition: all 0.2s; font-family: 'Inter', sans-serif; display: flex; align-items: center; justify-content: center; gap: 8px;"
                        onmouseenter="this.style.background='#0b6cb3'; this.style.transform='scale(1.02)'"
                        onmouseleave="this.style.background='#1392ec'; this.style.transform='scale(1)'">
                        <span class="material-icons" style="font-size: 20px;">lock_reset</span>
                        Actualizar Contraseña
                    </button>
                </div>
            </div>
        </main>
    </div>
    <!-- END SECURITY MODAL -->

    <!-- PREFERENCES MODAL (Stitch) -->
    <div id="preferencesModal"
        style="display: none; position: fixed; inset: 0; z-index: 10002; background: #f8fafc; font-family: 'Inter', sans-serif;">
        <!-- Header -->
        <header
            style="display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; background: #ffffff; border-bottom: 1px solid #e2e8f0; position: sticky; top: 0; z-index: 10;">
            <button onclick="app.closePreferencesModal()"
                style="background: none; border: none; font-size: 24px; color: #64748b; cursor: pointer; display: flex; align-items: center; justify-content: center; padding: 0;">
                <span class="material-icons">arrow_back</span>
            </button>
            <h2
                style="font-size: 18px; font-weight: 700; color: #1e293b; margin: 0; position: absolute; left: 50%; transform: translateX(-50%);">
                Preferencias de Cuenta
            </h2>
            <div style="width: 24px;"></div>
        </header>

        <!-- Scrollable Content -->
        <main style="padding: 24px 20px; overflow-y: auto; height: calc(100vh - 65px);">
            <div style="margin-bottom: 32px;">
                <h3
                    style="font-size: 14px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.05em; margin: 0 0 16px 8px;">
                    Configuración General
                </h3>

                <div
                    style="background: #ffffff; border-radius: 16px; border: 1px solid #e2e8f0; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.02);">

                    <div style="margin-bottom: 24px;">
                        <label for="prefLanguage"
                            style="display: block; font-size: 14px; font-weight: 600; color: #1e293b; margin-bottom: 8px;">Idioma
                            de la Aplicación</label>
                        <div style="position: relative;">
                            <select id="prefLanguage"
                                style="width: 100%; height: 48px; padding: 0 44px 0 16px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; color: #1e293b; font-size: 14px; font-family: 'Inter', sans-serif; box-sizing: border-box; outline: none; transition: all 0.2s; appearance: none; cursor: pointer;"
                                onfocus="this.style.borderColor='#1392ec';this.style.background='#ffffff'"
                                onblur="this.style.borderColor='#e2e8f0';this.style.background='#f8fafc'">
                                <option value="es">Español</option>
                                <option value="en">English (Inglés)</option>
                                <option value="pt">Português (Portugués)</option>
                            </select>
                            <span class="material-icons"
                                style="position: absolute; right: 14px; top: 12px; color: #94a3b8; pointer-events: none;">expand_more</span>
                        </div>
                    </div>

                    <div style="margin-bottom: 32px;">
                        <label for="prefRegion"
                            style="display: block; font-size: 14px; font-weight: 600; color: #1e293b; margin-bottom: 8px;">Región
                            / Formato Zona Horaria</label>
                        <div style="position: relative;">
                            <select id="prefRegion"
                                style="width: 100%; height: 48px; padding: 0 44px 0 16px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; color: #1e293b; font-size: 14px; font-family: 'Inter', sans-serif; box-sizing: border-box; outline: none; transition: all 0.2s; appearance: none; cursor: pointer;"
                                onfocus="this.style.borderColor='#1392ec';this.style.background='#ffffff'"
                                onblur="this.style.borderColor='#e2e8f0';this.style.background='#f8fafc'">
                                <option value="America/Lima">América / Lima (PET)</option>
                                <option value="America/Bogota">América / Bogotá (COT)</option>
                                <option value="America/Mexico_City">América / Ciudad de México (CST)</option>
                                <option value="America/Santiago">América / Santiago (CLT)</option>
                                <option value="America/Buenos_Aires">América / Buenos Aires (ART)</option>
                                <option value="Europe/Madrid">Europa / Madrid (CET)</option>
                            </select>
                            <span class="material-icons"
                                style="position: absolute; right: 14px; top: 12px; color: #94a3b8; pointer-events: none;">expand_more</span>
                        </div>
                        <p style="margin: 8px 0 0; font-size: 12px; color: #64748b;">Afecta cómo se muestran las fechas
                            de tus entrevistas y mensajes.</p>
                    </div>

                    <button onclick="app.savePreferences()"
                        style="width: 100%; background: #1392ec; color: #ffffff; font-weight: 700; font-size: 15px; padding: 14px; border: none; border-radius: 12px; cursor: pointer; box-shadow: 0 4px 12px rgba(19,146,236,0.2); transition: all 0.2s; font-family: 'Inter', sans-serif; display: flex; align-items: center; justify-content: center; gap: 8px;"
                        onmouseenter="this.style.background='#0b6cb3'; this.style.transform='scale(1.02)'"
                        onmouseleave="this.style.background='#1392ec'; this.style.transform='scale(1)'">
                        <span class="material-icons" style="font-size: 20px;">save</span>
                        Guardar Preferencias
                    </button>
                </div>
            </div>
        </main>
    </div>
    <!-- END PREFERENCES MODAL -->

    <div id="editPersonalModal"
        style="display: none; position: fixed; inset: 0; z-index: 1000; background: #ffffff; flex-direction: column; font-family: 'Inter', sans-serif;">
        <!-- Header -->
        <header
            style="display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; background: rgba(255,255,255,0.95); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); z-index: 10; position: sticky; top: 0; border-bottom: 1px solid #e2e8f0; flex-shrink: 0;">
            <button onclick="app.closeEditPersonal()"
                style="color: #64748b; font-weight: 500; font-size: 16px; background: none; border: none; cursor: pointer; font-family: 'Inter', sans-serif; transition: color 0.2s;"
                onmouseenter="this.style.color='#1e293b'" onmouseleave="this.style.color='#64748b'">
                Cancelar
            </button>
            <h2
                style="font-size: 18px; font-weight: 700; color: #1e293b; letter-spacing: -0.015em; margin: 0; position: absolute; left: 50%; transform: translateX(-50%);">
                Editar Información
            </h2>
            <div style="width: 70px;"></div>
        </header>

        <!-- Scrollable Content -->
        <main style="flex: 1; overflow-y: auto; padding-bottom: 120px; background: #ffffff;">
            <!-- Profile Photo Section -->
            <div style="display: flex; flex-direction: column; align-items: center; padding: 32px 0;">
                <div style="position: relative; cursor: pointer;"
                    onclick="document.getElementById('editPhotoInput').click()">
                    <div id="editPhotoPreview"
                        style="width: 128px; height: 128px; border-radius: 50%; background-size: cover; background-position: center; background-repeat: no-repeat; background-color: #f1f5f9; box-shadow: 0 2px 8px rgba(0,0,0,0.04); border: 4px solid #ffffff; position: relative; overflow: hidden;">
                        <div style="position: absolute; inset: 0; background: rgba(0,0,0,0.2); display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.2s;"
                            onmouseenter="this.style.opacity='1'" onmouseleave="this.style.opacity='0'">
                            <span class="material-icons" style="color: white; font-size: 30px;">photo_camera</span>
                        </div>
                    </div>
                    <button
                        style="position: absolute; bottom: 0; right: 0; background: #1392ec; color: white; border-radius: 50%; padding: 8px; border: 2px solid #ffffff; cursor: pointer; box-shadow: 0 4px 6px rgba(0,0,0,0.15); display: flex; align-items: center; justify-content: center; transition: background 0.15s;"
                        onmouseenter="this.style.background='#0e6ba8'" onmouseleave="this.style.background='#1392ec'">
                        <span class="material-icons" style="font-size: 20px;">edit</span>
                    </button>
                </div>
                <button onclick="document.getElementById('editPhotoInput').click()"
                    style="margin-top: 16px; color: #1392ec; font-weight: 700; font-size: 14px; background: none; border: none; cursor: pointer; font-family: 'Inter', sans-serif; transition: color 0.15s;"
                    onmouseenter="this.style.color='#0e6ba8'" onmouseleave="this.style.color='#1392ec'">
                    Cambiar foto
                </button>
                <input type="file" id="editPhotoInput" accept="image/*" onchange="app.handleEditPhotoUpload(event)"
                    style="display: none;">
            </div>

            <!-- Form Fields -->
            <div style="padding: 0 20px; display: flex; flex-direction: column; gap: 24px;">
                <!-- Full Name -->
                <div style="display: flex; flex-direction: column; gap: 8px;">
                    <label for="editName" style="font-size: 14px; font-weight: 700; color: #1e293b;">Nombre
                        completo</label>
                    <input id="editName" type="text" placeholder="Ej. Juan Pérez"
                        style="width: 100%; height: 48px; padding: 0 16px; background: #ffffff; border: 1px solid #e2e8f0; border-radius: 12px; color: #1e293b; font-size: 14px; font-family: 'Inter', sans-serif; box-sizing: border-box; outline: none; box-shadow: 0 1px 2px rgba(0,0,0,0.05); transition: all 0.15s;"
                        onfocus="this.style.borderColor='#1392ec';this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.15)'"
                        onblur="this.style.borderColor='#e2e8f0';this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'">
                </div>
                <!-- Headline -->
                <div style="display: flex; flex-direction: column; gap: 8px;">
                    <label for="editPosition" style="font-size: 14px; font-weight: 700; color: #1e293b;">Titular
                        profesional</label>
                    <input id="editPosition" type="text" placeholder="Ej. Senior Frontend Developer"
                        style="width: 100%; height: 48px; padding: 0 16px; background: #ffffff; border: 1px solid #e2e8f0; border-radius: 12px; color: #1e293b; font-size: 14px; font-family: 'Inter', sans-serif; box-sizing: border-box; outline: none; box-shadow: 0 1px 2px rgba(0,0,0,0.05); transition: all 0.15s;"
                        onfocus="this.style.borderColor='#1392ec';this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.15)'"
                        onblur="this.style.borderColor='#e2e8f0';this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'">
                </div>
                <!-- Country + City Row -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                    <div style="display: flex; flex-direction: column; gap: 8px;">
                        <label for="editCountry" style="font-size: 14px; font-weight: 700; color: #1e293b;">País</label>
                        <div style="position: relative;">
                            <select id="editCountry" onchange="app.updateCities('editCountry', 'editCity')"
                                style="width: 100%; height: 48px; padding: 0 36px 0 16px; background: #ffffff; border: 1px solid #e2e8f0; border-radius: 12px; color: #1e293b; font-size: 14px; font-family: 'Inter', sans-serif; box-sizing: border-box; outline: none; appearance: none; cursor: pointer; box-shadow: 0 1px 2px rgba(0,0,0,0.05); transition: all 0.15s;"
                                onfocus="this.style.borderColor='#1392ec';this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.15)'"
                                onblur="this.style.borderColor='#e2e8f0';this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'">
                                <!-- Populated by JS -->
                            </select>
                            <span class="material-icons"
                                style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); color: #64748b; pointer-events: none; font-size: 20px;">expand_more</span>
                        </div>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 8px;">
                        <label for="editCity" style="font-size: 14px; font-weight: 700; color: #1e293b;">Ciudad</label>
                        <div style="position: relative;">
                            <select id="editCity" disabled
                                style="width: 100%; height: 48px; padding: 0 36px 0 16px; background: #ffffff; border: 1px solid #e2e8f0; border-radius: 12px; color: #1e293b; font-size: 14px; font-family: 'Inter', sans-serif; box-sizing: border-box; outline: none; appearance: none; cursor: pointer; box-shadow: 0 1px 2px rgba(0,0,0,0.05); transition: all 0.15s;"
                                onfocus="this.style.borderColor='#1392ec';this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.15)'"
                                onblur="this.style.borderColor='#e2e8f0';this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'">
                                <!-- Populated by JS -->
                            </select>
                            <span class="material-icons"
                                style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); color: #64748b; pointer-events: none; font-size: 20px;">expand_more</span>
                        </div>
                    </div>
                </div>
                <!-- Salary -->
                <div style="display: flex; flex-direction: column; gap: 8px;">
                    <label for="editSalary" style="font-size: 14px; font-weight: 700; color: #1e293b;">Salario esperado
                        (mensual)</label>
                    <div style="display: flex; border-radius: 12px; border: 1px solid #e2e8f0; overflow: hidden; background: #ffffff; box-shadow: 0 1px 2px rgba(0,0,0,0.05); transition: all 0.15s;"
                        id="editSalaryGroup"
                        onfocusin="this.style.borderColor='#1392ec';this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.15)'"
                        onfocusout="this.style.borderColor='#e2e8f0';this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'">
                        <div
                            style="position: relative; border-right: 1px solid #e2e8f0; background: rgba(249,250,251,0.5);">
                            <select id="editCurrency"
                                style="height: 48px; background: transparent; color: #1e293b; padding: 0 28px 0 16px; appearance: none; outline: none; border: none; cursor: pointer; font-size: 14px; font-weight: 500; font-family: 'Inter', sans-serif; width: 88px;">
                                <option value="usd">USD</option>
                                <option value="mxn">MXN</option>
                                <option value="clp">CLP</option>
                                <option value="cop">COP</option>
                                <option value="eur">EUR</option>
                            </select>
                            <span class="material-icons"
                                style="position: absolute; right: 4px; top: 50%; transform: translateY(-50%); color: #64748b; pointer-events: none; font-size: 14px;">expand_more</span>
                        </div>
                        <input id="editSalary" type="number" placeholder="0.00"
                            style="flex: 1; background: transparent; border: none; color: #1e293b; height: 48px; padding: 0 16px; outline: none; font-size: 14px; font-family: 'Inter', sans-serif; box-sizing: border-box; -moz-appearance: textfield; appearance: textfield;"
                            onkeyup="app.formatCurrency(this)">
                    </div>
                    <p style="font-size: 12px; color: #64748b; margin: 4px 0 0; line-height: 1.5;">Este valor será
                        visible solo para reclutadores premium.</p>
                </div>
            </div>
            <div style="height: 32px;"></div>
        </main>

        <!-- Bottom Save Button -->
        <div
            style="position: absolute; bottom: 0; width: 100%; background: rgba(255,255,255,0.95); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); border-top: 1px solid #e2e8f0; padding: 20px; z-index: 20; box-shadow: 0 -4px 20px rgba(0,0,0,0.05); box-sizing: border-box;">
            <button onclick="app.saveEditPersonal()"
                style="width: 100%; height: 48px; background: #1392ec; color: white; font-weight: 700; border-radius: 12px; border: none; cursor: pointer; font-size: 16px; font-family: 'Inter', sans-serif; box-shadow: 0 10px 15px -3px rgba(19,146,236,0.2); display: flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s; transform: scale(1);"
                onmouseenter="this.style.background='#0e6ba8'" onmouseleave="this.style.background='#1392ec'"
                onmousedown="this.style.transform='scale(0.98)'" onmouseup="this.style.transform='scale(1)'">
                <span>Guardar cambios</span>
            </button>
        </div>
    </div>

    <!-- EDIT SKILLS MODAL (Stitch v2) -->
    <!-- EDIT SKILLS MODAL (Stitch) -->
    <div id="editSkillsModal"
        style="display: none; position: fixed; inset: 0; z-index: 1000; background: #ffffff; flex-direction: column; font-family: 'Inter', sans-serif;">
        <!-- Header -->
        <div style="flex-shrink: 0; padding: 16px 16px 8px; background: #ffffff; z-index: 20; position: relative;">
            <div style="display: flex; flex-direction: column; align-items: center;">
                <div style="height: 6px; width: 48px; border-radius: 9999px; background: #E5E7EB; margin-bottom: 24px;">
                </div>
                <div
                    style="display: flex; align-items: center; justify-content: space-between; width: 100%; margin-bottom: 8px;">
                    <button onclick="app.closeEditSkills()"
                        style="padding: 8px; margin-left: -8px; border-radius: 50%; background: none; border: none; cursor: pointer; color: #6B7280; transition: background 0.15s;"
                        onmouseenter="this.style.background='#f3f4f6'" onmouseleave="this.style.background='none'">
                        <span class="material-icons" style="font-size: 24px;">close</span>
                    </button>
                    <h1 style="font-size: 20px; font-weight: 700; letter-spacing: -0.025em; color: #2D3436; margin: 0;">
                        Editar Habilidades</h1>
                    <div style="width: 40px;"></div>
                </div>
            </div>
            <!-- Search -->
            <div style="margin-top: 8px; margin-bottom: 8px;">
                <div style="position: relative;">
                    <div
                        style="position: absolute; inset-block: 0; left: 0; display: flex; align-items: center; padding-left: 16px; pointer-events: none;">
                        <span class="material-icons" id="editSkillsSearchIcon"
                            style="color: #9CA3AF; font-size: 20px; transition: color 0.15s;">search</span>
                    </div>
                    <input id="editSkillsSearch" oninput="app.filterEditSkills(this.value)"
                        onfocus="document.getElementById('editSkillsSearchIcon').style.color='#1392ec'"
                        onblur="document.getElementById('editSkillsSearchIcon').style.color='#9CA3AF'" type="text"
                        placeholder="Buscar habilidades (ej. Swift, Leadership)"
                        style="display: block; width: 100%; padding: 16px 16px 16px 48px; font-size: 14px; color: #2D3436; border: 1px solid #E5E7EB; border-radius: 16px; background: #F1F3F5; font-family: 'Inter', sans-serif; box-sizing: border-box; outline: none; transition: all 0.2s;"
                        onfocusin="this.style.borderColor='#1392ec';this.style.background='#ffffff';this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.15)'"
                        onfocusout="this.style.borderColor='#E5E7EB';this.style.background='#F1F3F5';this.style.boxShadow='none'">
                </div>
            </div>
        </div>

        <!-- Scrollable Content -->
        <div
            style="flex: 1; overflow-y: auto; padding: 0 16px 140px; -ms-overflow-style: none; scrollbar-width: none; background: #ffffff;">
            <!-- Selected Skills -->
            <div style="margin-bottom: 32px; margin-top: 8px;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                    <h2 style="font-size: 18px; font-weight: 700; color: #2D3436; margin: 0;">Tus Habilidades</h2>
                    <span id="editSkillsCount"
                        style="font-size: 12px; font-weight: 600; color: #1392ec; background: rgba(19,146,236,0.1); padding: 4px 8px; border-radius: 8px;">0
                        Seleccionadas</span>
                </div>
                <div id="editSkillsSelected" style="display: flex; flex-wrap: wrap; gap: 10px; min-height: 44px;">
                    <!-- Selected chips rendered by JS -->
                </div>
            </div>

            <!-- Suggestions -->
            <div id="editSkillsBubbles">
                <!-- Categories rendered by JS -->
            </div>
            <div style="height: 48px;"></div>
        </div>

        <!-- Bottom Save Button -->
        <div style="position: fixed; bottom: 0; left: 0; right: 0; z-index: 30;">
            <div
                style="height: 48px; width: 100%; background: linear-gradient(to top, #ffffff 0%, #ffffff 40%, transparent 100%); pointer-events: none;">
            </div>
            <div style="background: #ffffff; padding: 16px 16px 32px; border-top: 1px solid #f3f4f6;">
                <button onclick="app.saveEditSkills()"
                    style="width: 100%; background: #1392ec; color: white; font-weight: 700; padding: 16px 24px; border-radius: 16px; border: none; cursor: pointer; font-size: 16px; font-family: 'Inter', sans-serif; box-shadow: 0 10px 15px -3px rgba(19,146,236,0.3); display: flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s;"
                    onmouseenter="this.style.background='#0f7fd0'" onmouseleave="this.style.background='#1392ec'">
                    <span>Guardar cambios</span>
                    <span class="material-icons" style="font-size: 20px;">check</span>
                </button>
            </div>
        </div>
    </div>

    <!-- EDIT EXPERIENCE MODAL (Stitch) -->
    <!-- EDIT EXPERIENCE MODAL (Stitch) -->
    <div id="editExperienceModal"
        style="display: none; position: fixed; inset: 0; z-index: 1000; background: #F8F9FA; flex-direction: column; font-family: 'Inter', sans-serif;">
        <!-- Drag handle -->
        <div
            style="display: flex; width: 100%; align-items: center; justify-content: center; padding: 12px 0 4px; background: #F8F9FA; z-index: 20;">
            <div style="height: 6px; width: 48px; border-radius: 9999px; background: #d1d5db;"></div>
        </div>
        <!-- Header -->
        <header
            style="display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; background: #F8F9FA; flex-shrink: 0; z-index: 20; border-bottom: 1px solid #f3f4f6;">
            <button onclick="app.closeEditExperience()"
                style="display: flex; align-items: center; justify-content: center; padding: 8px; border-radius: 50%; background: none; border: none; cursor: pointer; color: #6c757d; transition: background 0.15s;"
                onmouseenter="this.style.background='#E5E7EB'" onmouseleave="this.style.background='none'">
                <span class="material-icons" style="font-size: 24px;">close</span>
            </button>
            <h1 style="font-size: 18px; font-weight: 700; text-align: center; flex: 1; color: #212529; margin: 0;">
                Experiencia Laboral</h1>
            <button onclick="app.saveExperience()"
                style="color: #1392ec; font-weight: 700; font-size: 16px; padding: 4px 8px; border-radius: 6px; background: none; border: none; cursor: pointer; font-family: 'Inter', sans-serif; transition: background 0.15s;"
                onmouseenter="this.style.background='rgba(19,146,236,0.1)'" onmouseleave="this.style.background='none'">
                Guardar
            </button>
        </header>

        <!-- Scrollable Content -->
        <main
            style="flex: 1; overflow-y: auto; padding: 0 16px 100px; background: #F8F9FA; -ms-overflow-style: none; scrollbar-width: none;">
            <input type="hidden" id="expIndex">

            <!-- Timeline Section -->
            <div style="margin-bottom: 32px; margin-top: 16px;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                    <h2 style="font-size: 20px; font-weight: 700; letter-spacing: -0.025em; color: #212529; margin: 0;">
                        Tu trayectoria</h2>
                </div>
                <div id="expTimeline">
                    <!-- Timeline entries rendered by JS -->
                </div>
                <!-- Add Experience Button -->
                <button onclick="app.openEditExperience()"
                    style="margin-top: 24px; display: flex; align-items: center; justify-content: center; width: 100%; padding: 12px; border-radius: 8px; border: 1px dashed #d1d5db; color: #1392ec; background: #ffffff; cursor: pointer; font-family: 'Inter', sans-serif; font-size: 14px; font-weight: 600; box-shadow: 0 1px 2px rgba(0,0,0,0.04); transition: background 0.15s;"
                    onmouseenter="this.style.background='#f9fafb'" onmouseleave="this.style.background='#ffffff'">
                    <span class="material-icons" style="margin-right: 8px; font-size: 20px;">add_circle</span>
                    Agregar experiencia anterior
                </button>
            </div>

            <!-- Divider -->
            <div style="height: 1px; background: #E5E7EB; width: 100%; margin: 24px 0;"></div>

            <!-- Edit Form Section -->
            <div id="expEditForm" style="display: none; padding: 4px; border-radius: 12px;">
                <h2
                    style="font-size: 18px; font-weight: 700; margin-bottom: 16px; display: flex; align-items: center; gap: 8px; color: #212529;">
                    <span class="material-icons" style="color: #1392ec; font-size: 22px;">edit_note</span>
                    <span id="expFormTitle">Editar Experiencia</span>
                </h2>
                <form onsubmit="return false;" style="display: flex; flex-direction: column; gap: 20px;">
                    <!-- Company -->
                    <div style="display: flex; flex-direction: column; gap: 6px;">
                        <label
                            style="font-size: 11px; font-weight: 700; color: #6c757d; text-transform: uppercase; letter-spacing: 0.05em; margin-left: 4px;">Empresa</label>
                        <div style="position: relative;">
                            <div
                                style="position: absolute; inset-block: 0; left: 0; padding-left: 12px; display: flex; align-items: center; pointer-events: none; color: #9CA3AF;">
                                <span class="material-icons" style="font-size: 20px;">business</span>
                            </div>
                            <input id="expCompany_stitch" type="text" placeholder="Ej: Google"
                                style="width: 100%; padding: 12px 16px 12px 40px; background: #ffffff; border: 1px solid #dee2e6; border-radius: 8px; color: #212529; font-size: 14px; font-family: 'Inter', sans-serif; box-sizing: border-box; outline: none; box-shadow: 0 1px 2px rgba(0,0,0,0.05); transition: border-color 0.15s;"
                                onfocus="this.style.borderColor='#1392ec';this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.15)'"
                                onblur="this.style.borderColor='#dee2e6';this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'">
                        </div>
                    </div>
                    <!-- Role -->
                    <div style="display: flex; flex-direction: column; gap: 6px;">
                        <label
                            style="font-size: 11px; font-weight: 700; color: #6c757d; text-transform: uppercase; letter-spacing: 0.05em; margin-left: 4px;">Cargo</label>
                        <div style="position: relative;">
                            <div
                                style="position: absolute; inset-block: 0; left: 0; padding-left: 12px; display: flex; align-items: center; pointer-events: none; color: #9CA3AF;">
                                <span class="material-icons" style="font-size: 20px;">badge</span>
                            </div>
                            <input id="expRole" type="text" placeholder="Ej: Senior Developer"
                                style="width: 100%; padding: 12px 16px 12px 40px; background: #ffffff; border: 1px solid #dee2e6; border-radius: 8px; color: #212529; font-size: 14px; font-family: 'Inter', sans-serif; box-sizing: border-box; outline: none; box-shadow: 0 1px 2px rgba(0,0,0,0.05); transition: border-color 0.15s;"
                                onfocus="this.style.borderColor='#1392ec';this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.15)'"
                                onblur="this.style.borderColor='#dee2e6';this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'">
                        </div>
                    </div>
                    <!-- Currently Working Checkbox -->
                    <div style="display: flex; align-items: center; gap: 12px; padding: 4px 0;">
                        <div style="position: relative; display: flex; align-items: center;">
                            <input type="checkbox" id="expCurrent" onchange="app.toggleExpEndDate()"
                                style="width: 20px; height: 20px; cursor: pointer; accent-color: #1392ec; border-radius: 4px;">
                        </div>
                        <label for="expCurrent"
                            style="cursor: pointer; font-size: 14px; font-weight: 500; color: #212529;">Trabajo aquí
                            actualmente</label>
                    </div>
                    <!-- Date Row -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                        <div style="display: flex; flex-direction: column; gap: 6px;">
                            <label
                                style="font-size: 11px; font-weight: 700; color: #6c757d; text-transform: uppercase; letter-spacing: 0.05em; margin-left: 4px;">Fecha
                                de inicio</label>
                            <input id="expStartDate_stitch" type="month"
                                style="width: 100%; padding: 12px 8px; background: #ffffff; border: 1px solid #dee2e6; border-radius: 8px; color: #212529; font-size: 14px; font-family: 'Inter', sans-serif; box-sizing: border-box; outline: none; box-shadow: 0 1px 2px rgba(0,0,0,0.05); transition: border-color 0.15s;"
                                onfocus="this.style.borderColor='#1392ec';this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.15)'"
                                onblur="this.style.borderColor='#dee2e6';this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'">
                        </div>
                        <div id="expEndDateGroup" style="display: flex; flex-direction: column; gap: 6px;">
                            <label
                                style="font-size: 11px; font-weight: 700; color: #6c757d; text-transform: uppercase; letter-spacing: 0.05em; margin-left: 4px;">Fecha
                                de fin</label>
                            <input id="expEndDate_stitch" type="month"
                                style="width: 100%; padding: 12px 8px; background: #ffffff; border: 1px solid #dee2e6; border-radius: 8px; color: #212529; font-size: 14px; font-family: 'Inter', sans-serif; box-sizing: border-box; outline: none; box-shadow: 0 1px 2px rgba(0,0,0,0.05); transition: border-color 0.15s;"
                                onfocus="if(!this.disabled){this.style.borderColor='#1392ec';this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.15)'}"
                                onblur="this.style.borderColor='#dee2e6';this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'">
                        </div>
                    </div>
                    <!-- Description -->
                    <div style="display: flex; flex-direction: column; gap: 6px;">
                        <label
                            style="font-size: 11px; font-weight: 700; color: #6c757d; text-transform: uppercase; letter-spacing: 0.05em; margin-left: 4px;">Descripción</label>
                        <textarea id="expDescription_stitch"
                            placeholder="Describe tus responsabilidades, logros y tecnologías utilizadas..." rows="4"
                            maxlength="2000"
                            oninput="document.getElementById('expDescCount').textContent=this.value.length+'/2000'"
                            style="width: 100%; padding: 16px; background: #ffffff; border: 1px solid #dee2e6; border-radius: 8px; color: #212529; font-size: 14px; font-family: 'Inter', sans-serif; box-sizing: border-box; outline: none; resize: none; line-height: 1.6; box-shadow: 0 1px 2px rgba(0,0,0,0.05); transition: border-color 0.15s;"
                            onfocus="this.style.borderColor='#1392ec';this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.15)'"
                            onblur="this.style.borderColor='#dee2e6';this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'"></textarea>
                        <div style="display: flex; justify-content: flex-end;">
                            <span id="expDescCount" style="font-size: 12px; color: #9CA3AF;">0/2000</span>
                        </div>
                    </div>
                    <!-- Delete Button -->
                    <button id="expDeleteBtn" type="button" onclick="app.removeExperience()"
                        style="display: none; margin-top: 8px; color: #dc2626; font-size: 14px; font-weight: 500; align-self: center; align-items: center; gap: 4px; cursor: pointer; background: #fef2f2; border: none; padding: 8px 16px; border-radius: 9999px; font-family: 'Inter', sans-serif; transition: background 0.15s;"
                        onmouseenter="this.style.background='#fee2e2'" onmouseleave="this.style.background='#fef2f2'">
                        <span class="material-icons"
                            style="font-size: 18px; vertical-align: middle; margin-right: 4px;">delete</span>
                        Eliminar esta experiencia
                    </button>
                    <div style="height: 32px;"></div>
                </form>
            </div>
        </main>

        <!-- Bottom Save Button -->
        <div
            style="position: absolute; bottom: 0; left: 0; right: 0; padding: 16px; background: #F8F9FA; border-top: 1px solid #E5E7EB; z-index: 30;">
            <button onclick="app.saveExperience()"
                style="width: 100%; background: #1392ec; color: white; font-weight: 700; padding: 14px 16px; border-radius: 12px; border: none; cursor: pointer; font-size: 16px; font-family: 'Inter', sans-serif; box-shadow: 0 10px 15px -3px rgba(19,146,236,0.25); display: flex; align-items: center; justify-content: center; gap: 8px; transition: background 0.2s;"
                onmouseenter="this.style.background='#0f7fd0'" onmouseleave="this.style.background='#1392ec'">
                <span class="material-icons" style="font-size: 20px;">save</span>
                Guardar cambios
            </button>
        </div>
    </div>

    <!-- EDIT EDUCATION MODAL (Stitch) -->
    <div id="editEducationModal"
        style="display: none; position: fixed; inset: 0; z-index: 1000; background: #f9fafb; flex-direction: column; font-family: 'Inter', sans-serif;">

        <!-- Header -->
        <div
            style="display: flex; align-items: center; background: #ffffff; padding: 16px; justify-content: space-between; position: sticky; top: 0; z-index: 20; border-bottom: 1px solid #e5e7eb;">
            <button onclick="app.closeEditEducation()"
                style="display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; border-radius: 50%; background: none; border: none; cursor: pointer; color: #1f2937; transition: background 0.15s;"
                onmouseenter="this.style.background='#f3f4f6'" onmouseleave="this.style.background='transparent'">
                <span class="material-icons" style="font-size: 24px;">arrow_back</span>
            </button>
            <h2
                style="font-size: 18px; font-weight: 700; color: #1f2937; letter-spacing: -0.015em; margin: 0; flex: 1; text-align: center;">
                Historial Académico</h2>
            <div style="width: 40px;"></div>
        </div>

        <!-- Content -->
        <div style="flex: 1; overflow-y: auto; padding-bottom: 120px;">

            <!-- Education Timeline -->
            <div style="padding: 24px 16px 8px;">
                <h3
                    style="font-size: 20px; font-weight: 700; color: #1f2937; letter-spacing: -0.015em; margin: 0 0 16px;">
                    Mis estudios</h3>
                <div id="eduTimeline">
                    <!-- Rendered by JS -->
                </div>
                <button onclick="app.clearEduForm()"
                    style="display: flex; width: 100%; cursor: pointer; align-items: center; justify-content: center; overflow: hidden; border-radius: 12px; height: 48px; padding: 0 16px; background: #ffffff; color: #1392ec; border: 1px dashed rgba(19,146,236,0.4); gap: 8px; transition: all 0.15s; margin-top: 12px; font-family: 'Inter', sans-serif;"
                    onmouseenter="this.style.background='#f9fafb'" onmouseleave="this.style.background='#ffffff'">
                    <span class="material-icons" style="font-size: 20px;">add_circle</span>
                    <span style="font-size: 14px; font-weight: 700;">Agregar formación</span>
                </button>
            </div>

            <!-- Divider -->
            <div style="width: 100%; height: 1px; background: #e5e7eb; margin: 24px 0;"></div>

            <!-- Form -->
            <div style="padding: 0 16px 16px;">
                <div
                    style="background: #ffffff; border-radius: 12px; border: 1px solid #f3f4f6; box-shadow: 0 1px 2px rgba(0,0,0,0.05); padding: 20px;">
                    <h3 id="eduModalTitle"
                        style="font-size: 18px; font-weight: 700; color: #1f2937; letter-spacing: -0.015em; margin: 0 0 20px;">
                        Nueva formación</h3>
                    <input type="hidden" id="eduIndex">
                    <div style="display: flex; flex-direction: column; gap: 20px;">
                        <!-- Institución -->
                        <div style="display: flex; flex-direction: column; gap: 6px;">
                            <label for="eduSchool"
                                style="font-size: 14px; font-weight: 600; color: #4b5563;">Institución</label>
                            <input id="eduSchool" type="text" placeholder="Ej: Universidad Nacional"
                                style="width: 100%; height: 44px; border-radius: 8px; border: 1px solid #e5e7eb; background: #ffffff; padding: 0 16px; color: #1f2937; font-size: 14px; font-family: 'Inter', sans-serif; box-sizing: border-box; outline: none; transition: all 0.15s;"
                                onfocus="this.style.borderColor='#1392ec';this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.15)'"
                                onblur="this.style.borderColor='#e5e7eb';this.style.boxShadow='none'">
                        </div>
                        <!-- Título / Grado -->
                        <div style="display: flex; flex-direction: column; gap: 6px;">
                            <label for="eduDegree" style="font-size: 14px; font-weight: 600; color: #4b5563;">Título /
                                Grado</label>
                            <input id="eduDegree_stitch" type="text" placeholder="Ej: Licenciatura, Máster, Curso"
                                style="width: 100%; height: 44px; border-radius: 8px; border: 1px solid #e5e7eb; background: #ffffff; padding: 0 16px; color: #1f2937; font-size: 14px; font-family: 'Inter', sans-serif; box-sizing: border-box; outline: none; transition: all 0.15s;"
                                onfocus="this.style.borderColor='#1392ec';this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.15)'"
                                onblur="this.style.borderColor='#e5e7eb';this.style.boxShadow='none'">
                        </div>
                        <!-- Campo de estudio -->
                        <div style="display: flex; flex-direction: column; gap: 6px;">
                            <label for="eduFieldOfStudy"
                                style="font-size: 14px; font-weight: 600; color: #4b5563;">Campo de estudio</label>
                            <input id="eduFieldOfStudy" type="text" placeholder="Ej: Diseño Gráfico, Informática"
                                style="width: 100%; height: 44px; border-radius: 8px; border: 1px solid #e5e7eb; background: #ffffff; padding: 0 16px; color: #1f2937; font-size: 14px; font-family: 'Inter', sans-serif; box-sizing: border-box; outline: none; transition: all 0.15s;"
                                onfocus="this.style.borderColor='#1392ec';this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.15)'"
                                onblur="this.style.borderColor='#e5e7eb';this.style.boxShadow='none'">
                        </div>
                        <!-- Dates -->
                        <div style="display: flex; gap: 16px;">
                            <div style="flex: 1; display: flex; flex-direction: column; gap: 6px;">
                                <label for="eduStartDate"
                                    style="font-size: 14px; font-weight: 600; color: #4b5563;">Fecha de inicio</label>
                                <input id="eduStartDate" type="month"
                                    style="width: 100%; height: 44px; border-radius: 8px; border: 1px solid #e5e7eb; background: #ffffff; padding: 0 12px; color: #1f2937; font-size: 14px; font-family: 'Inter', sans-serif; box-sizing: border-box; outline: none; transition: all 0.15s;"
                                    onfocus="this.style.borderColor='#1392ec';this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.15)'"
                                    onblur="this.style.borderColor='#e5e7eb';this.style.boxShadow='none'">
                            </div>
                            <div id="eduEndDateGroup"
                                style="flex: 1; display: flex; flex-direction: column; gap: 6px; transition: opacity 0.2s;">
                                <label for="eduEndDate" style="font-size: 14px; font-weight: 600; color: #4b5563;">Fecha
                                    de fin</label>
                                <input id="eduEndDate" type="month"
                                    style="width: 100%; height: 44px; border-radius: 8px; border: 1px solid #e5e7eb; background: #ffffff; padding: 0 12px; color: #1f2937; font-size: 14px; font-family: 'Inter', sans-serif; box-sizing: border-box; outline: none; transition: all 0.15s;"
                                    onfocus="this.style.borderColor='#1392ec';this.style.boxShadow='0 0 0 2px rgba(19,146,236,0.15)'"
                                    onblur="this.style.borderColor='#e5e7eb';this.style.boxShadow='none'">
                            </div>
                        </div>
                        <!-- Currently studying -->
                        <div style="display: flex; align-items: center; gap: 12px; padding: 4px 0;">
                            <input type="checkbox" id="eduCurrent" onchange="app.toggleEduEndDate()"
                                style="width: 20px; height: 20px; accent-color: #1392ec; cursor: pointer; border-radius: 4px;">
                            <label for="eduCurrent"
                                style="font-size: 14px; font-weight: 500; color: #1f2937; cursor: pointer; user-select: none;">Actualmente
                                estudiando</label>
                        </div>
                    </div>
                </div>
            </div>
            <div style="height: 32px;"></div>
        </div>

        <!-- Footer -->
        <div
            style="position: absolute; bottom: 0; left: 0; width: 100%; background: #ffffff; border-top: 1px solid #e5e7eb; padding: 16px; padding-bottom: 32px; z-index: 30; box-shadow: 0 -4px 6px -1px rgba(0,0,0,0.05); box-sizing: border-box;">
            <div style="display: flex; gap: 16px;">
                <button onclick="app.closeEditEducation()"
                    style="flex: 1; height: 48px; border-radius: 8px; background: #f3f4f6; color: #4b5563; font-size: 14px; font-weight: 700; border: 1px solid #e5e7eb; cursor: pointer; transition: background 0.15s; font-family: 'Inter', sans-serif;"
                    onmouseenter="this.style.background='#e5e7eb'" onmouseleave="this.style.background='#f3f4f6'">
                    Cancelar
                </button>
                <button onclick="app.saveEducation()"
                    style="flex: 1; height: 48px; border-radius: 8px; background: #1392ec; color: #ffffff; font-size: 14px; font-weight: 700; border: none; cursor: pointer; box-shadow: 0 10px 15px -3px rgba(19,146,236,0.25); transition: background 0.15s; font-family: 'Inter', sans-serif;"
                    onmouseenter="this.style.background='#0e6ba8'" onmouseleave="this.style.background='#1392ec'">
                    Guardar
                </button>
            </div>
        </div>
    </div>

    <script src="js/supabase-client-v2.js?v=force123"></script>
    <script src="js/data.js?v=v57"></script>
    <script src="js/app_fixed.js?v=profile_fix_501"></script>
    <script>
        // FORCE UNREGISTER SERVICE WORKER TO FIX CACHING ISSUES
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function (registrations) {
                for (let registration of registrations) {
                    registration.unregister();
                    console.log('ServiceWorker Unregistered');
                }
            });
            // Also try to clear cache
            if (window.caches) {
                caches.keys().then(function (names) {
                    for (let name of names) caches.delete(name);
                });
            }
        }

        // AUTO-LOAD PREFERENCES (Dark Mode)
        window.addEventListener('DOMContentLoaded', () => {
            setTimeout(async () => {
                try {
                    if (window.supabaseClient) {
                        const { data: { session } } = await window.supabaseClient.auth.getSession();
                        if (session && session.user) {
                            const { data } = await window.supabaseClient
                                .from('user_settings')
                                .select('is_dark_mode')
                                .eq('user_id', session.user.id)
                                .maybeSingle();
                            if (data && data.is_dark_mode) {
                                document.body.classList.add('dark-mode');
                                const statusText = document.getElementById('darkModeStatusText');
                                if (statusText) statusText.textContent = 'Modo oscuro';
                            }
                        }
                    }
                } catch (e) { console.error("Error auto-loading dark mode", e) }
            }, 800);
        });
    </script>
    <!-- NEW STITCH FULL-SCREEN EXPORTS -->
    <!-- Settings Full-Screen Modal -->
    <div id="settingsFullScreen"
        style="display: none; position: fixed; inset: 0; z-index: 100000; background: #f6f7f8; overflow-y: auto; font-family: 'Inter', sans-serif;">
        <header
            class="sticky top-0 z-50 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 px-4 h-16 flex items-center justify-between">
            <button onclick="app.closeSettingsFullScreen()"
                class="flex items-center justify-center size-10 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                <span class="material-icons text-slate-900 dark:text-slate-100">arrow_back</span>
            </button>
            <h1 class="text-lg font-bold tracking-tight text-center flex-1">Configuración</h1>
            <div class="size-10"></div>
        </header>
        <main class="flex-1 overflow-y-auto pb-24">
            <div class="px-4 pt-6">
                <h2 class="text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2 ml-1">
                    Preferencias</h2>
                <div class="bg-white dark:bg-slate-900 rounded-xl ios-shadow overflow-hidden">
                    <div
                        class="flex items-center justify-between px-4 py-4 border-b border-slate-100 dark:border-slate-800">
                        <div class="flex items-center gap-3">
                            <div class="size-10 rounded-lg bg-primary/10 flex items-center justify-center">
                                <span class="material-icons text-primary">notifications</span>
                            </div>
                            <span class="text-base font-medium">Notificaciones</span>
                        </div>
                        <label
                            class="relative flex h-7 w-12 cursor-pointer items-center rounded-full bg-primary p-0.5 transition-colors">
                            <input checked class="sr-only peer" type="checkbox"
                                onchange="app.toggleSetting('app_notifications')" />
                            <div
                                class="h-6 w-6 rounded-full bg-white shadow-sm transition-transform peer-checked:translate-x-5">
                            </div>
                        </label>
                    </div>
                </div>
            </div>
            <div class="px-4 pt-6">
                <h2 class="text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2 ml-1">
                    Apariencia</h2>
                <div class="bg-white dark:bg-slate-900 rounded-xl ios-shadow overflow-hidden">
                    <div class="flex items-center justify-between px-4 py-4">
                        <div class="flex items-center gap-3">
                            <div
                                class="size-10 rounded-lg bg-slate-100 dark:bg-slate-800 flex items-center justify-center">
                                <span class="material-icons text-slate-600 dark:text-slate-400">dark_mode</span>
                            </div>
                            <span class="text-base font-medium">Modo Oscuro</span>
                        </div>
                        <label
                            class="relative flex h-7 w-12 cursor-pointer items-center rounded-full bg-slate-200 dark:bg-slate-700 p-0.5 transition-colors">
                            <input id="settingsDarkModeToggle" class="sr-only peer" type="checkbox"
                                onchange="app.toggleDarkMode()" />
                            <div
                                class="h-6 w-6 rounded-full bg-white shadow-sm transition-transform peer-checked:translate-x-5">
                            </div>
                        </label>
                    </div>
                </div>
            </div>
            <div class="px-4 pt-6">
                <h2 class="text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2 ml-1">
                    Soporte y Legal</h2>
                <div class="bg-white dark:bg-slate-900 rounded-xl ios-shadow overflow-hidden">
                    <button
                        class="w-full flex items-center justify-between px-4 py-4 border-b border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors">
                        <div class="flex items-center gap-3">
                            <div
                                class="size-10 rounded-lg bg-slate-100 dark:bg-slate-800 flex items-center justify-center">
                                <span class="material-icons text-slate-600 dark:text-slate-400">help</span>
                            </div>
                            <span class="text-base font-medium">Soporte</span>
                        </div>
                        <span class="material-icons text-slate-400 text-sm">chevron_right</span>
                    </button>
                    <button
                        class="w-full flex items-center justify-between px-4 py-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors">
                        <div class="flex items-center gap-3">
                            <div
                                class="size-10 rounded-lg bg-slate-100 dark:bg-slate-800 flex items-center justify-center">
                                <span class="material-icons text-slate-600 dark:text-slate-400">lock</span>
                            </div>
                            <span class="text-base font-medium">Privacidad</span>
                        </div>
                        <span class="material-icons text-slate-400 text-sm">chevron_right</span>
                    </button>
                </div>
            </div>
            <div class="px-4 pt-10 pb-10">
                <button onclick="app.logout()"
                    class="w-full flex items-center justify-center gap-2 py-4 px-4 bg-white dark:bg-slate-900 rounded-xl ios-shadow text-red-500 font-semibold hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors">
                    <span class="material-icons">logout</span>
                    <span>Cerrar Sesión</span>
                </button>
                <p class="text-center text-slate-400 dark:text-slate-500 text-xs mt-6">Versión 2.4.0</p>
            </div>
        </main>
    </div>

    <!-- Unified Edit Profile Full-Screen Modal -->
    <div id="editProfileFullScreen"
        class="bg-background-light dark:bg-background-dark font-display text-slate-900 dark:text-slate-100"
        style="display: none; position: fixed; inset: 0; z-index: 100000; overflow-y: auto;">

        <div
            class="relative flex min-h-screen w-full flex-col max-w-[480px] mx-auto bg-background-light dark:bg-background-dark overflow-x-hidden">
            <header
                class="sticky top-0 z-50 flex items-center bg-white dark:bg-slate-900 px-5 py-4 border-b border-slate-200 dark:border-slate-800 justify-between">
                <div onclick="app.closeEditProfileFullScreen()"
                    class="text-slate-900 dark:text-slate-100 flex size-10 shrink-0 items-center justify-start cursor-pointer">
                    <span class="material-icons">arrow_back</span>
                </div>
                <h1
                    class="text-slate-900 dark:text-slate-100 text-lg font-bold leading-tight tracking-tight flex-1 text-center">
                    Editar Perfil</h1>
                <div class="flex size-10 items-center justify-end cursor-pointer"></div>
            </header>

            <main class="flex flex-col gap-6 px-5 py-6" style="padding-bottom: 24px;">
                <!-- About Me -->
                <section
                    class="bg-white dark:bg-slate-900 rounded-xl p-5 shadow-sm border border-slate-100 dark:border-slate-800">
                    <h3 class="text-slate-900 dark:text-slate-100 text-lg font-bold leading-tight mb-4">Sobre Mí</h3>
                    <div class="flex flex-col">
                        <label class="text-slate-600 dark:text-slate-400 text-sm font-medium mb-2">Resumen
                            profesional</label>
                        <textarea id="editProfileBio"
                            class="w-full min-h-[140px] rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-4 text-slate-900 dark:text-slate-100 text-base font-normal leading-relaxed focus:border-primary focus:ring-1 focus:ring-primary focus:outline-none resize-none"
                            placeholder="Escribe un breve resumen sobre tu trayectoria y objetivos..."></textarea>
                    </div>
                </section>

                <!-- Experience -->
                <section
                    class="bg-white dark:bg-slate-900 rounded-xl p-5 shadow-sm border border-slate-100 dark:border-slate-800">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-slate-900 dark:text-slate-100 text-lg font-bold leading-tight">Experiencia
                            Profesional</h3>
                        <button onclick="app.openEditExperience()"
                            class="flex items-center gap-1 text-primary text-sm font-bold hover:bg-primary/5 p-1 rounded transition-colors">
                            <span class="material-icons text-sm">add</span>
                            <span>Añadir</span>
                        </button>
                    </div>
                    <div id="unifiedEditExperienceList" class="flex flex-col gap-4">
                        <!-- Populated by JS -->
                    </div>
                </section>

                <!-- Education -->
                <section
                    class="bg-white dark:bg-slate-900 rounded-xl p-5 shadow-sm border border-slate-100 dark:border-slate-800">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-slate-900 dark:text-slate-100 text-lg font-bold leading-tight">Educación</h3>
                        <button onclick="app.openEditEducation()"
                            class="flex items-center gap-1 text-primary text-sm font-bold hover:bg-primary/5 p-1 rounded transition-colors">
                            <span class="material-icons text-sm">add</span>
                            <span>Añadir</span>
                        </button>
                    </div>
                    <div id="unifiedEditEducationList" class="flex flex-col gap-4">
                        <!-- Populated by JS -->
                    </div>
                </section>

                <!-- Skills -->
                <section
                    class="bg-white dark:bg-slate-900 rounded-xl p-5 shadow-sm border border-slate-100 dark:border-slate-800">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-slate-900 dark:text-slate-100 text-lg font-bold leading-tight">Habilidades</h3>
                        <button onclick="app.openEditSkills()"
                            class="text-primary font-medium text-sm hover:underline">Editar Todo</button>
                    </div>
                    <div id="unifiedEditSkillsChips" class="flex flex-wrap gap-2">
                        <!-- Populated by JS -->
                    </div>
                </section>
            </main>

            <footer
                class="mt-auto p-5 pb-8 border-t border-slate-200 dark:border-slate-800 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md">
                <button onclick="app.saveUnifiedProfile()"
                    class="w-full bg-primary text-white py-4 rounded-xl font-bold text-base shadow-lg shadow-primary/20 hover:scale-[0.98] transition-transform">
                    Guardar Cambios
                </button>
            </footer>
        </div>
    </div>
</body>

</html>